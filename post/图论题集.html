<!-- build time:Tue Sep 06 2022 07:01:19 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><link rel="mask-icon" href="/images/logo.svg" color=""><link rel="manifest" href="/images/manifest.json"><meta name="msapplication-config" content="/images/browserconfig.xml"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="google-site-verification" content="il1q90BxSJlkHz0ezs6wuAALE1ljC0BqphuEiVcl41I"><link rel="alternate" type="application/rss+xml" title="Retsa" href="https://asterzc19.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="Retsa" href="https://asterzc19.github.io/atom.xml"><link rel="alternate" type="application/json" title="Retsa" href="https://asterzc19.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="æ¨¡æ¿,é¢˜é›†"><link rel="canonical" href="https://asterzc19.github.io/post/%E5%9B%BE%E8%AE%BA%E9%A2%98%E9%9B%86.html"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-162449527-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-162449527-1")</script><title>å›¾è®ºé¢˜é›† | å›ä¸åˆ°çš„è¿‡å» = Retsa</title><meta name="generator" content="Hexo 6.2.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">å›¾è®ºé¢˜é›†</h1><div class="meta"><span class="item" title="åˆ›å»ºæ—¶é—´ï¼š2022-03-14 18:00:20"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">å‘è¡¨äº</span> <time itemprop="dateCreated datePublished" datetime="2022-03-14T18:00:20+08:00">2022-03-14</time> </span><span class="item" title="æœ¬æ–‡å­—æ•°"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">æœ¬æ–‡å­—æ•°</span> <span>72k</span> <span class="text">å­—</span> </span><span class="item" title="é˜…è¯»æ—¶é•¿"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">é˜…è¯»æ—¶é•¿</span> <span>1:05</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="åˆ‡æ¢å¯¼èˆªæ "><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">å›ä¸åˆ°çš„è¿‡å»</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://s3.bmp.ovh/imgs/2022/09/05/728c619db3847842.jpg"></li><li class="item" data-background-image="https://s3.bmp.ovh/imgs/2022/09/05/d77d62850e952780.jpg"></li><li class="item" data-background-image="https://s3.bmp.ovh/imgs/2022/09/05/db894a8df07c1517.jpg"></li><li class="item" data-background-image="https://s3.bmp.ovh/imgs/2022/09/05/82a4dfcddf3ba7e0.jpg"></li><li class="item" data-background-image="https://s3.bmp.ovh/imgs/2022/09/05/40c7bc0e06dce5f2.jpg"></li><li class="item" data-background-image="https://s3.bmp.ovh/imgs/2022/09/05/05ac51bc092a5a09.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">é¦–é¡µ</a></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://asterzc19.github.io/post/%E5%9B%BE%E8%AE%BA%E9%A2%98%E9%9B%86.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/iOS.jpg"><meta itemprop="name" content="Retsa"><meta itemprop="description" content=", å¯¹æœªæ¥çš„é€æ”¯ï¼Œå¯¹è¿‡å»çš„å¿è¿˜"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Retsa"></span><div class="body md" itemprop="articleBody"><blockquote><p>åŒ…æ‹¬å•æºæœ€çŸ­è·¯çš„å»ºå›¾æ–¹å¼ã€å•æºæœ€çŸ­è·¯çš„ç»¼åˆåº”ç”¨ã€å•æºæœ€çŸ­è·¯çš„æ‰©å±•åº”ç”¨ã€Floyd ç®—æ³•ã€æœ€å°ç”Ÿæˆæ ‘ã€æœ€å°ç”Ÿæˆæ ‘çš„æ‰©å±•åº”ç”¨ã€è´Ÿç¯ã€å·®åˆ†çº¦æŸã€æœ€è¿‘å…¬å…±ç¥–å…ˆã€å¼ºè¿é€šåˆ†é‡ã€åŒè¿é€šåˆ†é‡ã€äºŒåˆ†å›¾ã€æ¬§æ‹‰å›è·¯å’Œæ¬§æ‹‰è·¯å¾„ã€æ‹“æ‰‘æ’åºç­‰å†…å®¹</p></blockquote><ul><li>å›¾è®ºçš„é‡ç‚¹åœ¨äºé—®é¢˜çš„è½¬åŒ–å’ŒæŠ½è±¡</li></ul><hr><h2 id="å•æºæœ€çŸ­è·¯çš„å»ºå›¾æ–¹å¼"><a href="#å•æºæœ€çŸ­è·¯çš„å»ºå›¾æ–¹å¼" class="headerlink" title="å•æºæœ€çŸ­è·¯çš„å»ºå›¾æ–¹å¼"></a>å•æºæœ€çŸ­è·¯çš„å»ºå›¾æ–¹å¼</h2><h3 id="AcWing-çƒ­æµª"><a href="#AcWing-çƒ­æµª" class="headerlink" title="AcWing|çƒ­æµª"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTEzMS8=">AcWing|çƒ­æµª</span></h3><ul><li>spfa ä¸ä¼šè¢«å¡</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 2510, M = 6200 * 2 + 10;
int h[N], e[M], ne[M], w[M], idx;
int dis[N];
bool st[N];
int n, m;
void add(int a, int b, int c)&#123;
    e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx++;
&#125;
void spfa(int x)&#123;
    memset(dis, 0x3f, sizeof(dis));
    dis[x] = 0;
    st[x] = true;
    queue&lt;int&gt; q;
    q.push(x);
    while(!q.empty())&#123;
        int u = q.front(); q.pop();
        st[u] = false;
        for(int i = h[u]; ~i; i = ne[i])&#123;
            int v = e[i];
            if(dis[u] + w[i] &lt; dis[v])&#123;
                dis[v] = dis[u] + w[i];
                if(!st[v])&#123;
                    st[v] = true;
                    q.push(v);
                &#125;
            &#125;
        &#125;
    &#125;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    int start, end;
    cin &gt;&gt; n &gt;&gt; m &gt;&gt; start &gt;&gt; end;
    memset(h, -1, sizeof(h));
    for(int i = 1; i &lt;= m; i++)&#123;
        int a, b, c; cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        add(a, b, c); add(b, a, c);
    &#125;
    spfa(start);
    cout &lt;&lt; dis[end] &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><h3 id="AcWing-ä¿¡ä½¿"><a href="#AcWing-ä¿¡ä½¿" class="headerlink" title="AcWing|ä¿¡ä½¿"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTEzMC8=">AcWing|ä¿¡ä½¿</span></h3><ul><li>å¯¹äºæ¯ä¸ªç‚¹æ¥è¯´ï¼Œå®ƒæ¥æ”¶åˆ°ä¿¡çš„æ—¶é—´ï¼Œç­‰äºå®ƒåˆ°æŒ‡æŒ¥éƒ¨çš„æœ€çŸ­è·ç¦»</li><li>æ•°æ®èŒƒå›´å¾ˆå°ï¼Œå¯ä»¥ç›´æ¥ç”¨ Floyd</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef pair&lt;int, int&gt; PII;
const int N = 110, M = 210 * 2 + 10;
int h[N], e[M], ne[M], w[M], idx;
int dis[N];
bool st[N];
int n, m;
void add(int a, int b, int c)&#123;
    e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx++;
&#125;
int dijkstra(int x)&#123;
    memset(dis, 0x3f, sizeof(dis));
    dis[x] = 0;
    priority_queue&lt;PII, vector&lt;PII&gt;, greater&lt;PII&gt;&gt; q;
    q.push(&#123;0, x&#125;);
    while(q.size())&#123;
        auto t = q.top(); q.pop();
        int ver = t.second, distance = t.first;
        if(st[ver]) continue;
        st[ver] = true;
        for(int i = h[ver]; ~i; i = ne[i])&#123;
            int j = e[i];
            if(dis[j] &gt; distance + w[i])&#123;
                dis[j] = distance + w[i];
                q.push(&#123;dis[j], j&#125;);
            &#125;
        &#125;
    &#125;
    int ans = 0;
    for(int i = 1; i &lt;= n; i++)&#123;
        if(dis[i] == 0x3f3f3f3f) return -1;
        ans = max(ans, dis[i]);
    &#125;
    return ans;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    cin &gt;&gt; n &gt;&gt; m;
    memset(h, -1, sizeof(h));
    for(int i = 1; i &lt;= m; i++)&#123;
        int a, b, c; cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        add(a, b, c); add(b, a, c);
    &#125;
    cout &lt;&lt; dijkstra(1) &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><h3 id="AcWing-é¦™ç”œçš„é»„æ²¹"><a href="#AcWing-é¦™ç”œçš„é»„æ²¹" class="headerlink" title="AcWing|é¦™ç”œçš„é»„æ²¹"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTEyOS8=">AcWing|é¦™ç”œçš„é»„æ²¹</span></h3><ul><li>å¤šæºæ±‡æœ€çŸ­è·¯é—®é¢˜</li><li>ä»¥æ¯ä¸€ä¸ªç‰§åœºä¸ºç»ˆç‚¹ï¼Œå…¨éƒ¨æ±‚ä¸€éæœ€çŸ­è·¯ä¹‹å’Œï¼Œæ‰¾åˆ°æœ€å°å€¼å³å¯</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef pair&lt;int, int&gt; PII;
const int N = 810, M = 3000;
int h[N], e[M], ne[M], w[M], idx;
int dis[N], id[N];
bool st[N];
int n, p, m;
void add(int a, int b, int c)&#123;
    e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx++;
&#125;
int spfa(int x)&#123;
    memset(dis, 0x3f, sizeof(dis));
    dis[x] = 0;
    queue&lt;int&gt; q;
    q.push(x);
    st[x] = true;
    while(q.size())&#123;
        auto t = q.front(); q.pop();
        st[t] = false;
        for(int i = h[t]; ~i; i = ne[i])&#123;
            int j = e[i];
            if(dis[j] &gt; dis[t] + w[i])&#123;
                dis[j] = dis[t] + w[i];
                if(!st[j])&#123;
                    st[j] = true;
                    q.push(j);
                &#125;
            &#125;
        &#125;
    &#125;
    int res = 0;
    for(int i = 1; i &lt;= n; i++)&#123;
        int j = id[i];
        if(dis[j] == 0x3f3f3f3f) return 0x3f3f3f3f;
        res += dis[j];
    &#125;
    return res;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    cin &gt;&gt; n &gt;&gt; p &gt;&gt; m;
    for(int i = 1; i &lt;= n; i++) cin &gt;&gt; id[i];
    memset(h, -1, sizeof(h));
    for(int i = 1; i &lt;= m; i++)&#123;
        int a, b, c; cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        add(a, b, c); add(b, a, c);
    &#125;
    int ans = 0x3f3f3f3f;
    for(int i = 1; i &lt;= p; i++) ans = min(ans, spfa(i));
    cout &lt;&lt; ans &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><h3 id="AcWing-æœ€å°èŠ±è´¹"><a href="#AcWing-æœ€å°èŠ±è´¹" class="headerlink" title="AcWing|æœ€å°èŠ±è´¹"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTEyOC8=">AcWing|æœ€å°èŠ±è´¹</span></h3><ul><li>å¯ä»¥è½¬åŒ–æˆä» $A$ åˆ° $B$ æƒå€¼ä¹˜ç§¯æœ€å¤§çš„è·¯</li><li>å¯¹æƒå€¼ä¹˜ç§¯å¯ä»¥å–å¯¹æ•°è½¬æ¢æˆåŠ æ³•ï¼Œä¸”å–å®Œå¯¹æ•°æƒå€¼å…¨æ˜¯éæ­£ï¼Œæ‰€ä»¥å¯ä»¥è½¬æ¢æˆæœ€çŸ­è·¯ï¼Œç”¨ Dijkstra æ±‚</li><li>æ­¤å¤„ç›´æ¥ä¹˜æ³•åšå³å¯</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 2010;
double g[N][N];
double dist[N];
bool st[N];
int n, m;
void dijkstra(int x)&#123;
    dist[x] = 1;
    for(int i = 1; i &lt;= n; i++)&#123;
        int t = -1;
        for(int j = 1; j &lt;= n; j++)&#123;
            if(!st[j] &amp;&amp; (t == -1 || dist[j] &gt; dist[t])) t = j;
        &#125;
        st[t] = 1;
        for(int j = 1; j &lt;= n; j++)&#123;
            dist[j] = max(dist[j], dist[t] * g[t][j]);
        &#125;
    &#125;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    cout &lt;&lt; fixed &lt;&lt; setprecision(8);
    cin &gt;&gt; n &gt;&gt; m;
    for(int i = 1; i &lt;= m; i++)&#123;
        int x, y, z; cin &gt;&gt; x &gt;&gt; y &gt;&gt; z;
        double t = (100 - z) / 100.0;
        g[x][y] = g[y][x] = max(g[x][y], t);
    &#125;
    int start, end; cin &gt;&gt; start &gt;&gt; end;
    dijkstra(start);
    cout &lt;&lt; (100 / dist[end]) &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><h3 id="AcWing-æœ€ä¼˜ä¹˜è½¦"><a href="#AcWing-æœ€ä¼˜ä¹˜è½¦" class="headerlink" title="AcWing|æœ€ä¼˜ä¹˜è½¦"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvOTIyLw==">AcWing|æœ€ä¼˜ä¹˜è½¦</span></h3><ul><li>æ¯è¶Ÿå·´å£«çš„æ‰€æœ‰ç«™ä¹‹é—´å¯ä»¥å»ºç«‹ä¸€æ¡æƒå€¼ä¸º $1$ çš„æœ‰å‘è¾¹ï¼Œæ¢ä¹˜æ•°å¯ä»¥è½¬æ¢æˆä»èµ·ç‚¹ååˆ°ç»ˆç‚¹çš„æƒå€¼ $-1$</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 510;
bool g[N][N];
int dist[N];
int stop[N];
int n, m;
void bfs()&#123;
    queue&lt;int&gt; q;
    memset(dist, 0x3f, sizeof(dist));
    q.push(1);
    dist[1] = 0;
    while(q.size())&#123;
        int t = q.front(); q.pop();
        for(int i = 1; i &lt;= n; i++)&#123;
            if(g[t][i] &amp;&amp; dist[i] &gt; dist[t] + 1)&#123;
                dist[i] = dist[t] + 1;
                q.push(i);
            &#125;
        &#125;
    &#125;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    cin &gt;&gt; m &gt;&gt; n;
    string line;
    getline(cin, line);
    while(m--)&#123;
        getline(cin, line);
        stringstream ssin(line);
        int cnt = 0, p;
        while(ssin &gt;&gt; p) stop[++cnt] = p;
        for(int j = 1; j &lt;= cnt; j++)&#123;
            for(int k = j + 1; k &lt;= cnt; k++)&#123;
                g[stop[j]][stop[k]] = true;
            &#125;
        &#125;
    &#125;
    bfs();
    if(dist[n] == 0x3f3f3f3f) cout &lt;&lt; &quot;NO\n&quot;;
    else cout &lt;&lt; max(0, dist[n] - 1) &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><h3 id="AcWing-æ˜‚è´µçš„è˜ç¤¼"><a href="#AcWing-æ˜‚è´µçš„è˜ç¤¼" class="headerlink" title="AcWing|æ˜‚è´µçš„è˜ç¤¼"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvOTA1Lw==">AcWing|æ˜‚è´µçš„è˜ç¤¼</span></h3><ul><li>å¯ä»¥è®¾ç½®ä¸€ä¸ªè™šæ‹Ÿæºç‚¹ï¼Œè¾¹æƒå…¨ä¸ºåŸä»·è´­ä¹°çš„ä»·æ ¼</li><li>æšä¸¾ä¸åŒç­‰çº§åŒºé—´å†…çš„æœ€çŸ­è·¯ï¼Œå–æœ€å°å€¼</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 110, INF = 0x3f3f3f3f;
int n, m;
int w[N][N], level[N];
int dist[N];
bool st[N];
int dijkstra(int down, int up)&#123;
    memset(dist, 0x3f, sizeof(dist));
    memset(st, 0, sizeof(st));
    dist[0] = 0;
    for(int i = 1; i &lt;= n; i++)&#123;
        int t = -1;
        for(int j = 0; j &lt;= n; j++)&#123;
            if(!st[j] &amp;&amp; (t == -1 || dist[t] &gt; dist[j])) t = j;
        &#125;
        st[t] = 1;
        for(int j = 1; j &lt;= n; j++)&#123;
            if(level[j] &gt;= down &amp;&amp; level[j] &lt;= up)&#123;
                dist[j] = min(dist[j], dist[t] + w[t][j]);
            &#125;
        &#125;
    &#125;
    return dist[1];
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    cin &gt;&gt; m &gt;&gt; n;
    memset(w, 0x3f, sizeof(w));
    for(int i = 1; i &lt;= n; i++)&#123;
        w[i][i] = 0;
        int price, cnt;
        cin &gt;&gt; price &gt;&gt; level[i] &gt;&gt; cnt;
        w[0][i] = min(price, w[0][i]);
        while(cnt--)&#123;
            int id, cost;
            cin &gt;&gt; id &gt;&gt; cost;
            w[id][i] = min(w[id][i], cost);
        &#125;
    &#125;
    int ans = INF;
    for(int i = level[1] - m; i &lt;= level[1]; i++)&#123;
        ans = min(ans, dijkstra(i, i + m));
    &#125;
    cout &lt;&lt; ans &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><hr><h2 id="å•æºæœ€çŸ­è·¯çš„ç»¼åˆåº”ç”¨"><a href="#å•æºæœ€çŸ­è·¯çš„ç»¼åˆåº”ç”¨" class="headerlink" title="å•æºæœ€çŸ­è·¯çš„ç»¼åˆåº”ç”¨"></a>å•æºæœ€çŸ­è·¯çš„ç»¼åˆåº”ç”¨</h2><ul><li>å•æºæœ€çŸ­è·¯ä¸å…¶ä»–ç®—æ³•çš„ç»“åˆ<ul><li>DFS</li><li>äºŒåˆ†</li><li>DP</li><li>æ‹“æ‰‘æ’åº</li></ul></li></ul><h3 id="AcWing-æ–°å¹´å¥½"><a href="#AcWing-æ–°å¹´å¥½" class="headerlink" title="AcWing|æ–°å¹´å¥½"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTEzNy8=">AcWing|æ–°å¹´å¥½</span></h3><ul><li>æœ€çŸ­è·¯ä¸ DFS çš„ç»“åˆ</li><li>å…ˆé¢„å¤„ç†æœ€çŸ­è·¯ï¼Œä¹‹å DFS æ‹œè®¿é¡ºåº<ul><li>å…ˆé¢„å¤„ç†å‡ºä» $1, a, b, c, d, e$ å‡ºå‘åˆ°å…¶ä»–æ‰€æœ‰ç‚¹çš„å•æºæœ€çŸ­è·¯å¾„</li><li>DFS æ‰€æœ‰æ‹œè®¿é¡ºåº $5!$ï¼Œå¯¹äºæ¯ä¸€ç§æ‹œè®¿é¡ºåºï¼Œå¯ä»¥é€šè¿‡æŸ¥è¡¨çš„æ–¹å¼ç®—å‡ºæœ€çŸ­è·ç¦»</li></ul></li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef pair&lt;int, int&gt; PII;
const int N = 50010, M = 200010, INF = 0x3f3f3f3f;
int h[N], e[M], ne[M], w[M], idx;
int dist[6][N], source[6];
bool st[N];
void add(int a, int b, int c)&#123;
    e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx++;
&#125;
void dijkstra(int start, int dist[])&#123;
    priority_queue&lt;PII, vector&lt;PII&gt;, greater&lt;PII&gt;&gt; pq;
    memset(st, 0, sizeof(st));
    dist[start] = 0;
    pq.push(&#123;0, start&#125;);
    while(pq.size())&#123;
        auto t = pq.top(); pq.pop();
        int ver = t.second, distance = t.first;
        if(st[ver]) continue;
        st[ver] = 1;
        for(int i = h[ver]; ~i; i = ne[i])&#123;
            int j = e[i];
            if(dist[j] &gt; distance + w[i])&#123;
                dist[j] = distance + w[i];
                pq.push(&#123;dist[j], j&#125;);
            &#125;
        &#125;
    &#125;
&#125;
int dfs(int u, int start, int dis)&#123;
    if(u &gt; 5) return dis;
    int ans = INF;
    for(int i = 1; i &lt;= 5; i++)&#123;
        if(!st[i])&#123;
            int nxt = source[i];
            st[i] = 1;
            ans = min(ans, dfs(u + 1, i, dis + dist[start][nxt]));
            st[i] = 0;
        &#125;
    &#125;
    return ans;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    memset(h, -1, sizeof(h));
    memset(dist, 0x3f, sizeof(dist));
    int n, m; cin &gt;&gt; n &gt;&gt; m;
    for(int i = 1; i &lt;= 5; i++) cin &gt;&gt; source[i];
    for(int i = 1; i &lt;= m; i++)&#123;
        int a, b, c; cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        add(a, b, c), add(b, a, c);
    &#125;
    source[0] = 1;	// ä»è¿™é‡Œå‡ºå‘
    for(int i = 0; i &lt;= 5; i++) dijkstra(source[i], dist[i]);
    memset(st, 0, sizeof(st));
    cout &lt;&lt; dfs(1, 0, 0) &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><h3 id="AcWing-é€šä¿¡çº¿è·¯"><a href="#AcWing-é€šä¿¡çº¿è·¯" class="headerlink" title="AcWing|é€šä¿¡çº¿è·¯"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMzQyLw==">AcWing|é€šä¿¡çº¿è·¯</span></h3><ul><li>åˆ¤æ–­æ˜¯å¦èƒ½äºŒåˆ†çš„æ¡ä»¶æ˜¯ï¼ŒæŸ¥æ‰¾çš„å€¼æ˜¯å¦åœ¨åˆ†ç•Œç‚¹ä¸Šï¼Œå³åˆ†ç•Œç‚¹å·¦è¾¹æ»¡è¶³è¿™ä¸ªæ€§è´¨ï¼Œå³è¾¹ä¸æ»¡è¶³è¿™ä¸ªæ€§è´¨<ul><li>å®šä¹‰åœ¨ $[0, 1000001]$ è¿™ä¸ªåŒºé—´ä¸­çš„æ€§è´¨å¦‚ä¸‹</li><li>å¯¹äºåŒºé—´ä¸­çš„æŸä¸€ä¸ªç‚¹ $x$ï¼Œæ±‚å‡ºä» $1 \sim N$ ä¸­æœ€å°‘ç»è¿‡å‡ æ¡é•¿åº¦å¤§äº $x$ çš„è¾¹ï¼Œå‡è®¾æœ‰ $cnt$ æ¡ï¼Œæ˜¯å¦æ»¡è¶³ $cnt \le k$</li></ul></li><li>æ±‚å‡ºä» $1$ åˆ° $N$ æœ€å°‘ç»è¿‡å‡ æ¡é•¿åº¦å¤§äº $x$ çš„è¾¹ï¼Œå¯ä»¥å°†æ‰€æœ‰è¾¹åˆ†ç±»ï¼šå¦‚æœè¾¹é•¿å¤§äº $x$ï¼Œåˆ™è¾¹æƒçœ‹æˆ $1$ï¼Œå¦åˆ™è¾¹æƒä¸º $0$<ul><li>å› æ­¤å¯ä»¥ä½¿ç”¨åŒç«¯é˜Ÿåˆ— BFS æ¥æ±‚æœ€çŸ­è·¯ï¼Œæ—¶é—´å¤æ‚åº¦ $O(n)$</li></ul></li><li>å› æ­¤æœ¬é¢˜å³ä¸º <strong>åŒç«¯é˜Ÿåˆ— + äºŒåˆ†</strong></li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 1010, M = 20010;
int h[N], e[M], ne[M], w[M], idx;
int dist[N];
bool st[N];
int n, m, k;
void add(int a, int b, int c)&#123;
    e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx++;
&#125;
bool bfs(int x)&#123;
    memset(st, 0, sizeof(st));
    memset(dist, 0x3f, sizeof(dist));
    deque&lt;int&gt; q;
    q.push_back(1);
    dist[1] = 0;
    while(q.size())&#123;
        auto t = q.front(); q.pop_front();
        if(st[t]) continue;
        st[t] = 1;
        for(int i = h[t]; ~i; i = ne[i])&#123;
            int j = e[i], v = w[i] &gt; x;
            if(dist[j] &gt; dist[t] + v)&#123;
                dist[j] = dist[t] + v;
                if(!v) q.push_front(j);
                else q.push_back(j);
            &#125;
        &#125;
    &#125;
    return dist[n] &lt;= k;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    memset(h, -1, sizeof(h));
    cin &gt;&gt; n &gt;&gt; m &gt;&gt; k;
    while(m--)&#123;
        int a, b, c; cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        add(a, b, c), add(b, a, c);
    &#125;
    int l = 0, r = 1e6 + 1;     // r æ¯”è¾¹ç•Œå¤š 1 åˆ¤æ–­æ˜¯å¦æœ‰è§£
    while(l &lt; r)&#123;
        int mid = l + r &gt;&gt; 1;
        if(bfs(mid)) r = mid;
        else l = mid + 1;
    &#125;
    if(r == 1e6 + 1) cout &lt;&lt; -1 &lt;&lt; &#39;\n&#39;;
    else cout &lt;&lt; r &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><h3 id="AcWing-é“è·¯ä¸èˆªçº¿ğŸŒ–ğŸŒ–"><a href="#AcWing-é“è·¯ä¸èˆªçº¿ğŸŒ–ğŸŒ–" class="headerlink" title="AcWing|é“è·¯ä¸èˆªçº¿ğŸŒ–ğŸŒ–"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMzQ0Lw==">AcWing|é“è·¯ä¸èˆªçº¿</span>ğŸŒ–ğŸŒ–</h3><ul><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9hY3Rpdml0eS9jb250ZW50L2NvZGUvY29udGVudC8yNzI2Njgv">è¯¦ç»†é¢˜è§£</span></li><li>é“è·¯æ˜¯åŒå‘ï¼Œè¾¹æƒéè´Ÿï¼Œèˆªçº¿æ˜¯å•å‘ï¼Œè¾¹æƒå¯æ­£å¯è´Ÿï¼Œä½†æ²¡æœ‰è‡ªç¯</li><li><strong>$spfa$ ä¼šè¢«å¡æ‰</strong></li><li>å¯ä»¥æŠŠåªæœ‰é“è·¯çš„å‡ ä¸ªèŠ‚ç‚¹çœ‹æˆä¸€ä¸ªå›¢ï¼Œå›¢å†…ç”¨ Dijkstraï¼Œå›¢ä¸å›¢ä¹‹é—´ç”¨æ‹“æ‰‘åºå¤„ç†</li><li>å•æºæœ€çŸ­è·¯ + æ‹“æ‰‘æ’åº</li><li>å…ˆè¾“å…¥æ‰€æœ‰åŒå‘é“è·¯ï¼Œç„¶å DFS å‡ºæ‰€æœ‰è¿é€šå—ï¼Œè®¡ç®—ä¸¤ä¸ªæ•°ç»„ï¼š<em>id</em> å­˜å‚¨æ¯ä¸ªç‚¹å±äºå“ªä¸ªè¿é€šå—ï¼Œ<em>block</em> å­˜å‚¨æ¯ä¸ªè¿é€šå—é‡Œæœ‰å“ªäº›ç‚¹</li><li>è¾“å…¥æ‰€æœ‰èˆªçº¿ï¼ŒåŒæ—¶ç»Ÿè®¡å‡ºæ¯ä¸ªè¿é€šå—çš„å…¥åº¦</li><li>æŒ‰ç…§æ‹“æ‰‘åºä¾æ¬¡å¤„ç†æ¯ä¸ªè¿é€šå—ï¼Œå…ˆå°†æ‰€æœ‰å…¥åº¦ä¸º $0$ çš„è¿é€šå—çš„ç¼–å·åŠ å…¥é˜Ÿåˆ—ä¸­ï¼Œæ¯æ¬¡ä»é˜Ÿå¤´å–å‡ºä¸€ä¸ªè¿é€šå—çš„ç¼–å· $bid$ï¼Œå°†è¯¥ $block[bid]$ ä¸­çš„æ‰€æœ‰ç‚¹åŠ å…¥å †ä¸­ï¼Œç„¶åå¯¹å †ä¸­æ‰€æœ‰è·‘ Dijkstraï¼Œæ¯æ¬¡å–å‡ºå †ä¸­è·ç¦»æœ€å°çš„ç‚¹ $ver$ï¼Œç„¶åéå† $ver$ çš„æ‰€æœ‰é‚»ç‚¹ $j$ï¼Œå¦‚æœ $id[ver] &#x3D; id[j]$ï¼Œé‚£ä¹ˆå¦‚æœ $j$ èƒ½è¢«æ›´æ–°ï¼Œåˆ™å°† $j$ æ’å…¥å †ä¸­ï¼›å¦‚æœ $id[ver] \ne id[j]$ï¼Œåˆ™å°† $id[j]$ è¿™ä¸ªè¿é€šå—çš„å…¥åº¦å‡å» $1$ ï¼Œå¦‚æœå‡æˆ $0$ äº†ï¼Œåˆ™å°†å…¶æ’å…¥æ‹“æ‰‘æ’åºçš„é˜Ÿåˆ—ä¸­</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef pair&lt;int, int&gt; PII;
const int N = 25010, M = 150010, INF = 0x3f3f3f3f;
int n, mr, mp, S;
int id[N];
int h[N], e[M], w[M], ne[M], idx;
int dist[N], din[N];
vector&lt;int&gt; block[N];
int bcnt;
bool st[N];
queue&lt;int&gt; q;
void add(int a, int b, int c)&#123;
    e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx++;
&#125;
void dfs(int u, int bid)&#123;
    id[u] = bid, block[bid].push_back(u);
    for(int i = h[u]; ~i; i = ne[i])&#123;
        int j = e[i];
        if(!id[j]) dfs(j, bid);
    &#125;
&#125;
void dijkstra(int bid)&#123;
    priority_queue&lt;PII, vector&lt;PII&gt;, greater&lt;PII&gt;&gt; pq;
    for(auto u : block[bid]) pq.push(&#123;dist[u], u&#125;);
    while(pq.size())&#123;
        auto t = pq.top(); pq.pop();
        int ver = t.second, distance = t.first;
        if(st[ver]) continue;
        st[ver] = 1;
        for(int i = h[ver]; ~i; i = ne[i])&#123;
            int j = e[i];
            if(id[j] != id[ver] &amp;&amp; --din[id[j]] == 0) q.push(id[j]);
            if(dist[j] &gt; dist[ver] + w[i])&#123;
                dist[j] = dist[ver] + w[i];
                if(id[j] == id[ver]) pq.push(&#123;dist[j], j&#125;);
            &#125;
        &#125;
    &#125;
&#125;
void topsort()&#123;
    memset(dist, 0x3f, sizeof(dist));
    dist[S] = 0;
    for(int i = 1; i &lt;= bcnt; i++)&#123;
        if(!din[i]) q.push(i);
    &#125;
    while(q.size())&#123;
        auto t = q.front(); q.pop();
        dijkstra(t);
    &#125;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    cin &gt;&gt; n &gt;&gt; mr &gt;&gt; mp &gt;&gt; S;
    memset(h, -1, sizeof(h));
    while(mr--)&#123;
        int a, b, c; cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        add(a, b, c), add(b, a, c);
    &#125;
    for(int i = 1; i &lt;= n; i++)&#123;
        if(!id[i]) dfs(i, ++bcnt);
    &#125;
    while(mp--)&#123;
        int a, b, c; cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        din[id[b]]++;
        add(a, b, c);
    &#125;
    topsort();
    for(int i = 1; i &lt;= n; i++)&#123;
        if(dist[i] &gt; INF / 2) cout &lt;&lt; &quot;NO PATH\n&quot;;
        else cout &lt;&lt; dist[i] &lt;&lt; &#39;\n&#39;;
    &#125;
&#125;
</code></pre><h3 id="AcWing-æœ€ä¼˜è´¸æ˜“"><a href="#AcWing-æœ€ä¼˜è´¸æ˜“" class="headerlink" title="AcWing|æœ€ä¼˜è´¸æ˜“"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMzQzLw==">AcWing|æœ€ä¼˜è´¸æ˜“</span></h3><ul><li>ç»“åˆ DP æ€æƒ³ï¼Œæšä¸¾åˆ†ç•Œç‚¹ $k$ åˆ†å¼€ä¹°å–åŒºåŸŸï¼Œåˆ†ç•Œç‚¹ä¹Ÿå¯ä¹°å–<ul><li>ç”±äºä¸æ˜¯æ‹“æ‰‘å›¾ï¼ŒçŠ¶æ€çš„æ›´æ–°å¯èƒ½å­˜åœ¨ç¯ï¼Œå› æ­¤ä¸èƒ½ä½¿ç”¨åŠ¨æ€è§„åˆ’ï¼Œåªèƒ½ä½¿ç”¨æœ€çŸ­è·¯çš„æ–¹æ³•</li><li>æ±‚ $1 \to k$ ä¹°å…¥çš„æœ€å°å€¼ï¼Œ$k \to n$ å–å‡ºçš„æœ€å¤§å€¼</li><li>é€šè¿‡å–èƒ½èµ°åˆ° $k$ çš„è·¯ä¸­ä¹°å…¥çš„æœ€å°å€¼ï¼Œæ±‚å‡ºåœ¨ $k$ åˆ†ç•Œç‚¹å‰ä¹°å…¥çš„æœ€å°å€¼</li><li>å»ºåå‘å›¾ï¼Œæ±‚ $n \to k$ çš„è·¯ä¸­å–å‡ºçš„æœ€å¤§å€¼</li></ul></li><li>èƒ½ç”¨ Dijkstra çš„æ ¸å¿ƒæ˜¯ä»å †ä¸­å–å‡ºçš„æœ€å°å€¼ä¸€å®šä¸ä¼šåœ¨ä¹‹åè¢«æ›´æ–°ï¼Œè€Œæ­¤é¢˜æ— æ³•ä¿è¯è¿™ä¸ªæ¡ä»¶ï¼Œå› æ­¤èƒ½ç”¨ Bellman-fordï¼Œè¿­ä»£ $k$ æ¬¡ï¼Œå¯ä»¥æ±‚å‡ºè¾¹æ•°ä¸è¶…è¿‡ $k - 1$ æ¡çš„æœ€çŸ­è·¯</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 1e5 + 10, M = 2e6 + 10;
int w[N];
int hs[N], he[N], e[M], ne[M], idx;
int n, m;
int dmin[N], dmax[N];
bool st[N];
void add(int h[], int a, int b)&#123;
    e[idx] = b, ne[idx] = h[a], h[a] = idx++;
&#125;
void spfa(int dist[], bool ok, int h[])&#123;
    queue&lt;int&gt; q;
    if(ok == 0)&#123;
        memset(dist, 0x3f, sizeof(dmin));   // æ³¨æ„åˆå§‹åŒ–çš„ sizeof
        dist[1] = w[1];
        q.push(1);
    &#125;else&#123;
        memset(dist, -0x3f, sizeof(dmax));
        dist[n] = w[n];
        q.push(n);
    &#125;
    while(q.size())&#123;
        int t = q.front(); q.pop();
        st[t] = 0;
        for(int i = h[t]; ~i; i = ne[i])&#123;
            int j = e[i];
            if(ok == 0 &amp;&amp; dist[j] &gt; min(dist[t], w[j]) || ok == 1 &amp;&amp; dist[j] &lt; max(dist[t], w[j]))&#123;
                dist[j] = (ok == 0 ? min(dist[t], w[j]) : max(dist[t], w[j]));
                if(!st[j])&#123;
                    st[j] = 1;
                    q.push(j);
                &#125;
            &#125;
        &#125;
    &#125;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    memset(hs, -1, sizeof(hs));
    memset(he, -1, sizeof(he));

    cin &gt;&gt; n &gt;&gt; m;
    for(int i = 1; i &lt;= n; i++) cin &gt;&gt; w[i];
    for(int i = 1; i &lt;= m; i++)&#123;
        int x, y, z; cin &gt;&gt; x &gt;&gt; y &gt;&gt; z;
        if(z == 1) add(hs, x, y), add(he, y, x);
        else add(hs, x, y), add(he, y, x), add(hs, y, x), add(he, x, y);
    &#125;
    spfa(dmin, 0, hs);
    spfa(dmax, 1, he);
    int ans = 0;
    for(int i = 1; i &lt;= n; i++) ans = max(ans, dmax[i] - dmin[i]);
    cout &lt;&lt; ans &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><hr><h2 id="å•æºæœ€çŸ­è·¯çš„æ‰©å±•åº”ç”¨"><a href="#å•æºæœ€çŸ­è·¯çš„æ‰©å±•åº”ç”¨" class="headerlink" title="å•æºæœ€çŸ­è·¯çš„æ‰©å±•åº”ç”¨"></a>å•æºæœ€çŸ­è·¯çš„æ‰©å±•åº”ç”¨</h2><ul><li>BFS æ¯ä¸ªç‚¹åªå…¥é˜Ÿä¸€æ¬¡ï¼Œåªå‡ºé˜Ÿä¸€æ¬¡ã€‚å¯ä»¥æŠ½è±¡æˆæ‹“æ‰‘å›¾ï¼Œå› ä¸ºå®ƒå¯ä»¥ä¿è¯è¢«æ›´æ–°çš„ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¸€å®šå·²ç»æ˜¯æœ€çŸ­è·ç¦»äº†ï¼Œå¹¶ä¸”è¿™ä¸ªç‚¹çš„æ¡æ•°å·²ç»è¢«å®Œå…¨æ›´æ–°è¿‡äº†</li><li>Dijkstra æ¯ä¸ªç‚¹åªå‡ºé˜Ÿä¸€æ¬¡ã€‚ä¹Ÿå¯ä»¥æŠ½è±¡æˆæ‹“æ‰‘å›¾ï¼ŒåŒç†ç”±äºæ¯ä¸€ä¸ªå‡ºé˜Ÿçš„ç‚¹ä¸€å®šå·²ç»æ˜¯æœ€çŸ­è·ç¦»ï¼Œå¹¶ä¸”å®ƒå‡ºé˜Ÿçš„æ—¶å€™æ˜¯é˜Ÿåˆ—ä¸­è·ç¦»æœ€å°çš„ç‚¹ï¼Œè¿™å°±ä»£è¡¨ä»–çš„æœ€çŸ­è·ç¦»æ¡æ•°å·²ç»è¢«å®Œå…¨æ›´æ–°äº†ï¼Œæ‰€ä»¥æ„æˆæ‹“æ‰‘æ€§è´¨</li><li>Bellman-ford æœ¬èº«ä¸å…·å¤‡æ‹“æ‰‘åºï¼Œå› ä¸ºæ›´æ–°å®ƒçš„ç‚¹ä¸ä¸€å®šæ˜¯æœ€çŸ­è·ç¦»ï¼Œæ‰€ä»¥ä¼šå‡ºé”™</li></ul><h3 id="AcWing-é€‰æ‹©æœ€ä½³è·¯çº¿"><a href="#AcWing-é€‰æ‹©æœ€ä½³è·¯çº¿" class="headerlink" title="AcWing|é€‰æ‹©æœ€ä½³è·¯çº¿"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTEzOS8=">AcWing|é€‰æ‹©æœ€ä½³è·¯çº¿</span></h3><ul><li>å¯ä»¥å»ºåå‘è¾¹ï¼ŒæŠŠç»ˆç‚¹å½“ä½œèµ·ç‚¹</li><li>æœ¬é¢˜é‡‡ç”¨ä¸€ç§é€‚ç”¨äºå¤šä¸ªèµ·ç‚¹å’Œå¤šä¸ªç»ˆç‚¹çš„åšæ³•<ul><li>å‡æƒ³ä¸€ä¸ªè™šæ‹Ÿæºç‚¹ï¼Œå‘æ¯ä¸ªèµ·ç‚¹è¿ä¸€ä¸ªè¾¹æƒä¸º $0$ çš„è¾¹</li><li>é—®é¢˜è½¬åŒ–ä¸ºï¼šä»è™šæ‹Ÿæºç‚¹å‡ºå‘åˆ°ç»ˆç‚¹çš„æœ€çŸ­è·¯å¾„</li></ul></li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef pair&lt;int, int&gt; PII;
const int N = 1010, M = 21010, INF = 0x3f3f3f3f;
int h[N], e[M], w[M], ne[M], idx;
int dist[N];
bool st[N];
int n, m, s;
void add(int a, int b, int c)&#123;
    e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx++;
&#125;
int dijkstra()&#123;
    memset(dist, 0x3f, sizeof(dist));
    memset(st, 0, sizeof(st));
    dist[0] = 0;
    priority_queue&lt;PII, vector&lt;PII&gt;, greater&lt;PII&gt;&gt; pq;
    pq.push(&#123;0, 0&#125;);
    while(pq.size())&#123;
        auto [dis, ver] = pq.top(); pq.pop();
        if(st[ver]) continue;
        st[ver] = 1;
        for(int i = h[ver]; ~i; i = ne[i])&#123;
            int j = e[i];
            if(dist[j] &gt; dis + w[i])&#123;
                dist[j] = dis + w[i];
                pq.push(&#123;dist[j], j&#125;);
            &#125;
        &#125;
    &#125;
    if(dist[s] == INF) return -1;
    return dist[s];
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    while(cin &gt;&gt; n &gt;&gt; m &gt;&gt; s)&#123;
        memset(h, -1, sizeof(h));
        idx = 0;    // åˆ«å¿˜äº†åˆå§‹åŒ– idx
        for(int i = 1; i &lt;= m; i++)&#123;
            int p, q, t;
            cin &gt;&gt; p &gt;&gt; q &gt;&gt; t;
            add(p, q, t);
        &#125;
        int cnt; cin &gt;&gt; cnt;
        while(cnt--)&#123;
            int x; cin &gt;&gt; x;
            add(0, x, 0);
        &#125;
        cout &lt;&lt; dijkstra() &lt;&lt; &#39;\n&#39;;
    &#125;
&#125;
</code></pre><h3 id="AcWing-æ‹¯æ•‘å¤§å…µç‘æ©ğŸŒ–ğŸŒ–"><a href="#AcWing-æ‹¯æ•‘å¤§å…µç‘æ©ğŸŒ–ğŸŒ–" class="headerlink" title="AcWing|æ‹¯æ•‘å¤§å…µç‘æ©ğŸŒ–ğŸŒ–"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTEzMy8=">AcWing|æ‹¯æ•‘å¤§å…µç‘æ©</span>ğŸŒ–ğŸŒ–</h3><ul><li><strong>æ‹†ç‚¹&#x2F;åˆ†å±‚å›¾</strong></li><li>ä»¿ç…§ DP æ¥è€ƒè™‘<ul><li>$d(x, y, state)$ æ‰€æœ‰ä»èµ·ç‚¹èµ°åˆ° $(x, y)$ è¿™ä¸ªæ ¼å­ï¼Œä¸”å½“å‰å·²ç»æ‹¥æœ‰çš„é’¥åŒ™æ˜¯ $state$ çš„æ‰€æœ‰è·¯çº¿çš„é›†åˆ</li><li>$(x, y)$ è¿™é‡Œæœ‰ä¸€äº›é’¥åŒ™ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥å°†æ‰€æœ‰é’¥åŒ™æ‹¿èµ·ï¼Œ<code>state | key</code>ï¼Œ<code>d[x, y, state | key] = min(d[x, y, state | key], d[x, y, state])</code></li><li>å‘ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘èµ°<ul><li>æ²¡æœ‰é—¨å’Œå¢™</li><li>æœ‰é—¨ï¼Œä¸”æœ‰åŒ¹é…çš„é’¥åŒ™ï¼Œåæ ‡æ˜¯ $(a, b)$ <code>d[a, b, state] = min(d[a b, state], d[x, y, state] + 1)</code></li></ul></li><li>ä½†æ˜¯ä¼šå‡ºç°ç¯å½¢ä¾èµ–ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨ DP æ±‚è§£</li></ul></li><li>è½¬åŒ–æˆæœ€çŸ­è·¯é—®é¢˜ï¼Œæ‹¿é’¥åŒ™çš„è·¯è¾¹æƒä¸º $0$ï¼Œå…¶ä»–çš„è·¯è¾¹æƒä¸º $1$ï¼Œæ±‚ $d[n, m, 0 \sim 2^{p - 1}]$ï¼Œæ•…å¯ä»¥ç”¨åŒç«¯é˜Ÿåˆ— BFS</li><li>ä¸ºäº†æ–¹ä¾¿ï¼Œå°†ä¸¤ç»´åæ ‡è½¬åŒ–æˆä¸€ç»´ï¼Œå¢™å’Œé—¨ç›´æ¥ç”¨ç»™çš„åæ ‡å»ºè¾¹ï¼Œç„¶åç”¨ $set$ å­˜å·²ç»å»ºçš„è¾¹</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef pair&lt;int, int&gt; PII;
const int N = 11, M = 360, P = 1 &lt;&lt; 10;
int n, m, k, p;
int h[N * N], e[M], w[M], ne[M], idx;
int g[N][N], key[N * N];
int dist[N * N][P];
bool st[N * N][P];
set&lt;PII&gt; edges;
void add(int a, int b, int c)&#123;
    e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx++;
&#125;
void build()&#123;
    int dx[4] = &#123;1, 0, -1, 0&#125;, dy[4] = &#123;0, 1, 0, -1&#125;;
    for(int i = 1; i &lt;= n; i++)&#123;
        for(int j = 1; j &lt;= m; j++)&#123;
            for(int u = 0; u &lt; 4; u++)&#123;
                int x = i + dx[u], y = j + dy[u];
                if(!x || x &gt; n || !y || y &gt; m) continue;
                int a = g[i][j], b = g[x][y];
                if(!edges.count(&#123;a, b&#125;)) add(a, b, 0);
            &#125;
        &#125;
    &#125;
&#125;
// åŒç«¯é˜Ÿåˆ— BFS å¤„ç†æœ€çŸ­è·¯
int bfs()&#123;
    memset(dist, 0x3f, sizeof(dist));
    dist[1][0] = 0;
    deque&lt;PII&gt; q;
    q.push_back(&#123;1, 0&#125;);
    while(q.size())&#123;
        auto [ver, now] = q.front(); q.pop_front();
        if(st[ver][now]) continue;
        st[ver][now] = 1;
        if(ver == n * m) return dist[ver][now];
        if(key[ver])&#123;
            int state = now | key[ver];
            if(dist[ver][state] &gt; dist[ver][now])&#123;
                dist[ver][state] = dist[ver][now];
                q.push_back(&#123;ver, state&#125;);
            &#125;
        &#125;
        for(int i = h[ver]; ~i; i = ne[i])&#123;
            int j = e[i];
            if(w[i] &amp;&amp; !(now &gt;&gt; w[i] - 1 &amp; 1)) continue;
            if(dist[j][now] &gt; dist[ver][now] + 1)&#123;
                dist[j][now] = dist[ver][now] + 1;
                q.push_back(&#123;j, now&#125;);
            &#125;
        &#125;
    &#125;
    return -1;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    cin &gt;&gt; n &gt;&gt; m &gt;&gt; p &gt;&gt; k;
    for(int i = 1, t = 1; i &lt;= n; i++)&#123;     // ä¸€ç»´åŒ–
        for(int j = 1; j &lt;= m; j++)&#123;
            g[i][j] = t++;
        &#125;
    &#125;
    memset(h, -1, sizeof(h));
    while(k--)&#123;     // å¤„ç†é—¨å’Œå¢™
        int x1, y1, x2, y2, c;
        cin &gt;&gt; x1 &gt;&gt; y1 &gt;&gt; x2 &gt;&gt; y2 &gt;&gt; c;
        int a = g[x1][y1], b = g[x2][y2];
        edges.insert(&#123;a, b&#125;), edges.insert(&#123;b, a&#125;);
        if(c) add(a, b, c), add(b, a, c);
    &#125;
    build();    // å»ºç«‹æ™®é€šé€šé“
    int s; cin &gt;&gt; s;
    while(s--)&#123;     // çŠ¶æ€å‹ç¼©è¡¨ç¤ºé’¥åŒ™çŠ¶æ€ï¼Œå‘å·¦åç§»1ï¼Œä»0å¼€å§‹
        int x, y, c;
        cin &gt;&gt; x &gt;&gt; y &gt;&gt; c;
        key[g[x][y]] |= 1 &lt;&lt; c - 1;
    &#125;
    cout &lt;&lt; bfs() &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><h3 id="AcWing-æœ€çŸ­è·¯è®¡æ•°ğŸŒ¸"><a href="#AcWing-æœ€çŸ­è·¯è®¡æ•°ğŸŒ¸" class="headerlink" title="AcWing|æœ€çŸ­è·¯è®¡æ•°ğŸŒ¸"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTEzNi8=">AcWing|æœ€çŸ­è·¯è®¡æ•°</span>ğŸŒ¸</h3><ul><li><strong>è¯æ˜å¾…çœ‹</strong></li><li>æ±‚æ–¹æ¡ˆæ•°<ul><li>å¯ä»¥ç±»æ¯” DP æ±‚æ–¹æ¡ˆæ•°</li><li>$dist[i]$ è¡¨ç¤ºåˆ° $i$ ç‚¹çš„æœ€çŸ­è·¯ï¼Œ$cnt[i]$ è¡¨ç¤ºåˆ° $i$ ç‚¹çš„æœ€çŸ­è·¯æ•°é‡</li></ul></li><li>å¦‚ä½•è®©æœ€çŸ­è·¯é—®é¢˜è½¬åŒ–æˆæ‹“æ‰‘åºâ€“æœ€çŸ­è·¯æ ‘ï¼ˆæ‹“æ‰‘å›¾ï¼‰<ul><li>å­˜ä¸‹å‰é©±ç‚¹</li><li>è§„å®šä¸€ä¸ªç‚¹åªèƒ½è¢«ä¸€ä¸ªå‰é©±æ›´æ–°</li><li>æ¯ä¸ªç‚¹åªå…¥é˜Ÿä¸€æ¬¡</li></ul></li><li>å‡å¦‚å›¾ä¸­å­˜åœ¨è´Ÿæƒè¾¹ï¼Œå¯ä»¥ä½¿ç”¨ spfa æ±‚å‡ºæœ€çŸ­è·¯å¾„ï¼Œç„¶åå†æŠŠæœ€çŸ­è·¯å¾„æ ‘å»ºå‡ºæ¥ï¼Œæœ€ååœ¨è¿™æ£µæ ‘ä¸Šç»Ÿè®¡æœ€çŸ­è·¯å¾„æ•°</li><li>æœ¬é¢˜è¾¹æƒå…¨ä¸º $1$ï¼Œä½¿ç”¨ BFS å³å¯ï¼Œå¯¹äºæŸä¸ªç‚¹ï¼Œå¦‚æœèƒ½æ›´æ–°å…¶è·ç¦»ï¼Œåˆ™æ›´æ–°ï¼Œå¹¶å°†è¿™ä¸ªç‚¹çš„æ¡æ•°å˜æˆä¸Šä¸€ç‚¹å¯¹åº”çš„æ¡æ•°ï¼›å¦‚æœè¯´è·ç¦»ç›¸ç­‰çš„è¯ï¼Œè·ç¦»ä¸ç”¨æ›´æ–°ï¼Œæ¡æ•°ç´¯åŠ èµ·æ¥</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 1e5 + 10, M = 4e5 + 10, MOD = 100003;
int h[N], e[M], ne[M], idx;
int dist[N], cnt[N];
void add(int a, int b)&#123;
    e[idx] = b, ne[idx] = h[a], h[a] = idx++;
&#125;
void bfs()&#123;
    memset(dist, 0x3f, sizeof(dist));
    queue&lt;int&gt; q;
    dist[1] = 0;
    cnt[1] = 1;
    q.push(1);
    while(q.size())&#123;
        int u = q.front(); q.pop();
        for(int i = h[u]; ~i; i = ne[i])&#123;
            int j = e[i];
            if(dist[j] &gt; dist[u] + 1)&#123;
                dist[j] = dist[u] + 1;
                cnt[j] = cnt[u];
                q.push(j);
            &#125;else if(dist[j] == dist[u] + 1)&#123;
                cnt[j] = (cnt[j] + cnt[u]) % MOD;
            &#125;
        &#125;
    &#125;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    memset(h, -1, sizeof(h));
    int n, m; cin &gt;&gt; n &gt;&gt; m;
    while(m--)&#123;
        int a, b;
        cin &gt;&gt; a &gt;&gt; b;
        add(a, b); add(b, a);
    &#125;
    bfs();
    for(int i = 1; i &lt;= n; i++) cout &lt;&lt; cnt[i] &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><h3 id="AcWing-è§‚å…‰ğŸŒ¸"><a href="#AcWing-è§‚å…‰ğŸŒ¸" class="headerlink" title="AcWing|è§‚å…‰ğŸŒ¸"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMzg1Lw==">AcWing|è§‚å…‰</span>ğŸŒ¸</h3><ul><li><strong>è¯æ˜å¾…çœ‹</strong></li><li>æ±‚æœ€çŸ­è·¯å¾„çš„æ¡æ•°ï¼Œå’Œæ¬¡çŸ­è·¯å¾„çš„æ¡æ•°ï¼Œå¦‚æœæ¬¡çŸ­è·¯å¾„é•¿åº¦æ°å¥½æ¯”æœ€çŸ­è·¯å¾„å¤šä¸€ï¼Œåˆ™åŠ ä¸Šæ¬¡çŸ­è·¯å¾„çš„æ¡æ•°</li><li>$dist[i, 0&#x2F;1]$ è¡¨ç¤ºä» $1$ åˆ° $i$ çš„æœ€çŸ­è·¯å¾„&#x2F;æ¬¡çŸ­è·¯å¾„ï¼Œå…¨éƒ¨åˆå§‹åŒ–ä¸ºæ­£æ— ç©·ï¼Œåˆå§‹æ—¶èµ·ç‚¹ä¸å­˜åœ¨æ¬¡çŸ­è·¯</li><li>Dijkstra æšä¸¾åŸå¸‚ $t$ å¯é€šå¾€çš„åŸå¸‚ $j$ æ—¶ï¼Œæœ‰å››ç§æƒ…å†µ<ul><li>$dist[j][0] &gt; dist[t][type] + w[i]$ ï¼šå½“å‰æœ€çŸ­è·¯å˜æˆæ¬¡çŸ­è·¯ï¼Œæ›´æ–°æœ€çŸ­è·¯ï¼Œå°†æœ€çŸ­è·¯å’Œæ¬¡çŸ­è·¯åŠ å…¥ä¼˜å…ˆé˜Ÿåˆ—</li><li>$dist[j][0] &#x3D; dist[t][type] + w[i]$ ï¼šæ‰¾åˆ°ä¸€æ¡æ–°çš„æœ€çŸ­è·¯ï¼Œæ›´æ–°æœ€çŸ­è·¯æ¡æ•°</li><li>$dist[j][1] &gt; dist[t][type] + w[i]$ ï¼šæ‰¾åˆ°ä¸€æ¡æ›´çŸ­çš„æ¬¡çŸ­è·¯ï¼Œè¦†ç›–æ‰å½“å‰æ¬¡çŸ­è·¯ï¼ŒåŠ å…¥ä¼˜å…ˆé˜Ÿåˆ—</li><li>$dist[j][1] &#x3D; dist[t][type] + w[i]$ ï¼šæ‰¾åˆ°ä¸€æ¡æ–°çš„æ¬¡çŸ­è·¯ï¼Œæ›´æ–°æ¬¡çŸ­è·¯æ¡æ•°</li></ul></li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 1010, M = 10010;
typedef tuple&lt;int, int, int&gt; TIII;
int h[N], e[M], ne[M], w[M], idx;
int dist[N][2], cnt[N][2];
bool st[N][2];
int n, m, S, F;
void add(int a, int b, int c)&#123;
    e[idx] = b, ne[idx] = h[a], w[idx] = c, h[a] = idx++;
&#125;
int dijkstra()&#123;
    memset(dist, 0x3f, sizeof(dist));
    memset(cnt, 0, sizeof(cnt));
    memset(st, 0, sizeof(st));
    priority_queue&lt;TIII, vector&lt;TIII&gt;, greater&lt;TIII&gt;&gt; pq;
    dist[S][0] = 0;
    cnt[S][0] = 1;
    pq.push(&#123;0, 0, S&#125;);
    while(pq.size())&#123;
        auto [dis1, type, ver] = pq.top(); pq.pop();
        if(st[ver][type]) continue;
        st[ver][type] = true;
        for(int i = h[ver]; ~i; i = ne[i])&#123;
            int j = e[i];
            if(dist[j][0] &gt; dis1 + w[i])&#123;
                dist[j][1] = dist[j][0], cnt[j][1] = cnt[j][0];
                pq.push(&#123;dist[j][1], 1, j&#125;);
                dist[j][0] = dis1 + w[i], cnt[j][0] = cnt[ver][type];
                pq.push(&#123;dist[j][0], 0, j&#125;);
            &#125;else if(dist[j][0] == dis1 + w[i])&#123;
                cnt[j][0] = (cnt[j][0] + cnt[ver][type]);
                pq.push(&#123;dist[j][0], 0, j&#125;);
            &#125;else if(dist[j][1] &gt; dis1 + w[i])&#123;
                dist[j][1] = dis1 + w[i], cnt[j][1] = cnt[ver][type];
                pq.push(&#123;dist[j][1], 1, j&#125;);
            &#125;else if(dist[j][1] == dis1 + w[i])&#123;
                cnt[j][1] = (cnt[j][1] + cnt[ver][type]);
                pq.push(&#123;dist[j][1], 1, j&#125;);
            &#125;
        &#125;
    &#125;
    int ans = cnt[F][0];
    if(dist[F][1] == dist[F][0] + 1) ans += cnt[F][1];
    return ans;
&#125;
void solve()&#123;
    memset(h, -1, sizeof(h));
    cin &gt;&gt; n &gt;&gt; m;
    for(int i = 1; i &lt;= m; i++)&#123;
        int a, b, c; 
        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        add(a, b, c);
    &#125;
    cin &gt;&gt; S &gt;&gt; F;
    cout &lt;&lt; dijkstra() &lt;&lt; &#39;\n&#39;;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    int t; cin &gt;&gt; t;
    while(t--) solve();
&#125;
</code></pre><hr><h2 id="Floyd-ç®—æ³•"><a href="#Floyd-ç®—æ³•" class="headerlink" title="Floyd ç®—æ³•"></a>Floyd ç®—æ³•</h2><ul><li>åº”ç”¨<ul><li>æœ€çŸ­è·¯</li><li>ä¼ é€’é—­åŒ…</li><li>æ‰¾æœ€å°ç¯ï¼ˆä¸€èˆ¬æ˜¯æ­£æƒï¼‰</li><li>æ°å¥½ç»è¿‡ $k$ æ¡è¾¹çš„æœ€çŸ­è·¯ï¼ˆå€å¢ï¼‰</li></ul></li><li>åŸç†<ul><li>åŸºäº DP</li><li>çŠ¶æ€è¡¨ç¤º $d[k, i, j]$<ul><li>é›†åˆï¼šæ‰€æœ‰ä» $i$ å‡ºå‘ï¼Œæœ€ç»ˆèµ°åˆ° $j$ï¼Œä¸”ä¸­é—´åªç»è¿‡èŠ‚ç‚¹ç¼–å·ä¸è¶…è¿‡ $k$ çš„æ‰€æœ‰è·¯å¾„</li><li>å±æ€§ï¼šè·¯å¾„é•¿åº¦çš„æœ€å°å€¼</li></ul></li><li>çŠ¶æ€è®¡ç®—<ul><li>åˆ†ä¸ºä¸¤ç±»ï¼Œæ‰€æœ‰ä¸åŒ…å«èŠ‚ç‚¹ $k$ çš„è·¯å¾„å’Œæ‰€æœ‰åŒ…å«èŠ‚ç‚¹ $k$ çš„è·¯å¾„</li><li>å› ä¸º $i \to k$ ä¸ $k \to j$ æ— å…³ï¼Œæ‰€ä»¥åªéœ€è¦å‰ä¸¤è€…éƒ½ä¸ºæœ€å°å€¼ï¼Œå³ä¸ºæœ€çŸ­è·¯</li><li><code>d[k][i][j] = min (d[k][i][j], d[k - 1][i][k] + d[k - 1][k][j])</code></li><li>æ‰€æœ‰çš„ $d[i, k], d[k][i][k] &#x3D; d[k - 1][i][k]$ï¼Œæ‰€ä»¥å¯ä»¥å°‘ä¸€ç»´</li></ul></li></ul></li></ul><h3 id="AcWing-ç‰›çš„æ—…è¡Œ"><a href="#AcWing-ç‰›çš„æ—…è¡Œ" class="headerlink" title="AcWing|ç‰›çš„æ—…è¡Œ"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTEyNy8=">AcWing|ç‰›çš„æ—…è¡Œ</span></h3><ul><li>åˆ†æ<ul><li>æ–°çš„è¿é€šå—çš„ç›´å¾„ä¸€å®š $\ge$ æ‰€æœ‰è¿é€šå—ç›´å¾„çš„æœ€å¤§å€¼</li><li>ç»è¿‡æ–°è¾¹çš„æœ€é•¿è·¯å¾„</li></ul></li><li>é¢˜è§£<ul><li>ç”¨ $Floyd$ æ±‚å‡ºä»»æ„ä¸¤ç‚¹ä¹‹é—´çš„æœ€çŸ­è·ç¦»</li><li>æ±‚ $maxd[i]$ï¼Œè¡¨ç¤ºå’Œ $i$ è¿é€šçš„ä¸”è·ç¦» $i$ æœ€è¿œçš„ç‚¹çš„è·ç¦»</li><li>æƒ…å†µ 1ï¼šæ‰€æœ‰ $maxd[i]$ çš„æœ€å¤§å€¼</li><li>æƒ…å†µ 2ï¼šæšä¸¾åœ¨å“ªä¸¤ä¸ªç‚¹ä¹‹é—´è¿è¾¹ï¼Œ$(i, j)$ï¼Œæ»¡è¶³ $d[i, j] &#x3D; INF$ï¼Œ$maxd[i] + dist[i, j] + maxd[j]$</li></ul></li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef pair&lt;int, int&gt; PII;
const int N = 160;
const double INF = 1e20;
PII p[N];
double dist[N][N], maxd[N];
string g[N];
double get_dist(PII a, PII b)&#123;
    double dx = a.first - b.first, dy = a.second - b.second;
    return sqrt(dx * dx + dy * dy);
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    int n; cin &gt;&gt; n;
    for(int i = 0; i &lt; n; i++) cin &gt;&gt; p[i].first &gt;&gt; p[i].second;
    for(int i = 0; i &lt; n; i++) cin &gt;&gt; g[i];
    
    for(int i = 0; i &lt; n; i++)&#123;
        for(int j = 0; j &lt; n; j++)&#123;
            if(i != j)&#123;
                if(g[i][j] == &#39;1&#39;) dist[i][j] = get_dist(p[i], p[j]);
                else dist[i][j] = INF;
            &#125;
        &#125;
    &#125;
    for(int k = 0; k &lt; n; k++)&#123;
        for(int i = 0; i &lt; n; i++)&#123;
            for(int j = 0; j &lt; n; j++)&#123;
                dist[i][j] = min(dist[i][j], dist[i][k] + dist[k][j]);
            &#125;
        &#125;
    &#125;
    for(int i = 0; i &lt; n; i++)&#123;
        for(int j = 0; j &lt; n; j++)&#123;
            if(dist[i][j] &lt; INF) maxd[i] = max(maxd[i], dist[i][j]);
        &#125;
    &#125;
    double res = 0;
    for(int i = 0; i &lt; n; i++) res = max(res, maxd[i]);
    double ans = INF;
    for(int i = 0; i &lt; n; i++)&#123;
        for(int j = 0; j &lt; n; j++)&#123;
            if(dist[i][j] &gt;= INF) ans = min(ans, get_dist(p[i], p[j]) + maxd[i] + maxd[j]);
        &#125;
    &#125;
    cout &lt;&lt; fixed &lt;&lt; setprecision(6) &lt;&lt; max(res, ans) &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><h3 id="AcWing-æ’åºğŸŒ¸"><a href="#AcWing-æ’åºğŸŒ¸" class="headerlink" title="AcWing|æ’åºğŸŒ¸"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMzQ1Lw==">AcWing|æ’åº</span>ğŸŒ¸</h3><ul><li>ä¼ é€’é—­åŒ…<ul><li>é—´æ¥èƒ½åˆ°è¾¾çš„ç‚¹éƒ½è¿ä¸€æ¡ç›´æ¥çš„è¾¹</li></ul></li><li>åˆå§‹åŒ– $d[i, j] &#x3D; g[i, j]$, $1$ è¡¨ç¤ºæœ‰è¾¹ï¼Œ$0$ è¡¨ç¤ºæ²¡æœ‰è¾¹</li><li>Floyd æ±‚ä¼ é€’é—­åŒ…<ul><li>$A &lt; B$ å³ $d[A, B] &#x3D; 1$</li><li>çŸ›ç›¾ï¼Œå³ $d (i, i) &#x3D; 1$</li><li>å”¯ä¸€ç¡®å®šï¼Œå³ $i \ne j, d (i, j), d (j, i)$ å¿…æœ‰ä¸€ä¸ªæ˜¯ $1$<ul><li>æ’åºï¼Œå°†æ‰€æœ‰ç‚¹æŒ‰ç…§èƒ½åˆ°è¾¾çš„ç‚¹æ•°ä»å°åˆ°å¤§æ’åºï¼Œç„¶åä¾æ¬¡è¾“å‡ºç¼–å·</li></ul></li><li>é¡ºåºä¸å”¯ä¸€</li></ul></li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 30;
bool g[N][N], d[N][N];
bool st[N];
int n, m;
void floyd()&#123;
    memcpy(d, g, sizeof(g));
    for(int k = 0; k &lt; n; k++)&#123;
        for(int i = 0; i &lt; n; i++)&#123;
            for(int j = 0; j &lt; n; j++)&#123;
                d[i][j] |= d[i][k] &amp;&amp; d[k][j];
            &#125;
        &#125;
    &#125;
&#125;
int check()&#123;
    for(int i = 0; i &lt; n; i++)&#123;
        if(d[i][i]) return 2;
    &#125;
    for(int i = 0; i &lt; n; i++)&#123;
        for(int j = 0; j &lt; i; j++)&#123;
            if(!d[i][j] &amp;&amp; !d[j][i]) return 0;
        &#125;
    &#125;
    return 1;
&#125;
char get_min()&#123;
    for(int i = 0; i &lt; n; i++)&#123;
        if(!st[i])&#123;
            bool flag = 1;
            for(int j = 0; j &lt; n; j++)&#123;
                if(d[j][i] &amp;&amp; !st[j])&#123;
                    flag = 0;
                    break;
                &#125;
            &#125;
            if(flag)&#123;
                st[i] = 1;
                return &#39;A&#39; + i;
            &#125;
        &#125;
    &#125;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    while(cin &gt;&gt; n &gt;&gt; m, n || m)&#123;
        memset(g, 0, sizeof(g));
        int type = 0, t;
        for(int i = 1; i &lt;= m; i++)&#123;
            string s; cin &gt;&gt; s;
            int a = s[0] - &#39;A&#39;, b = s[2] - &#39;A&#39;;
            if(!type)&#123;
                g[a][b] = 1;
                floyd();
                type = check();
                if(type) t = i;
            &#125;
        &#125;
        if(!type) cout &lt;&lt; &quot;Sorted sequence cannot be determined.\n&quot;;
        else if(type == 2) cout &lt;&lt; &quot;Inconsistency found after &quot; &lt;&lt; t &lt;&lt; &quot; relations.\n&quot;;
        else &#123;
            memset(st, 0, sizeof(st));
            cout &lt;&lt; &quot;Sorted sequence determined after &quot; &lt;&lt; t &lt;&lt; &quot; relations: &quot;;
            for(int i = 0; i &lt; n; i++)&#123;
                cout &lt;&lt; get_min();
            &#125;
            cout &lt;&lt; &quot;.\n&quot;;
        &#125;
    &#125;
&#125;
</code></pre><ul><li>æœ¬é¢˜å¯ä»¥ä¼˜åŒ–æ¯æ¬¡åŠ å…¥çš„æ–°è¾¹ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„<strong>ä¼ é€’</strong></li></ul><pre><code class="cpp">memset(d, 0, sizeof(d));
int type = 0, t;
for(int i = 1; i &lt;= m; i++)&#123;
    string s; cin &gt;&gt; s;
    int a = s[0] - &#39;A&#39;, b = s[2] - &#39;A&#39;;
    if(!type)&#123;
        d[a][b] = 1;
        //floyd();
        for(int x = 0; x &lt; n; x++)&#123;
            if(d[b][x]) d[a][x] = 1;
            if(d[x][a]) d[x][b] = 1;
            for(int y = 0; y &lt; n; y++)&#123;
                if(d[x][a] &amp;&amp; d[b][y])&#123;
                    d[x][y] = 1;
                &#125;
            &#125;
        &#125;
        type = check();
        if(type) t = i;
    &#125;
&#125;
</code></pre><h3 id="AcWing-è§‚å…‰ä¹‹æ—…ğŸŒ¸"><a href="#AcWing-è§‚å…‰ä¹‹æ—…ğŸŒ¸" class="headerlink" title="AcWing|è§‚å…‰ä¹‹æ—…ğŸŒ¸"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMzQ2Lw==">AcWing|è§‚å…‰ä¹‹æ—…</span>ğŸŒ¸</h3><ul><li>Floyd æ±‚æœ€å°ç¯ï¼Œè®¾ç¯çš„å½¢å¼æ˜¯ $i \longleftrightarrow k \longleftrightarrow j$ï¼ŒFloyd æ˜¯å…¸å‹çš„æ’ç‚¹ç®—æ³•ï¼Œæ¯æ¬¡æ’å…¥ç‚¹ $k$ï¼Œå› æ­¤ï¼Œåœ¨ç‚¹ $k$ æ’å…¥å‰å¯ä»¥è®¡ç®—è¿™ä¸ªç¯ï¼Œæˆ‘ä»¬åªéœ€è¦æšä¸¾æ‰€æœ‰ä»¥ $k$ ä¸ºç¯ä¸­çš„æœ€å¤§èŠ‚ç‚¹çš„ç¯å³å¯</li><li>ç”¨é›†åˆæ€è€ƒï¼ŒæŒ‰ç¯ä¸Šçš„æœ€å¤§ç¼–å·æ¥åˆ†ç±»</li><li>$pos[i, j]$ å³ $i \longleftrightarrow j$ çš„æœ€çŸ­è·¯ä¸­ç»è¿‡çš„ç‚¹æ˜¯ $k$ ï¼ˆå³ç”±è¿™ä¸ªçŠ¶æ€è½¬ç§»è¿‡æ¥ï¼‰ï¼Œä¸”è¿™ä¸ª $k$ æ˜¯æ­¤è·¯å¾„ä¸­ç¼–å·æœ€å¤§çš„ç‚¹</li><li>æ€§è´¨<ul><li>åœ¨ $i \longleftrightarrow j$ çš„æœ€çŸ­è·¯ä¸­ï¼Œä¸€å®šæ²¡æœ‰ç¯</li><li>è¿™ä¸‰ä¸ªç‚¹ä¹‹é—´çš„ä¸¤æ¡æœ€çŸ­è·¯å¿…ç„¶æ²¡æœ‰äº¤é›†</li></ul></li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef long long LL;
const int N = 110;
int d[N][N], g[N][N];
int path[N], pos[N][N], cnt;
void get_path(int i, int j)&#123;
    if(pos[i][j] == 0) return ;
    int k = pos[i][j];
    get_path(i, k);
    path[cnt++] = k;
    get_path(k, j);
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    memset(g, 0x3f, sizeof(g));
    int n, m; cin &gt;&gt; n &gt;&gt; m;
    for(int i = 1; i &lt;= m; i++)&#123;
        int u, v, l;
        cin &gt;&gt; u &gt;&gt; v &gt;&gt; l;
        g[u][v] = g[v][u] = min(g[u][v], l);
    &#125;
    memcpy(d, g, sizeof(d));
    int ans = 0x3f3f3f3f;
    for(int k = 1; k &lt;= n; k++)&#123;
        for(int i = 1; i &lt; k; i++)&#123;
            for(int j = i + 1; j &lt; k; j++)&#123;
                if((LL)d[i][j] + g[i][k] + g[k][j] &lt; ans)&#123;
                    ans = d[i][j] + g[i][k] + g[k][j];
                    cnt = 0;
                    path[cnt++] = k;
                    path[cnt++] = i;
                    get_path(i, j);
                    path[cnt++] = j;
                &#125;
            &#125;
        &#125;
        for(int i = 1; i &lt;= n; i++)&#123;
            for(int j = 1; j &lt;= n; j++)&#123;
                if(d[i][j] &gt; d[i][k] + d[k][j])&#123;
                    d[i][j] = d[i][k] + d[k][j];
                    pos[i][j] = k;
                &#125;
            &#125;
        &#125;
    &#125;
    if(ans == 0x3f3f3f3f) cout &lt;&lt; &quot;No solution.\n&quot;;
    else&#123;
        for(int i = 0; i &lt; cnt; i++) cout &lt;&lt; path[i] &lt;&lt; &#39; &#39;;
        cout &lt;&lt; &#39;\n&#39;;
    &#125;
&#125;
</code></pre><h3 id="AcWing-ç‰›ç«™ğŸŒ–"><a href="#AcWing-ç‰›ç«™ğŸŒ–" class="headerlink" title="AcWing|ç‰›ç«™ğŸŒ–"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMzQ3Lw==">AcWing|ç‰›ç«™</span>ğŸŒ–</h3><ul><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9zb2x1dGlvbi9jb250ZW50LzM2NjAzLw==">AcWing 345. ç‰›ç«™(é€šä¿—å›¾è§£ç‰ˆ) - AcWing</span></li><li>Floyd çš„å€å¢åº”ç”¨<ul><li>åŸæœ¬çš„çŠ¶æ€è¡¨ç¤º $d[k, i, j]$ è¡¨ç¤ºä» $i$ åˆ° $j$ åªç»è¿‡ $1 \sim k$ çš„è¯ï¼Œæœ€çŸ­è·¯å¾„æ˜¯å¤šå°‘</li><li>æœ¬é¢˜çš„çŠ¶æ€è¡¨ç¤º $d[k, i, j]$ è¡¨ç¤ºä» $i$ åˆ° $j$ï¼Œæ°å¥½ç»è¿‡ $k$ æ¡è¾¹çš„æœ€çŸ­è·¯å¾„</li><li>$d[a + b, i, j] &#x3D; min(d[a, i, k] + d[b, k, j])$ å…¶ä¸­ $k &#x3D; 1 \sim n$ï¼Œå‰åä¸¤æ®µæœ€çŸ­è·¯æ— å…³</li><li>ä¹‹åå‘ç°æ¯ä¸€æ®µçš„é¡ºåºéƒ½ä¸å½±å“æœ€ç»ˆç­”æ¡ˆï¼Œå…·æœ‰ç»“åˆå¾‹ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨å¿«é€Ÿå¹‚&#x2F;å€å¢çš„æ€æƒ³</li></ul></li><li>æœ¬é¢˜éœ€è¦ç¦»æ•£åŒ–</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
int N, T, S, E, n;
map&lt;int, int&gt; ids;
int g[1010][1010], ans[1010][1010];
void floyd(int a[][1010], int b[][1010], int c[][1010])&#123;
    static int tmp[1010][1010]; // b å’Œ c ç›¸ä¹˜çš„ç»“æœ
    memset(tmp, 0x3f, sizeof(tmp));
    for(int k = 1; k &lt;= n; k++)&#123;
        for(int i = 1; i &lt;= n; i++)&#123;
            for(int j = 1; j &lt;= n; j++)&#123;
                tmp[i][j] = min(tmp[i][j], b[i][k] + c[k][j]);
            &#125;
        &#125;
    &#125;
    memcpy(a, tmp, sizeof(tmp));
&#125;
void qmi()&#123;
    memset(ans, 0x3f, sizeof(ans));
    for(int i = 1; i &lt;= n; i++) ans[i][i] = 0;
    while(N)&#123;
        if(N &amp; 1) floyd(ans, ans, g);
        floyd(g, g, g);
        N &gt;&gt;= 1;
    &#125;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    cin &gt;&gt; N &gt;&gt; T &gt;&gt; S &gt;&gt; E;
    memset(g, 0x3f, sizeof(g));

    ids[S] = ++n, ids[E] = ++n;
    S = ids[S], E = ids[E];
    
    for(int i = 1; i &lt;= T; i++)&#123;
        int c, a, b;
        cin &gt;&gt; c &gt;&gt; a &gt;&gt; b;
        if(!ids.count(a)) ids[a] = ++n;
        if(!ids.count(b)) ids[b] = ++n;
        a = ids[a], b = ids[b];
        g[a][b] = g[b][a] = min(g[a][b], c);
    &#125;
    qmi();
    cout &lt;&lt; ans[S][E] &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><hr><h2 id="æœ€å°ç”Ÿæˆæ ‘"><a href="#æœ€å°ç”Ÿæˆæ ‘" class="headerlink" title="æœ€å°ç”Ÿæˆæ ‘"></a>æœ€å°ç”Ÿæˆæ ‘</h2><ul><li>Prim<ul><li>æœ´ç´ ç‰ˆ $O(n^2)$	â€“é‚»æ¥çŸ©é˜µ</li><li>å †ä¼˜åŒ– <del>è¢« Kruskal å®Œçˆ†</del></li><li>è¯æ˜ï¼šå½“å‰ä¸å¤–ç•Œç›´æ¥ç›¸è¿çš„æƒå€¼æœ€å°çš„ä¸€æ¡è¾¹ï¼Œè¿™æ¡è¾¹ä¸€å®šå¯ä»¥å‡ºç°åœ¨æœ€ä¼˜è§£ä¸­<ul><li><span class="exturl" data-url="aHR0cHM6Ly9vaXdpa2kub3JnL2dyYXBoL21zdC8jXzY=">OI Wiki|æ•°å­¦å½’çº³æ³•</span></li></ul></li></ul></li><li>Kruskal<ul><li>$O(mlogn)$ï¼Œç›´æ¥å­˜è¾¹ï¼Œä¸‰å…ƒç»„</li><li>å¹¶æŸ¥é›†ç»´æŠ¤</li><li>è¯æ˜<ul><li><span class="exturl" data-url="aHR0cHM6Ly9vaXdpa2kub3JnL2dyYXBoL21zdC8jXzQ=">OI Wiki|æ•°å­¦å½’çº³æ³•</span></li></ul></li></ul></li><li>åè¯æ³•<ul><li>å‡è®¾ä¸é€‰å½“å‰è¾¹ï¼Œæœ€ç»ˆå¾—åˆ°äº†ä¸€æ£µæ ‘ã€‚ç„¶åå°†è¿™æ¡è¾¹åŠ ä¸Šï¼Œé‚£ä¹ˆå¿…ç„¶ä¼šå‡ºç°ä¸€ä¸ªç¯ï¼Œåœ¨è¿™ä¸ªç¯ä¸Šï¼Œä¸€å®šå¯ä»¥æ‰¾å‡ºä¸€æ¡é•¿åº¦ä¸å°äºå½“å‰è¾¹çš„è¾¹ï¼Œé‚£ä¹ˆæŠŠå½“å‰è¾¹æ›¿æ¢ä¸Šå»ï¼Œç»“æœä¸€å®šä¸ä¼šå˜å·®</li></ul></li></ul><h3 id="AcWing-æœ€çŸ­ç½‘ç»œ"><a href="#AcWing-æœ€çŸ­ç½‘ç»œ" class="headerlink" title="AcWing|æœ€çŸ­ç½‘ç»œ"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTE0Mi8=">AcWing|æœ€çŸ­ç½‘ç»œ</span></h3><ul><li>æ¨¡æ¿é¢˜</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 110;
int w[N][N], dist[N];
bool st[N];
int n;
int prim()&#123;
    int ans = 0;
    memset(dist, 0x3f, sizeof(dist));
    dist[1] = 0;
    for(int i = 0; i &lt; n; i++)&#123;
        int t = -1;
        for(int j = 1; j &lt;= n; j++)&#123;
            if(!st[j] &amp;&amp; (t == -1 || dist[j] &lt; dist[t])) t = j;
        &#125;
        st[t] = 1;
        ans += dist[t];
        for(int j = 1; j &lt;= n; j++) dist[j] = min(dist[j], w[t][j]);
    &#125;
    return ans;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    cin &gt;&gt; n;
    for(int i = 1; i &lt;= n; i++)&#123;
        for(int j = 1; j &lt;= n; j++)&#123;
            cin &gt;&gt; w[i][j];
        &#125;
    &#125;
    cout &lt;&lt; prim() &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><h3 id="AcWing-å±€åŸŸç½‘"><a href="#AcWing-å±€åŸŸç½‘" class="headerlink" title="AcWing|å±€åŸŸç½‘"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTE0My8=">AcWing|å±€åŸŸç½‘</span></h3><ul><li>ç›¸å½“äºåœ¨è¿™ä¸ªå›¾çš„æ¯ä¸ªè¿é€šå—å†…ï¼Œæ±‚ä¸€æ£µæœ€å°ç”Ÿæˆæ ‘</li><li>Prim ä¸€æ¬¡åªèƒ½å¤„ç†ä¸€ä¸ªè¿é€šå—ï¼Œæ‰€ä»¥ä½¿ç”¨ Kruskal</li><li>å°†æ‰€æœ‰è¾¹æƒä»å°åˆ°å¤§æ’åº</li><li>ä¾æ¬¡æšä¸¾æ¯æ¡è¾¹ $a, b, w$ï¼Œå¦‚æœ $a, b$ ä¸è¿é€šï¼Œé‚£ä¹ˆå°±å°†å½“å‰è¾¹åŠ åˆ°æœ€å°ç”Ÿæˆæ ‘ä¸­</li><li>å°±ç®—æ²¡æœ‰å®Œæˆå…¨éƒ¨çš„ç”Ÿæˆæ ‘ï¼Œä¸­é—´è¿‡ç¨‹å·²å®Œæˆçš„éƒ¨åˆ†ä¹Ÿæ˜¯æ­£ç¡®çš„ï¼›ä»æŸä¸€æ®µå¼€å§‹åš Kruskal ï¼Œä¹Ÿæ˜¯æ­£ç¡®çš„</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef tuple&lt;int, int, int&gt; TIII;
const int N = 110, M = 210;
TIII e[M];
int p[N];
int find(int x)&#123;
    if(p[x] != x) p[x] = find(p[x]);
    return p[x];
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    int n, k; cin &gt;&gt; n &gt;&gt; k;
    for(int i = 1; i &lt;= n; i++) p[i] = i;
    for(int i = 1; i &lt;= k; i++)&#123;
        int a, b, c;
        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        e[i] = &#123;c, a, b&#125;;
    &#125;
    sort(e + 1, e + 1 + k);
    int ans = 0;
    for(int i = 1; i &lt;= k; i++)&#123;
        auto [c, a, b] = e[i];
        int x = find(a), y = find(b);
        if(x != y) p[x] = y;
        else ans += c;
    &#125;
    cout &lt;&lt; ans &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><h3 id="AcWing-ç¹å¿™çš„éƒ½å¸‚"><a href="#AcWing-ç¹å¿™çš„éƒ½å¸‚" class="headerlink" title="AcWing|ç¹å¿™çš„éƒ½å¸‚"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTE0NC8=">AcWing|ç¹å¿™çš„éƒ½å¸‚</span></h3><ul><li>Prim å’Œ Kruskal éƒ½éœ€è¦æ˜¯æ— å‘è¾¹</li><li>æœ¬é¢˜ä¸­çš„æœ€å°ç”Ÿæˆæ ‘æ±‚çš„æ˜¯è¾¹æƒæœ€å¤§å€¼æœ€å°ï¼Œå³ <strong>ç“¶é¢ˆç”Ÿæˆæ ‘</strong></li><li>é¢˜è§£<ul><li>å°†æ‰€æœ‰è¾¹ä»å°åˆ°å¤§æ’åº</li><li>ä»å°åˆ°å¤§ä¾æ¬¡æšä¸¾æ¯æ¡è¾¹ï¼Œ$a, b, w$<ul><li>å¦‚æœ $a$ å’Œ $b$ å·²ç»è¿é€šï¼Œç›´æ¥è·³è¿‡</li><li>å¦‚æœ $a$ å’Œ $b$ ä¸è¿é€šï¼Œå°±å°†å½“å‰è¾¹é€‰å‡ºæ¥</li></ul></li></ul></li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef tuple&lt;int, int, int&gt; TIII;
const int N = 310, M = 10010;
TIII g[M];
int p[N];
int find(int x)&#123;
    if(p[x] != x) p[x] = find(p[x]);
    return p[x];
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    int n, m;
    cin &gt;&gt; n &gt;&gt; m;
    for(int i = 1; i &lt;= n; i++) p[i] = i;
    for(int i = 1; i &lt;= m; i++)&#123;
        int u, v, c;
        cin &gt;&gt; u &gt;&gt; v &gt;&gt; c;
        g[i] = &#123;c, u, v&#125;;
    &#125;
    sort(g + 1, g + 1 + m);
    int ans, cnt = 0;
    for(int i = 1; i &lt;= m; i++)&#123;
        auto [c, u, v] = g[i];
        int x = find(u), y = find(v);
        if(x != y)&#123;
            p[x] = y;
            cnt++;
            ans = c;
        &#125;
    &#125;
    cout &lt;&lt; cnt &lt;&lt; &#39; &#39; &lt;&lt; ans &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><h3 id="AcWing-è”ç»œå‘˜"><a href="#AcWing-è”ç»œå‘˜" class="headerlink" title="AcWing|è”ç»œå‘˜"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTE0NS8=">AcWing|è”ç»œå‘˜</span></h3><ul><li>å¿…é¡»è¦è¿çš„è¾¹å…ˆè¿åœ¨ä¸€èµ·ï¼Œå½“æˆä¸€ä¸ªè¿é€šå—ï¼Œæ±‚å„ä¸ªè¿é€šå—çš„æœ€å°ç”Ÿæˆæ ‘</li><li>æœ¬é¢˜ä¸éœ€è¦ç¼©ç‚¹</li><li>é¢˜è§£<ul><li>å°†æ‰€æœ‰å¿…é€‰è¾¹åŠ åˆ°å¹¶æŸ¥é›†ä¸­</li><li>å°†æ‰€æœ‰éå¿…é€‰è¾¹ä»å°åˆ°å¤§æ’åº</li><li>ä»å°åˆ°å¤§ä¾æ¬¡æšä¸¾æ¯ä¸€æ¡éå¿…é€‰è¾¹<ul><li>å¦‚æœ $a$ å’Œ $b$ å·²ç»è¿é€šï¼Œç›´æ¥è·³è¿‡</li><li>å¦‚æœ $a$ å’Œ $b$ ä¸è¿é€šï¼Œå°±å°†å½“å‰è¾¹é€‰å‡ºæ¥</li></ul></li><li>å¹¶æŸ¥é›†çš„ç¥–å®—èŠ‚ç‚¹å³å¯çœ‹æˆå°è¿é€šå—çš„ç¼–å·ï¼Œå¯ä»¥çœ‹ä½œç¼©ç‚¹</li><li>åœ¨æœ‰ä¸€å®šè¾¹çš„åŸºç¡€ä¸Šåš Kruskal ä¸€æ ·å¯ä»¥æ±‚å‡ºæœ€å°ç”Ÿæˆæ ‘</li></ul></li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef tuple&lt;int, int, int&gt; TIII;
const int N = 2010, M = 10010;
TIII g[M];
int p[N];
int find(int x)&#123;
    if(p[x] != x) p[x] = find(p[x]);
    return p[x];
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    int n, m;
    cin &gt;&gt; n &gt;&gt; m;
    int ans = 0, cnt = 0;
    for(int i = 1; i &lt;= n; i++) p[i] = i;
    for(int i = 1; i &lt;= m; i++)&#123;
        int type, u, v, w;
        cin &gt;&gt; type &gt;&gt; u &gt;&gt; v &gt;&gt; w;
        if(type == 1)&#123;
            p[find(u)] = find(v);
            ans += w;
        &#125;else&#123;
            g[++cnt] = &#123;w, u, v&#125;;
        &#125;
    &#125;
    sort(g + 1, g + 1 + cnt);
    for(int i = 1; i &lt;= cnt; i++)&#123;
        auto [w, u, v] = g[i];
        int x = find(u), y = find(v);
        if(x != y)&#123;
            p[x] = y;
            ans += w;
        &#125;
    &#125;
    cout &lt;&lt; ans &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><h3 id="AcWing-è¿æ¥æ ¼ç‚¹ğŸŒ¸"><a href="#AcWing-è¿æ¥æ ¼ç‚¹ğŸŒ¸" class="headerlink" title="AcWing|è¿æ¥æ ¼ç‚¹ğŸŒ¸"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTE0Ni8=">AcWing|è¿æ¥æ ¼ç‚¹</span>ğŸŒ¸</h3><ul><li>æ¯å¤šä¸€æ¡è¾¹ï¼ŒèŠ±è´¹è‚¯å®šæ›´å¤šï¼Œä¸€å…± $n \times m$ ä¸ªç‚¹ï¼Œæˆ‘ä»¬æœ€å°‘éœ€è¦è¿ $nm - 1$ æ¡è¾¹ï¼Œè½¬åŒ–æˆæœ€å°ç”Ÿæˆæ ‘é—®é¢˜</li><li>å…¶ä»–åŒä¸Šä¸€é¢˜</li><li>å‡å¦‚æ—¶é™ç´§æˆ–è€…è¾¹å¾ˆå¤šçš„æƒ…å†µä¸‹ï¼Œç”±äºè¾¹æƒåªæœ‰ $1$ å’Œ $2$ï¼Œå¯ä»¥å…ˆå»ºç«–å‘çš„è¾¹å†å»ºæ¨ªå‘çš„è¾¹ï¼Œå¯ä»¥å‡å°‘æ’åºæ¶ˆè€—çš„æ—¶é—´</li><li>å°†äºŒç»´è½¬åŒ–æˆä¸€ç»´</li><li>ä¸ç”¨ç‰¹åˆ¤è¾¹æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œå¹¶æŸ¥é›†ä¼šè§£å†³</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef tuple&lt;int, int, int&gt; TIII;
const int N = 1010, M = 1e7 + 10;
int idx[N][N], p[M];
TIII e[M];
int n, m, cnt = 0;
int find(int x)&#123;
    if(p[x] != x) p[x] = find(p[x]);
    return p[x];
&#125;
void get_edges()&#123;
    int dx[4] = &#123;-1, 0, 1, 0&#125;, dy[4] = &#123;0, 1, 0, -1&#125;, dw[4] = &#123;1, 2, 1, 2&#125;;
    for(int z = 0; z &lt; 2; z++)&#123;
        for(int i = 1; i &lt;= n; i++)&#123;
            for(int j = 1; j &lt;= m; j++)&#123;
                for(int k = 0; k &lt; 4; k++)&#123;
                    if(k % 2 == z)&#123;
                        int nx = i + dx[k], ny = j + dy[k], w = dw[k];
                        if(nx &amp;&amp; nx &lt;= n &amp;&amp; ny &amp;&amp; ny &lt;= m)&#123;
                            int x = idx[i][j], y = idx[nx][ny];
                            if(x &lt; y) e[++cnt] = &#123;w, x, y&#125;;
                        &#125;
                    &#125;
                &#125;
            &#125;
        &#125;
    &#125;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    cin &gt;&gt; n &gt;&gt; m;
    for(int i = 1; i &lt;= n * m; i++) p[i] = i;
    for(int i = 1, t = 1; i &lt;= n; i++)&#123;
        for(int j = 1; j &lt;= m; j++, t++)&#123;
            idx[i][j] = t;
        &#125;
    &#125;
    int x1, y1, x2, y2;
    while(cin &gt;&gt; x1 &gt;&gt; y1 &gt;&gt; x2 &gt;&gt; y2)&#123;
        int x = idx[x1][y1], y = idx[x2][y2];
        p[find(x)] = find(y);
    &#125;
    get_edges();
    int ans = 0;
    for(int i = 1; i &lt;= cnt; i++)&#123;
        auto [w, x, y] = e[i];
        x = find(x), y = find(y);
        if(x != y)&#123;
            p[x] = y;
            ans += w;
        &#125;
    &#125;
    cout &lt;&lt; ans &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><hr><h2 id="æœ€å°ç”Ÿæˆæ ‘çš„æ‰©å±•åº”ç”¨"><a href="#æœ€å°ç”Ÿæˆæ ‘çš„æ‰©å±•åº”ç”¨" class="headerlink" title="æœ€å°ç”Ÿæˆæ ‘çš„æ‰©å±•åº”ç”¨"></a>æœ€å°ç”Ÿæˆæ ‘çš„æ‰©å±•åº”ç”¨</h2><ul><li>æœ€å°ç”Ÿæˆæ ‘çš„ç†è®ºåŸºç¡€<ul><li>ä»»æ„ä¸€æ£µæœ€å°ç”Ÿæˆæ ‘ä¸€å®šå¯ä»¥åŒ…å«æ— å‘å›¾ä¸­æƒå€¼æœ€å°çš„è¾¹</li><li>ç»™å®šä¸€å¼ æ— å‘å›¾ $G &#x3D; (V, E), n &#x3D; |V|, m &#x3D; |E|$ï¼Œä» $E$ ä¸­é€‰å‡º $k &lt; n - 1$ æ¡è¾¹æ„æˆ $G$ çš„åŠ ä¸€ä¸ªç”Ÿæˆæ£®æ—ã€‚è‹¥å†ä»å‰©ä½™çš„ $m - k$ æ¡è¾¹ä¸­é€‰ $n - 1 - k$ æ¡è¾¹æ·»åŠ åˆ°ç”Ÿæˆæ£®æ—ä¸­ï¼Œä½¿å…¶æˆä¸º $G$ çš„ç”Ÿæˆæ ‘ï¼Œå¹¶ä¸”é€‰å‡ºçš„è¾¹çš„æƒå€¼ä¹‹å’Œæœ€å°ã€‚åˆ™è¯¥ç”Ÿæˆæ ‘ä¸€å®š<strong>å¯ä»¥</strong>åŒ…å« $m - k$ æ¡è¾¹ä¸­è¿æ¥ç”Ÿæˆæ£®æ—çš„ä¸¤ä¸ªä¸è¿é€šèŠ‚ç‚¹çš„æƒå€¼æœ€å°çš„è¾¹</li></ul></li><li>æ¬¡å°ç”Ÿæˆæ ‘<ul><li>å®šä¹‰ï¼šç»™ä¸€ä¸ªå¸¦æƒçš„å›¾ï¼ŒæŠŠå›¾çš„æ‰€æœ‰ç”Ÿæˆæ ‘æŒ‰æƒå€¼ä»å°åˆ°å¤§æ’åºï¼Œç¬¬äºŒå°çš„ç§°ä¸ºæ¬¡å°ç”Ÿæˆæ ‘ï¼Œæƒå€¼ä¸¥æ ¼å¤§äºæœ€å°ç”Ÿæˆæ ‘</li><li>æ–¹æ³•<ol><li>å…ˆæ±‚æœ€å°ç”Ÿæˆæ ‘ï¼Œå†æšä¸¾åˆ å»æœ€å°ç”Ÿæˆæ ‘ä¸­çš„è¾¹æ±‚è§£ï¼Œæ—¶é—´å¤æ‚åº¦ $O(mlogm + nm)$ï¼Œåªèƒ½æ±‚éä¸¥æ ¼æ¬¡å°ç”Ÿæˆæ ‘</li><li>å…ˆæ±‚æœ€å°ç”Ÿæˆæ ‘ï¼Œä¾æ¬¡æšä¸¾éæ ‘è¾¹ï¼Œç„¶åå°†è¯¥è¾¹åŠ å…¥æ ‘ä¸­ï¼ŒåŒæ—¶ä»æ ‘ä¸­å»æ‰ä¸€æ¡è¾¹ï¼Œä½¿å¾—æœ€ç»ˆçš„å›¾ä»æ˜¯ä¸€æ£µæ ‘ï¼Œåˆ™ä¸€å®šå¯ä»¥æ±‚å‡ºæ¬¡å°ç”Ÿæˆæ ‘ï¼Œå»æ‰çš„è¾¹æ˜¯æ–°è¾¹ä¸¤ç«¯ç‚¹é—´åŸè·¯å¾„ä¸Šè¾¹æƒæœ€å¤§çš„è¾¹</li></ol></li></ul></li><li>è®¾ $T$ ä¸ºå›¾ $G$ çš„ä¸€æ£µç”Ÿæˆæ ‘ï¼Œå¯¹äºéæ ‘è¾¹ $a$ å’Œæ ‘è¾¹ $b$ï¼Œæ’å…¥è¾¹ $a$ï¼Œå¹¶åˆ é™¤è¾¹ $b$ çš„æ“ä½œè®°ä¸º $(+a, -b)$ã€‚å¦‚æœ $T + a - b$ ä¹‹åï¼Œä»ç„¶æ˜¯ä¸€æ£µç”Ÿæˆæ ‘ï¼Œç§° $(+a, -b)$ æ˜¯ $T$ çš„ä¸€ä¸ªå¯è¡Œäº¤æ¢</li><li>ç§°ç”± $T$ è¿›è¡Œä¸€æ¬¡å¯è¡Œå˜æ¢æ‰€å¾—åˆ°çš„æ–°çš„ç”Ÿæˆæ ‘çš„é›†åˆç§°ä¸º $T$ çš„é‚»é›†</li><li>å®šç†ï¼šæ¬¡å°ç”Ÿæˆæ ‘ä¸€å®šåœ¨æœ€å°ç”Ÿæˆæ ‘çš„é‚»é›†ä¸­</li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS92aWRlby81Mzcv">ç›¸å…³è¯æ˜-3.3.2 æœ€å°ç”Ÿæˆæ ‘çš„æ‰©å±•åº”ç”¨ - AcWing</span></li></ul><h3 id="AcWing-æ–°çš„å¼€å§‹"><a href="#AcWing-æ–°çš„å¼€å§‹" class="headerlink" title="AcWing|æ–°çš„å¼€å§‹"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTE0OC8=">AcWing|æ–°çš„å¼€å§‹</span></h3><ul><li>æ„å»ºè™šæ‹Ÿæºç‚¹ï¼Œ<del>è¶…çº§å‘ç”µç«™</del>ï¼Œå…¶åˆ°æ¯ä¸ªå‘ç”µç«™çš„è¾¹æƒéƒ½æ˜¯ $v_i$ï¼Œæ¯ä¸ªçŸ¿äº•éƒ½éœ€è¦å’Œè¶…çº§å‘ç”µç«™è¿é€šï¼Œå› æ­¤å¯ä»¥è½¬åŒ–æˆæœ€å°ç”Ÿæˆæ ‘é—®é¢˜</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 310;
int w[N][N], dist[N];
int n;
bool st[N];
int prim()&#123;
    memset(dist, 0x3f, sizeof(dist));
    dist[0] = 0;
    int ans = 0;
    for(int i = 0; i &lt; n + 1; i++)&#123;
        int t = -1;
        for(int j = 0; j &lt;= n; j++)&#123;
            if(!st[j] &amp;&amp; (t == -1 || dist[t] &gt; dist[j])) t = j;
        &#125;
        st[t] = 1;
        ans += dist[t];
        for(int j = 0; j &lt;= n; j++) dist[j] = min(dist[j], w[t][j]);
    &#125;
    return ans;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    cin &gt;&gt; n;
    for(int i = 1; i &lt;= n; i++)&#123;
        cin &gt;&gt; w[0][i];
        w[i][0] = w[0][i];
    &#125;
    for(int i = 1; i &lt;= n; i++)&#123;
        for(int j = 1; j &lt;= n; j++)&#123;
            cin &gt;&gt; w[i][j];
        &#125;
    &#125;
    cout &lt;&lt; prim() &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><h3 id="AcWing-åŒ—æé€šè®¯ç½‘ç»œ"><a href="#AcWing-åŒ—æé€šè®¯ç½‘ç»œ" class="headerlink" title="AcWing|åŒ—æé€šè®¯ç½‘ç»œ"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTE0Ny8=">AcWing|åŒ—æé€šè®¯ç½‘ç»œ</span></h3><ul><li>ç›¸å½“äºæ‰¾ä¸€ä¸ªæœ€å°çš„ $d$ å€¼ï¼Œä½¿å¾—å°†æ‰€æœ‰æƒå€¼å¤§äº $d$ çš„è¾¹åˆ å»ä¹‹åï¼Œæ•´ä¸ªå›¾å½¢çš„è¿é€šå—çš„ä¸ªæ•°ä¸è¶…è¿‡ $k$ï¼Œæ¯ä¸€ä¸ªè¿é€šå—éœ€è¦ä¸€ä¸ªå«æ˜Ÿè®¾å¤‡</li><li>Kruskal åˆšå¥½å¯ä»¥æ±‚å‡º $k$ ä¸ªè¿é€šå—æ—¶çš„ç»“æœï¼Œä¸éœ€è¦ç”¨äºŒåˆ†æ¥æ±‚</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef tuple&lt;double, int, int&gt; TDII;
typedef pair&lt;int, int&gt; PII;
const int N = 510, M = N * N / 2;
PII q[N];
TDII edges[M];
int p[N];
int n, k, m;
int find(int x)&#123;
    if(p[x] != x) p[x] = find(p[x]);
    return p[x];
&#125;
double get_dist(PII a, PII b)&#123;
    int dx = a.first - b.first;
    int dy = a.second - b.second;
    return sqrt(dx * dx + dy * dy);
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    cout &lt;&lt; fixed &lt;&lt; setprecision(2);
    cin &gt;&gt; n &gt;&gt; k;
    for(int i = 1; i &lt;= n; i++)&#123;
        p[i] = i;
        cin &gt;&gt; q[i].first &gt;&gt; q[i].second;
    &#125;
    for(int i = 1; i &lt;= n; i++)&#123;
        for(int j = 1; j &lt; i; j++)&#123;
            edges[++m] = &#123;get_dist(q[i], q[j]), i, j&#125;;
        &#125;
    &#125;
    sort(edges + 1, edges + 1 + m);
    int cnt = n;
    double ans;
    for(int i = 1; i &lt;= m; i++)&#123;
        if(cnt &lt;= k) break;
        auto [w, a, b] = edges[i];
        a = find(a), b = find(b);
        if(a != b)&#123;
            p[a] = b;
            cnt--;
            ans = w;
        &#125;
    &#125;
    cout &lt;&lt; ans &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><h3 id="AcWing-èµ°å»Šæ³¼æ°´èŠ‚"><a href="#AcWing-èµ°å»Šæ³¼æ°´èŠ‚" class="headerlink" title="AcWing|èµ°å»Šæ³¼æ°´èŠ‚"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMzQ4Lw==">AcWing|èµ°å»Šæ³¼æ°´èŠ‚</span></h3><ul><li>å®Œå…¨å›¾ï¼Œå³ä»»æ„ä¸¤ä¸ªç‚¹éƒ½å¯ä»¥ç›´è¾¾</li><li>æŒ‰è¾¹æƒä»å°åˆ°å¤§æ’åºï¼Œæ¯æ¬¡åˆå¹¶æ–°åŠ å…¥é‚£æ¡è¾¹çš„ä¸¤ä¸ªé›†åˆï¼Œæ„é€ ä¸€æ£µæœ€å°ç”Ÿæˆæ ‘ï¼Œå› ä¸ºä¸èƒ½ç ´åæœ€å°ç”Ÿæˆæ ‘ï¼Œæ‰€ä»¥æ„æˆå®Œå…¨å›¾çš„å…¶ä»–è¾¹éœ€è¦å¤§äºç­‰äºå½“å‰è¿æ¥ä¸¤ä¸ªè¿é€šå—çš„è¾¹æƒï¼Œæ‰€ä»¥éƒ½å¯ä»¥å– $w_i + 1$</li><li>å‡è®¾ $S_x$ è¿é€šå—æœ‰ $p$ ä¸ªå…ƒç´ ï¼Œ$S_y$ è¿é€šå—æœ‰ $q$ ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆæ–°åŠ è¾¹çš„æƒå€¼æ˜¯ $(w + 1) \times (p \times q - 1)$</li><li>ç»´æŠ¤ $size$ çš„å¹¶æŸ¥é›†</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef tuple&lt;double, int, int&gt; TDII;
typedef pair&lt;int, int&gt; PII;
const int N = 6010;
TDII e[N];
int p[N], cnt[N];
int find(int x)&#123;
    if(x != p[x]) p[x] = find(p[x]);
    return p[x];
&#125;
void solve()&#123;
    int n;
    cin &gt;&gt; n;
    for(int i = 1; i &lt;= n - 1; i++)&#123;
        int x, y, z;
        cin &gt;&gt; x &gt;&gt; y &gt;&gt; z;
        e[i] = &#123;z, x, y&#125;;
    &#125;
    sort(e + 1, e + 1 + n - 1);
    int ans = 0;
    for(int i = 1; i &lt;= n; i++)&#123;
        p[i] = i;
        cnt[i] = 1;
    &#125;
    for(int i = 1; i &lt;= n - 1; i++)&#123;
        auto [w, a, b] = e[i];
        a = find(a), b = find(b);
        if(a != b)&#123;
            p[a] = b;
            ans += (cnt[b] * cnt[a] - 1) * (w + 1);
            cnt[b] += cnt[a];
        &#125;
    &#125;
    cout &lt;&lt; ans &lt;&lt; &#39;\n&#39;;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    int t; cin &gt;&gt; t;
    while(t--) solve();
&#125;
</code></pre><h3 id="AcWing-ç§˜å¯†çš„ç‰›å¥¶è¿è¾“ğŸŒ–"><a href="#AcWing-ç§˜å¯†çš„ç‰›å¥¶è¿è¾“ğŸŒ–" class="headerlink" title="AcWing|ç§˜å¯†çš„ç‰›å¥¶è¿è¾“ğŸŒ–"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTE1MC8=">AcWing|ç§˜å¯†çš„ç‰›å¥¶è¿è¾“</span>ğŸŒ–</h3><ul><li>æ¬¡å°ç”Ÿæˆæ ‘ï¼Œè¿™é‡Œä½¿ç”¨æœ´ç´ åšæ³•<ul><li><strong>å®šç†ï¼š</strong> å¯¹äºä¸€å¼ æ— å‘å›¾ï¼Œå¦‚æœå­˜åœ¨æœ€å°ç”Ÿæˆæ ‘å’Œï¼ˆä¸¥æ ¼ï¼‰æ¬¡å°ç”Ÿæˆæ ‘ï¼Œé‚£ä¹ˆå¯¹äºä»»ä½•ä¸€æ£µæœ€å°ç”Ÿæˆæ ‘ï¼Œéƒ½å­˜åœ¨ä¸€æ£µï¼ˆä¸¥æ ¼ï¼‰æ¬¡å°ç”Ÿæˆæ ‘ï¼Œä½¿å¾—è¿™ä¸¤æ£µæ ‘åªæœ‰ä¸€æ¡è¾¹ä¸åŒã€‚</li></ul></li><li>å…ˆç”¨ Kruskal å¤„ç†å‡ºæœ€å°ç”Ÿæˆæ ‘ï¼ŒåŒæ—¶å»ºè¾¹å¹¶æ ‡è®°å“ªäº›ç‚¹ä¸æ˜¯æ ‘ä¸Šçš„ç‚¹</li><li>ä½¿ç”¨ $dfs$ é¢„å¤„ç†å‡º $d$ å’Œ $dist2[a][b]$ åˆ†åˆ«è¡¨ç¤ºæ ‘ä¸Š $a$ åˆ° $b$ çš„æœ€å¤§å€¼å’Œæ¬¡å¤§å€¼ï¼ˆé˜²æ­¢ä¸æ ‘å¤–è¾¹æƒç›¸åŒä»è€Œæ‰¾å‡ºéä¸¥æ ¼æ¬¡å°ç”Ÿæˆæ ‘ï¼‰<ul><li>ç¬¬äºŒæ­¥ $dfs$ å¤„ç†çš„æ—¶å€™åº”è¯¥è€ƒè™‘è´Ÿæƒè¾¹ï¼Œå› æ­¤æœ€å¤§å€¼å’Œæ¬¡å¤§å€¼çš„åˆå€¼éƒ½åº”è¯¥ä¸º <code>-1e9</code></li></ul></li><li>æšä¸¾æ¯ä¸€ä¸ª $sum+w-dist[i][j]$ æ±‚æœ€å°å€¼</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef long long LL;
const int N = 1010, M = 10010;
struct Edge&#123;
    int a, b, w;
    bool is_tree;
    bool operator &lt; (const Edge &amp;e) const&#123;
        return w &lt; e.w;
    &#125;
&#125;edge[M];
int n, m;
int p[N], dist1[N][N], dist2[N][N]; // æœ€å°å€¼ï¼Œæ¬¡å°å€¼
int h[N], e[M * 2], ne[M * 2], w[M * 2], idx;
int find(int x)&#123;
    if(x != p[x]) p[x] = find(p[x]);
    return p[x];
&#125;
void add(int a, int b, int c)&#123;
    e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx++;
&#125;
void dfs(int u, int fa, int maxn, int maxv, int dist1[], int dist2[])&#123;
    dist1[u] = maxn, dist2[u] = maxv;
    for(int i = h[u]; i != -1; i = ne[i])&#123;
        int j = e[i];
        if(j != fa)&#123;
            if(w[i] &gt; maxn) dfs(j, u, w[i], maxn, dist1, dist2);
            else if(w[i] &lt; maxn &amp;&amp; w[i] &gt; maxv) dfs(j, u, maxn, w[i], dist1, dist2);
            else dfs(j, u, maxn, maxv, dist1, dist2);
        &#125;
    &#125;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    memset(h, -1, sizeof(h));
    cin &gt;&gt; n &gt;&gt; m;
    for(int i = 1; i &lt;= m; i++)&#123;
        cin &gt;&gt; edge[i].a &gt;&gt; edge[i].b &gt;&gt; edge[i].w;
    &#125;
    sort(edge + 1, edge + 1 + m);
    for(int i = 1; i &lt;= n; i++) p[i] = i;
    LL sum = 0;
    for(int i = 1; i &lt;= m; i++)&#123;
        auto&amp; [a, b, w, f] = edge[i];
        int pa = find(a), pb = find(b);
        if(pa != pb)&#123;
            p[pa] = pb;
            sum += w;
            f = 1;
            add(a, b, w), add(b, a, w);
        &#125;
    &#125;
    // dfså¤„ç†æ ‘ä¸Šä»»æ„ä¸¤ç‚¹çš„æœ€å¤§å€¼å’Œæ¬¡å¤§å€¼
    for(int i = 1; i &lt;= n; i++)&#123;
        dfs(i, -1, -1e9, -1e9, dist1[i], dist2[i]);
    &#125;
    LL ans = 1e18;
    for(int i = 1; i &lt;= m; i++)&#123;
        auto &amp;[a, b, w, f] = edge[i];
        if(!f)&#123;
            if(w &gt; dist1[a][b]) ans = min(ans, sum + w - dist1[a][b]);
            else if(w &gt; dist2[a][b]) ans = min(ans, sum + w - dist2[a][b]);
        &#125;
    &#125;
    cout &lt;&lt; ans &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><hr><h2 id="è´Ÿç¯"><a href="#è´Ÿç¯" class="headerlink" title="è´Ÿç¯"></a>è´Ÿç¯</h2><ul><li>01 åˆ†æ•°è§„åˆ’é€šå¸¸å’Œè´Ÿç¯ç»“åˆä¸€èµ·</li><li>æ±‚è´Ÿç¯å¾—å¸¸ç”¨æ–¹æ³•ï¼ŒåŸºäº SPFA<ul><li>ç»Ÿè®¡æ¯ä¸ªç‚¹å…¥é˜Ÿçš„æ¬¡æ•°ï¼Œå¦‚æœæŸä¸ªç‚¹å…¥é˜Ÿ $n$ æ¬¡ï¼Œåˆ™è¯´æ˜å­˜åœ¨è´Ÿç¯</li><li>ç»Ÿè®¡å½“å‰æ¯ä¸ªç‚¹çš„æœ€çŸ­è·¯ä¸­æ‰€åŒ…å«çš„è¾¹æ•°ï¼Œå¦‚æœæŸç‚¹çš„æœ€çŸ­è·¯æ‰€åŒ…å«çš„è¾¹æ•°å¤§äºç­‰äº $n$ï¼Œåˆ™ä¹Ÿè¯´æ˜å­˜åœ¨ç¯</li></ul></li></ul><h3 id="AcWing-è™«æ´"><a href="#AcWing-è™«æ´" class="headerlink" title="AcWing|è™«æ´"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvOTA2Lw==">AcWing|è™«æ´</span></h3><ul><li>spfa æ±‚è´Ÿç¯ï¼Œæ¿å­é¢˜</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 510, M = 5210;
int n, m1, m2;
int h[N], e[M], w[M], ne[M], idx;
int dist[N], cnt[N];
bool st[N];
void add(int a, int b, int c)&#123;
    e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx++;
&#125;
bool spfa()&#123;
    //memset(dist, 0, sizeof(dist));
    //å¯ä»¥ä¸ç”¨åˆå§‹åŒ–
    memset(cnt, 0, sizeof(cnt));
    queue&lt;int&gt; q;
    for(int i = 1; i &lt;= n; i++)&#123;
        q.push(i);
        st[i] = true;
    &#125;
    while(q.size())&#123;
        int t = q.front(); q.pop();
        st[t] = false;
        for(int i = h[t]; ~i; i = ne[i])&#123;
            int j = e[i];
            if(dist[j] &gt; dist[t] + w[i])&#123;
                dist[j] = dist[t] + w[i];
                cnt[j] = cnt[t] + 1;
                if(cnt[j] &gt;= n) return 1;
                if(!st[j])&#123;
                    q.push(j);
                    st[j] = true;
                &#125;
            &#125;
        &#125;
    &#125;
    return 0;
&#125;
void solve()&#123;
    memset(h, -1, sizeof(h));
    idx = 0;
    cin &gt;&gt; n &gt;&gt; m1 &gt;&gt; m2;
    for(int i = 1; i &lt;= m1; i++)&#123;
        int a, b, c;
        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        add(a, b, c); add(b, a, c);
    &#125;
    for(int i = 1; i &lt;= m2; i++)&#123;
        int a, b, c;
        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        add(a, b, -c);
    &#125;
    if(spfa()) cout &lt;&lt; &quot;YES\n&quot;;
    else cout &lt;&lt; &quot;NO\n&quot;;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    int t; cin &gt;&gt; t;
    while(t--) solve();
&#125;
</code></pre><h3 id="AcWing-è§‚å…‰å¥¶ç‰›"><a href="#AcWing-è§‚å…‰å¥¶ç‰›" class="headerlink" title="AcWing|è§‚å…‰å¥¶ç‰›"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMzYzLw==">AcWing|è§‚å…‰å¥¶ç‰›</span></h3><ul><li>åœ¨å›¾è®ºä¸­å½¢å¦‚ $\frac{\sum f_i}{\sum g_i}$ çš„é—®é¢˜ï¼Œç§°ä¹‹ä¸º 01 åˆ†æ•°è§„åˆ’ï¼Œé€šç”¨åšæ³•ï¼ŒäºŒåˆ†</li><li>$\frac{\sum f_i}{\sum g_i}$ï¼Œå°±å¯ä»¥è½¬åŒ–ä¸º $\sum f_i &gt; Mid \times \sum g_i$ï¼Œå³ $\sum f_i - Mid \times \sum g_i &gt; 0$ï¼Œæ±‚å’Œå¯ä»¥æåœ¨æ‹¬å·å¤–ï¼Œç­‰ä»·äºå›¾ä¸­<strong>æ˜¯å¦æœ‰æ­£ç¯</strong></li><li>æœ‰å‘å›¾ä¸Šçš„ç‚¹æƒå¯ä»¥æ”¾åœ¨å‡ºè¾¹ä¸Šä¹Ÿå¯ä»¥æ”¾åœ¨å…¥è¾¹ä¸Š</li><li>spfa ç®—æ³•æœ¬èº«å…·æœ‰ä¸€ä¸ªæ€§è´¨ï¼Œå°±æ˜¯åœ¨æ±‚è§£æœ€çŸ­è·¯çš„æ—¶å€™ï¼Œæ˜¯å¯ä»¥æŠŠç‚¹æƒå’Œè¾¹æƒçœ‹åšä¸€ä¸ªæ•´ä½“è¾¹æƒä¸€èµ·æ›´æ–°çš„ï¼Œå› æ­¤æˆ‘ä»¬å¸¸å¸¸åœ¨ä¸€äº› spfa çš„å›¾è®ºé—®é¢˜ä¸­ï¼ŒæŠŠç‚¹æƒå­˜å…¥è¾¹æƒä¸­è¿›è¡Œè®¡ç®—ã€‚</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 1010, M = 5010;
int wf[N], cnt[N];
int h[N], e[M], wt[M], ne[M], idx;
double dist[N];
bool st[N];
int n, m;
void add(int a, int b, int c)&#123;
    e[idx] = b, wt[idx] = c, ne[idx] = h[a], h[a] = idx++;
&#125;
bool check(double x)&#123;
    memset(cnt, 0, sizeof(cnt));
    memset(dist, 0, sizeof(dist));
    queue&lt;int&gt; q;
    for(int i = 1; i &lt;= n; i++)&#123;
        q.push(i);
        st[i] = true;
    &#125;
    while(q.size())&#123;
        int t = q.front(); q.pop();
        st[t] = false;
        for(int i = h[t]; ~i; i = ne[i])&#123;
            int j = e[i];
            if(dist[j] &lt; dist[t] + wf[t] - x * wt[i])&#123;
                dist[j] = dist[t] + wf[t] - x * wt[i];
                cnt[j] = cnt[t] + 1;
                if(cnt[j] &gt;= n) return 1;
                if(!st[j])&#123;
                    q.push(j);
                    st[j] = true;
                &#125;
            &#125;
        &#125;
    &#125;
    return 0;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    cin &gt;&gt; n &gt;&gt; m;
    memset(h, -1, sizeof(h));
    for(int i = 1; i &lt;= n; i++) cin &gt;&gt; wf[i];
    for(int i = 1; i &lt;= m; i++)&#123;
        int a, b, c;
        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        add(a, b, c);
    &#125;
    double l = 0, r = 1e6;
    while(r - l &gt; 1e-4)&#123;
        double mid = (l + r) / 2;
        if(check(mid)) l = mid;
        else r = mid;
    &#125;
    cout &lt;&lt; fixed &lt;&lt; setprecision(2) &lt;&lt; l &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><h3 id="AcWing-å•è¯ç¯"><a href="#AcWing-å•è¯ç¯" class="headerlink" title="AcWing|å•è¯ç¯"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTE2Ni8=">AcWing|å•è¯ç¯</span></h3><ul><li>å¯ä»¥æŠŠä¸€ä¸ªå•è¯çœ‹æˆä¸€ä¸ªç‚¹ï¼Œä½†æ˜¯å¦‚æ­¤åˆ†æï¼Œæ•°æ®ä¼šéå¸¸å¤§ï¼Œè¾¹ä¼šéå¸¸å¤šï¼Œå› æ­¤åè¿‡æ¥çœ‹ï¼ŒæŠŠå•è¯çœ‹ä½œè¾¹</li><li>ä¾‹å¦‚ $ababc$ å°±ç›¸å½“äº $ab \to bc$ è¾¹æƒä¸º $5$ï¼Œå¦‚æ­¤æœ€å¤šåªæœ‰ $10^5$ æ¡è¾¹ï¼Œåªæœ‰ $26 \times 26$ ä¸ªç‚¹</li><li>å…¶ä½™åˆ†æåŒä¸Šé¢˜ï¼Œ01 åˆ†æ•°è§„åˆ’ï¼Œå¯è½¬åŒ–æˆæ±‚å›¾ä¸­æ­£ç¯</li><li>ä½†æ˜¯ç›´æ¥è¿™æ ·åšä¼š TLEï¼Œè¯¥é¢˜æœ‰ä¸ªå° trickï¼Œå½“å…¥é˜Ÿçš„ç‚¹çš„æ€»æ¬¡æ•°è¶…è¿‡ä¸€å®šå€¼æ—¶ï¼Œå¤§æ¦‚ç‡æ˜¯ä¸€å®šæœ‰è´Ÿç¯çš„ï¼Œ<del>æ‰€ä»¥å¯ä»¥åŠ å…¥è¯¥ä¼˜åŒ–</del></li><li>äºŒåˆ†ç²¾åº¦å¤ªé«˜ä¹Ÿä¼š TLE</li><li>å°† spfa ä¸­çš„é˜Ÿåˆ—æ¢æˆæ ˆï¼Œå¯ä»¥æ›´å¿«åœ°æ‰¾åˆ°ç¯</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 700, M = 100010;
int n;
int h[N], e[M], w[M], ne[M], idx;
double dist[N];
bool st[N];
int cnt[N];
void add(int a, int b, int c)&#123;
    e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx++;
&#125;
bool check(double mid)&#123;
    memset(cnt, 0, sizeof(cnt));
    queue&lt;int&gt; q;
    for(int i = 0; i &lt; N; i++)&#123;
        q.push(i);
        st[i] = true;
    &#125;
    int count = 0;
    while(q.size())&#123;
        int t = q.front(); q.pop();
        st[t] = false;
        for(int i = h[t]; ~i; i = ne[i])&#123;
            int j = e[i];
            if(dist[j] &lt; dist[t] + w[i] - mid)&#123;
                dist[j] = dist[t] + w[i] - mid;
                cnt[j] = cnt[t] + 1;
                if(++count &gt; 10000) return 1;
                if(cnt[j] &gt;= N) return 1;
                if(!st[j])&#123;
                    q.push(j);
                    st[j] = true;
                &#125;
            &#125;
        &#125;
    &#125;
    return 0;
&#125;
int main()&#123;
    string str;
    while(cin &gt;&gt; n, n)&#123;
        memset(h, -1, sizeof(h));
        idx = 0;
        for(int i = 1; i &lt;= n; i++)&#123;
            cin &gt;&gt; str;
            int len = str.size();
            if(len &gt;= 2)&#123;
                int l = (str[0] - &#39;a&#39;) * 26 + str[1] - &#39;a&#39;;
                int r = (str[len - 2] - &#39;a&#39;) * 26 + str[len - 1] - &#39;a&#39;;
                add(l, r, len);
            &#125;
        &#125;
        if(!check(0)) cout &lt;&lt; &quot;No solution\n&quot;;
        else&#123;
            double l = 0, r = 1000;
            while(r - l &gt; 1e-4)&#123;
                double mid = (l + r) / 2;
                if(check(mid)) l = mid;
                else r = mid;
            &#125;
            cout &lt;&lt; l &lt;&lt; &#39;\n&#39;;
        &#125;
    &#125;
&#125;
</code></pre><hr><h2 id="å·®åˆ†çº¦æŸ"><a href="#å·®åˆ†çº¦æŸ" class="headerlink" title="å·®åˆ†çº¦æŸ"></a>å·®åˆ†çº¦æŸ</h2><ul><li>åæ•°å­¦</li><li>æ±‚ä¸€ä¸ªä¸ç­‰å¼ç»„çš„å¯è¡Œè§£<ul><li>æºç‚¹éœ€è¦æ»¡è¶³çš„æ¡ä»¶ï¼šä»æºç‚¹å‡ºå‘ï¼Œä¸€å®šå¯ä»¥èµ°åˆ°æ‰€æœ‰çš„è¾¹</li><li>æ­¥éª¤<ol><li>å…ˆå°†æ¯ä¸ªä¸ç­‰å¼ $x_i \le x_j + c_k$ï¼Œè½¬åŒ–æˆä¸€æ¡ä» $x_j$ èµ°åˆ° $x_i$ï¼Œé•¿åº¦ä¸º $c_k$ çš„ä¸€æ¡è¾¹</li><li>æ‰¾ä¸€ä¸ªè™šæ‹Ÿæºç‚¹ï¼Œä½¿å¾—è¯¥æºç‚¹ä¸€å®šå¯ä»¥éå†åˆ°æ‰€æœ‰è¾¹</li><li>ä»æºç‚¹æ±‚ä¸€éå•æºæœ€çŸ­è·¯</li></ol></li><li>æ— è§£ç­‰ä»·äºå›¾ä¸­å­˜åœ¨è´Ÿç¯</li></ul></li><li>å¦‚ä½•æ±‚æœ€å¤§å€¼æˆ–è€…æœ€å°å€¼ï¼Œè¿™é‡Œçš„æœ€å€¼æŒ‡çš„æ˜¯æ¯ä¸ªå˜é‡çš„æœ€å€¼<ul><li>ç»“è®ºï¼šå¦‚æœæ±‚çš„æ˜¯æœ€å°å€¼ï¼Œåˆ™åº”è¯¥æ±‚æœ€é•¿è·¯ï¼›å¦‚æœæ±‚çš„æ˜¯æœ€å¤§å€¼ï¼Œåˆ™åº”è¯¥æ±‚æœ€çŸ­è·¯ï¼›</li><li>é—®é¢˜ï¼šå¦‚ä½•è½¬åŒ– $x_i \le c$ å…¶ä¸­ $c$ æ˜¯ä¸€ä¸ªå¸¸æ•°ï¼Œè¿™ä¸€ç±»çš„ä¸ç­‰å¼</li><li>æ–¹æ³•ï¼šå»ºç«‹ä¸€ä¸ªè™šæ‹Ÿæºç‚¹ $0$ï¼Œç„¶åå»ºç«‹ $0 \to i$ï¼Œé•¿åº¦ä¸º $c$ çš„è¾¹å³å¯</li><li>æœ€å¤§å€¼æ»¡è¶³æœ€å°ä¸Šç¡®ç•ŒåŸç†</li><li>ä»¥æ±‚ $x_i$ çš„æœ€å¤§å€¼ä¸ºä¾‹ï¼šæ±‚æ‰€æœ‰ä» $x_i$ å‡ºå‘ï¼Œæ„æˆçš„ä¸ç­‰å¼é“¾ $x_i ; \le ; x_j + c_1 ; \ge ; x_k + c_2 + c_1 ; \ge ; \cdots ; \ge ; c_1 + c_2 + \cdots$ æ‰€è®¡ç®—å‡ºçš„ä¸Šç•Œï¼Œæœ€ç»ˆ $x_i$ çš„æœ€å¤§å€¼ç­‰äºæ‰€æœ‰ä¸Šç•Œçš„æœ€å°å€¼</li></ul></li><li>æ¯ä¸€ä¸ªå·®åˆ†çº¦æŸçš„é—®é¢˜éƒ½å¯ä»¥è½¬åŒ–æˆå•æºæœ€çŸ­è·¯é—®é¢˜</li><li><strong>æ€»ç»“</strong><ul><li>ä»¥æ±‚æœ€é•¿è·¯ä¸ºä¾‹<ul><li>è¾¹æƒæ— é™åˆ¶ spfa $O(nm)$</li><li>è¾¹æƒéè´Ÿï¼Œå¯ä»¥ç”¨å¼ºè¿é€šåˆ†é‡æ¥è§£ï¼Œæ¯ä¸ªå¼ºè¿é€šåˆ†é‡å†…éƒ¨è¾¹æƒä¸º $0$ï¼Œå¦åˆ™æ— è§£ $O (n + m)$</li><li>è¾¹æƒ $&gt; 0$ æ‹“æ‰‘æ’åº $O (n + m)$</li></ul></li></ul></li></ul><h3 id="AcWing-ç³–æœ"><a href="#AcWing-ç³–æœ" class="headerlink" title="AcWing|ç³–æœ"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTE3MS8=">AcWing|ç³–æœ</span></h3><ul><li>å‡ ç§å…³ç³»ï¼Œè½¬åŒ–æˆæœ€é•¿è·¯éœ€è¦å¤§äºç­‰äº<ol><li>$A &#x3D; B$ ç­‰ä»·äº $A \ge B, B \ge A$</li><li>$A &lt; B$ ç­‰ä»·äº $B \ge A + 1$</li><li>$A \ge B$</li><li>$A &gt; B$ ç­‰ä»·äº $A \ge B + 1$</li><li>$A \le B$ ç­‰ä»·äº $B \ge A$</li></ol></li><li>å»ºç«‹è™šæ‹Ÿæºç‚¹ $x_0 &#x3D; 0$ï¼Œæœ€åæ‰€æœ‰çš„ $x_i$ éƒ½å¯ä»¥è½¬åŒ–æˆ $x_i \ge x_0 + 1$</li><li>spfa ä¸­ç”¨æ ˆï¼Œæ‰¾ç¯æ•ˆç‡æ›´é«˜</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef long long LL;
const int N = 100010, M = 300010;
int h[N], e[M], ne[M], w[M], idx;
LL dist[N];
int cnt[N];
bool st[N];
int n, m;
void add(int a, int b, int c) &#123;
    e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx++;
&#125;
bool spfa()&#123;
    stack&lt;int&gt; s;
    memset(dist, -0x3f, sizeof(dist));
    dist[0] = 0;
    s.push(0);
    st[0] = true;
    while(s.size())&#123;
        int t = s.top(); s.pop();
        st[t] = false;
        for(int i = h[t]; ~i; i = ne[i])&#123;
            int j = e[i];
            if(dist[j] &lt; dist[t] + w[i])&#123;
                dist[j] = dist[t] + w[i];
                cnt[j] = cnt[t] + 1;
                if(cnt[j] &gt;= n + 1) return false;
                if(!st[j])&#123;
                    st[j] = true;
                    s.push(j);
                &#125;
            &#125;
        &#125;
    &#125;
    return true;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    memset(h, -1, sizeof(h));
    cin &gt;&gt; n &gt;&gt; m;
    while(m--)&#123;
        int x, a, b;
        cin &gt;&gt; x &gt;&gt; a &gt;&gt; b;
        if(x == 1) add(b, a, 0), add(a, b, 0);
        else if(x == 2) add(a, b, 1);
        else if(x == 3) add(b, a, 0);
        else if(x == 4) add(b, a, 1);
        else add(a, b, 0);
    &#125;
    for(int i = 1; i &lt;= n; i++) add(0, i, 1);
    if(!spfa()) cout &lt;&lt; -1 &lt;&lt; &#39;\n&#39;;
    else&#123;
        LL ans = 0;
        for(int i = 1; i &lt;= n; i++) ans += dist[i];
        cout &lt;&lt; ans &lt;&lt; &#39;\n&#39;;
    &#125;
&#125;
</code></pre><h3 id="AcWing-åŒºé—´"><a href="#AcWing-åŒºé—´" class="headerlink" title="AcWing|åŒºé—´"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMzY0Lw==">AcWing|åŒºé—´</span></h3><ul><li>å› ä¸ºéœ€è¦ä½¿ç”¨å‰ç¼€å’Œï¼Œè¦æŠŠ $0$ ç©ºå‡ºæ¥ï¼Œæ‰€ä»¥éœ€è¦å°†æ•´ä½“ $+1$</li><li>$S_0 &#x3D; 0$ï¼Œ$S_i$ è¡¨ç¤º $1 \sim i$ ä¸­è¢«é€‰å‡ºçš„æ•°çš„ä¸ªæ•°ï¼Œéœ€è¦æ±‚ $S_{50001}$ çš„æœ€å°å€¼</li><li>æ¡ä»¶<ol><li>$S_i \ge S_{i - 1}$, $1 \ge i \ge 50001$</li><li>$S_i - S_{i - 1} \le 1$ å¯ä»¥è½¬æ¢æˆ $S_{i - 1} \ge S_i - 1$</li><li>$[a, b]$ ä¸­é€‰ $c$ ä¸ªï¼Œ$S_b - S_{a - 1} \ge c$</li></ol></li><li>ä¿è¯ä¸€å®šæœ‰è§£ï¼Œæ‰€ä»¥ä¸éœ€è¦åˆ¤æ–­æ˜¯å¦æœ‰ç¯</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef long long LL;
const int N = 50010, M = 150010;
int h[N], e[M], ne[M], w[M], idx;
int dist[N];
bool st[N];
void add(int a, int b, int c) &#123;
    e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx++;
&#125;
void spfa()&#123;
    queue&lt;int&gt; q;
    memset(dist, -0x3f, sizeof(dist));
    dist[0] = 0;
    q.push(0);
    st[0] = true;
    while(q.size())&#123;
        int t = q.front(); q.pop();
        st[t] = false;
        for(int i = h[t]; ~i; i = ne[i])&#123;
            int j = e[i];
            if(dist[j] &lt; dist[t] + w[i])&#123;
                dist[j] = dist[t] + w[i];
                if(!st[j])&#123;
                    st[j] = true;
                    q.push(j);
                &#125;
            &#125;
        &#125;
    &#125;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    int n;
    cin &gt;&gt; n;
    memset(h, -1, sizeof(h));
    for(int i = 1; i &lt; N; i++)&#123;
        add(i - 1, i, 0);
        add(i, i - 1, -1);
    &#125;
    for(int i = 1; i &lt;= n; i++)&#123;
        int a, b, c;
        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        a++, b++;
        add(a - 1, b, c);
    &#125;
    spfa();
    cout &lt;&lt; dist[50001] &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><h3 id="AcWing-æ’é˜Ÿå¸ƒå±€"><a href="#AcWing-æ’é˜Ÿå¸ƒå±€" class="headerlink" title="AcWing|æ’é˜Ÿå¸ƒå±€"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTE3Mi8=">AcWing|æ’é˜Ÿå¸ƒå±€</span></h3><ul><li>æ¡ä»¶ï¼Œ$x_i$ è¡¨ç¤ºç¬¬ $i$ å¤´ç‰›çš„ä½ç½®<ol><li>$x_i \le x_{i + 1}$, $1 \le i &lt; n$ï¼Œæ¯å¤´å¥¶ç‰›æŒ‰ç¼–å·æ’åº</li><li>$x_b \le x_a + L$</li><li>$x_a \le x_b - D$</li></ol></li><li>å»ºç«‹è™šæ‹Ÿæºç‚¹ $0$ï¼Œå‡å®šæ‰€æœ‰ç‰›éƒ½åœ¨ $\le 0$ å¤„ï¼Œå› æ­¤å¯ä»¥ä» $0$ å‘ä»»æ„ç‚¹è¿è¾¹</li><li>å¯¹äºç¬¬äºŒé—®ï¼Œå¯ä»¥ç›´æ¥è®© $x_1 &#x3D; 0$ï¼Œåˆ¤æ–­è¯¥æ¡ä»¶ä¸‹ $x_n$ èƒ½å¦å»æ— é™å¤§çš„å€¼</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 1010, M = 21010;

int h[N], e[M], w[M], ne[M], idx;
int dist[N], cnt[N];
bool st[N];
int n, m1, m2;

void add(int a, int b, int c)&#123;
    e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx++;
&#125;
bool spfa(int sz)&#123;
    memset(dist, 0x3f, sizeof(dist));
    memset(cnt, 0, sizeof(cnt));
    queue&lt;int&gt; q;
    for(int i = 1; i &lt;= sz; i++)&#123;
        dist[i] = 0;
        q.push(i);
        st[i] = true;
    &#125;
    while(q.size())&#123;
        int t = q.front(); q.pop();
        st[t] = false;
        for(int i = h[t]; ~i; i = ne[i])&#123;
            int j = e[i];
            if(dist[j] &gt; dist[t] + w[i])&#123;
                dist[j] = dist[t] + w[i];
                cnt[j] = cnt[t] + 1;
                if(cnt[j] &gt;= n) return false;
                if(!st[j])&#123;
                    st[j] = true;
                    q.push(j);
                &#125;
            &#125;
        &#125;
    &#125;
    return true;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    cin &gt;&gt; n &gt;&gt; m1 &gt;&gt; m2;
    memset(h, -1, sizeof(h));
    for(int i = 1; i &lt; n; i++) add(i + 1, i, 0);
    for(int i = 1; i &lt;= m1; i++)&#123;
        int a, b, c;
        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        if(a &gt; b) swap(a, b);
        add(a, b, c);
    &#125;
    for(int i = 1; i &lt;= m2; i++)&#123;
        int a, b, c;
        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        if(a &gt; b) swap(a, b);
        add(b, a, -c);
    &#125;
    if(!spfa(n)) cout &lt;&lt; -1 &lt;&lt; &#39;\n&#39;;
    else&#123;
        spfa(1);
        if(dist[n] == 0x3f3f3f3f) cout &lt;&lt; -2 &lt;&lt; &#39;\n&#39;;
        else cout &lt;&lt; dist[n] &lt;&lt; &#39;\n&#39;;
    &#125;
&#125;
</code></pre><h3 id="AcWing-é›‡ä½£æ”¶é“¶å‘˜"><a href="#AcWing-é›‡ä½£æ”¶é“¶å‘˜" class="headerlink" title="AcWing|é›‡ä½£æ”¶é“¶å‘˜"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMzk1Lw==">AcWing|é›‡ä½£æ”¶é“¶å‘˜</span></h3><hr><h2 id="æœ€è¿‘å…¬å…±ç¥–å…ˆ"><a href="#æœ€è¿‘å…¬å…±ç¥–å…ˆ" class="headerlink" title="æœ€è¿‘å…¬å…±ç¥–å…ˆ"></a>æœ€è¿‘å…¬å…±ç¥–å…ˆ</h2><ul><li>åœ¨ä¸€ä¸ªæœ‰æ ¹æ ‘å½“ä¸­ï¼Œæ±‚ä¸¤ä¸ªç‚¹æœ€è¿‘çš„ä¸€ä¸ªç¥–å…ˆï¼Œç‚¹è‡ªèº«ä¹Ÿç®—</li><li>æ–¹æ³•<ul><li>å‘ä¸Šæ ‡è®°æ³•ï¼Œ$O(n)$</li><li>å€å¢æ³•ï¼ˆåœ¨çº¿åšæ³•ï¼‰ï¼Œ$fa[i, j]$ è¡¨ç¤ºä» $i$ å¼€å§‹ï¼Œå‘ä¸Šèµ° $2^j$ æ­¥èƒ½èµ°åˆ°çš„èŠ‚ç‚¹ã€‚ $0 \le j \le logn$ï¼Œ$depth[i]$ è¡¨ç¤ºæ·±åº¦<ul><li>å…ˆå°†ä¸¤ä¸ªç‚¹è·³åˆ°åŒä¸€å±‚ï¼ŒäºŒè¿›åˆ¶æ‹¼å‡‘</li><li>è®©ä¸¤ä¸ªç‚¹åŒæ—¶å¾€ä¸Šè·³ï¼Œä¸€ç›´è·³åˆ°ä»–ä»¬æœ€è¿‘å…¬å…±ç¥–å…ˆçš„ä¸‹ä¸€å±‚</li><li>é¢„å¤„ç† $O(nlogn)$, æŸ¥è¯¢ $O(logn)$</li><li>å“¨å…µï¼šå¦‚æœä» $i$ å¼€å§‹è·³ $2^j$ æ­¥ä¼šè·³è¿‡æ ¹èŠ‚ç‚¹ï¼Œé‚£ä¹ˆ $fa[i, j] &#x3D; 0$ï¼Œ$depth[0] &#x3D; 0$</li></ul></li><li>Tarjanï¼Œç¦»çº¿æ±‚ LCAï¼Œ$O(n + m)$<ul><li>åœ¨æ·±åº¦ä¼˜å…ˆéå†æ—¶ï¼Œå°†æ‰€æœ‰ç‚¹åˆ†æˆä¸‰å¤§ç±»ï¼š<ol><li>å·²ç»éå†è¿‡ï¼Œä¸”å›æº¯è¿‡çš„ç‚¹</li><li>æ­£åœ¨æœç´¢çš„åˆ†æ”¯</li><li>è¿˜æœªæœç´¢åˆ°çš„ç‚¹</li></ol></li></ul></li><li>RMQ</li></ul></li></ul><h3 id="AcWing-ç¥–å­™è¯¢é—®"><a href="#AcWing-ç¥–å­™è¯¢é—®" class="headerlink" title="AcWing|ç¥–å­™è¯¢é—®"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTE3NC8=">AcWing|ç¥–å­™è¯¢é—®</span></h3><ul><li>å€å¢ LCA</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 400010, M = N * 2;
int h[N], e[M], ne[M], idx;
int depth[N], fa[N][16];
void add(int a, int b)&#123;
    e[idx] = b, ne[idx] = h[a], h[a] = idx++;
&#125;
void bfs(int root)&#123;
    memset(depth, 0x3f, sizeof(depth));
    queue&lt;int&gt; q;
    depth[root] = 1, depth[0] = 0;
    q.push(root);
    while(q.size())&#123;
        int t = q.front(); q.pop();
        for(int i = h[t]; ~i; i = ne[i])&#123;
            int j = e[i];
            if(depth[j] &gt; depth[t] + 1)&#123;
                depth[j] = depth[t] + 1;
                fa[j][0] = t;
                q.push(j);
                for(int k = 1; k &lt;= 15; k++)&#123;
                    fa[j][k] = fa[fa[j][k - 1]][k - 1];
                &#125;
            &#125;
        &#125;
    &#125;
&#125;
int lca(int a, int b)&#123;
    if(depth[a] &lt; depth[b]) swap(a, b);
    for(int i = 15; i &gt;= 0; i--)&#123;
        if(depth[fa[a][i]] &gt;= depth[b]) a = fa[a][i];
    &#125;
    if(a == b) return a;
    for(int i = 15; i &gt;= 0; i--)&#123;
        if(fa[a][i] != fa[b][i])&#123;
            a = fa[a][i];
            b = fa[b][i];
        &#125;
    &#125;
    return fa[a][0];
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    int n, m;
    memset(h, -1, sizeof(h));
    cin &gt;&gt; n;
    int root = 0;
    for(int i = 1; i &lt;= n; i++)&#123;
        int a, b; cin &gt;&gt; a &gt;&gt; b;
        if(b == -1) root = a;
        else add(a, b), add(b, a);
    &#125;
    bfs(root);
    cin &gt;&gt; m;
    while(m--)&#123;
        int a, b;
        cin &gt;&gt; a &gt;&gt; b;
        int p = lca(a, b);
        if(p == a) cout &lt;&lt; &quot;1\n&quot;;
        else if(p == b) cout &lt;&lt; &quot;2\n&quot;;
        else cout &lt;&lt; &quot;0\n&quot;;
    &#125;
&#125;
</code></pre><h3 id="AcWing-è·ç¦»"><a href="#AcWing-è·ç¦»" class="headerlink" title="AcWing|è·ç¦»"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTE3My8=">AcWing|è·ç¦»</span></h3><ul><li>targan ç¦»çº¿æ±‚ LCA</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef pair&lt;int, int&gt; PII;
const int N = 20010, M = N * 2;
int n, m;
int h[N], e[M], w[M], ne[M], idx;
int dist[N], p[N], ans[N], st[N];
vector&lt;PII&gt; query[N];
void add(int a, int b, int c)&#123;
    e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx++;
&#125;
int find(int x)&#123;
    if(p[x] != x) p[x] = find(p[x]);
    return p[x];
&#125;
void dfs(int u, int fa)&#123;
    for(int i = h[u]; ~i; i = ne[i])&#123;
        int j = e[i];
        if(j == fa) continue;
        dist[j] = dist[u] + w[i];
        dfs(j, u);
    &#125;
&#125;
void tarjan(int u)&#123;
    st[u] = 1;
    for(int i = h[u]; ~i; i = ne[i])&#123;
        int j = e[i];
        if(!st[j])&#123;
            tarjan(j);
            p[j] = u;
        &#125;
    &#125;
    for(auto [v, id] : query[u])&#123;
        if(st[v] == 2)&#123;
            int anc = find(v);
            ans[id] = dist[v] + dist[u] - 2 * dist[anc];
        &#125;
    &#125;
    st[u] = 2;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    memset(h, -1, sizeof(h));
    cin &gt;&gt; n &gt;&gt; m;
    for(int i = 0; i &lt; n - 1; i += 1)&#123;
        int a, b, c;
        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        add(a, b, c);
        add(b, a, c);
    &#125;
    for(int i = 0; i &lt; m; i += 1)&#123;
        int a, b;
        cin &gt;&gt; a &gt;&gt; b;
        if(a != b)&#123;
            query[a].push_back(&#123;b, i&#125;);
            query[b].push_back(&#123;a, i&#125;);
        &#125;
    &#125;
    for(int i = 1; i &lt;= n; i++) p[i] = i;
    dfs(1, -1);
    tarjan(1);
    for(int i = 0; i &lt; m; i++) cout &lt;&lt; ans[i] &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><h3 id="AcWing-æ¬¡å°ç”Ÿæˆæ ‘ğŸŒ–"><a href="#AcWing-æ¬¡å°ç”Ÿæˆæ ‘ğŸŒ–" class="headerlink" title="AcWing|æ¬¡å°ç”Ÿæˆæ ‘ğŸŒ–"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMzU4Lw==">AcWing|æ¬¡å°ç”Ÿæˆæ ‘</span>ğŸŒ–</h3><ul><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9zb2x1dGlvbi9jb250ZW50LzI0NjA5Lw==">(kruskal+lca+è¯æ˜)</span></li><li>å€å¢ LCA $O(logn)$ æ±‚æ–°åŠ å…¥éæ ‘è¾¹è¾¹çš„ä¸¤ç‚¹ $a, b$ é—´çš„æœ€å¤§è¾¹å’Œæ¬¡å¤§è¾¹</li><li>é¢„å¤„ç†æ¯ä¸ªç‚¹ $i$ è·³ $2^j$ åçš„çˆ¶èŠ‚ç‚¹ $fa[i][j]$<ul><li>åœ¨ $x$ å’Œ $y$ å‘ $lca[x][y]$ è·³çš„è¿‡ç¨‹ä¸­ç»´æŠ¤å„è‡ªè·¯å¾„ä¸­çš„æœ€å¤§å€¼ $d1[x \to lca], d1[y \to lca]$ å’Œæ¬¡å¤§å€¼ $d2[x \to lca], d2[y \to lca]$</li></ul></li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef long long LL;
const int N = 100010, M = 300010, INF = 0x3f3f3f3f;
int n, m;
struct Edge&#123;
    int a, b, w;
    bool f;
    bool operator &lt; (const Edge &amp;t) const&#123;
        return w &lt; t.w;
    &#125;
&#125;edges[M];
int p[N];
int h[N], e[M], ne[M], w[M], idx;
int depth[N], fa[N][17], d1[N][17], d2[N][17];
void add(int a, int b, int c)&#123;
    e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx++;
&#125;
int find(int x)&#123;
    if(x != p[x]) p[x] = find(p[x]);
    return p[x];
&#125;
LL kruskal()&#123;
    for(int i = 1; i &lt;= n; i++) p[i] = i;
    sort(edges, edges + m);
    LL ans = 0;
    for(int i = 0; i &lt; m; i++)&#123;
        int a = find(edges[i].a), b = find(edges[i].b), w = edges[i].w;
        if(a != b)&#123;
            p[a] = b;
            ans += w;
            edges[i].f = 1;
        &#125;
    &#125;
    return ans;
&#125;
void build()&#123;
    for(int i = 0; i &lt; m; i++)&#123;
        if(edges[i].f)&#123;
            auto [a, b, w, _] = edges[i];
            add(a, b, w), add(b, a, w);
        &#125;
    &#125;
&#125;
void bfs()&#123;
    memset(depth, 0x3f, sizeof(depth));
    depth[0] = 0, depth[1] = 1;
    queue&lt;int&gt; q;
    q.push(1);
    while(q.size())&#123;
        int t = q.front(); q.pop();
        for(int i = h[t]; ~i; i = ne[i])&#123;
            int j = e[i];
            if(depth[j] &gt; depth[t] + 1)&#123;
                depth[j] = depth[t] + 1;
                q.push(j);
                fa[j][0] = t;
                d1[j][0] = w[i], d2[j][0] = -INF;
                for(int k = 1; k &lt;= 16; k++)&#123;
                    int anc = fa[j][k - 1];
                    fa[j][k] = fa[anc][k - 1];
                    int d[4] = &#123;d1[j][k - 1], d2[j][k - 1], d1[anc][k - 1], d2[anc][k - 1]&#125;;
                    d1[j][k] = d2[j][k] = -INF;
                    for(int u = 0; u &lt; 4; u++)&#123;
                        int dis = d[u];
                        if(dis &gt; d1[j][k]) d2[j][k] = d1[j][k], d1[j][k] = dis;
                        else if(dis != d1[j][k] &amp;&amp; dis &gt; d2[j][k]) d2[j][k] = dis;
                    &#125;
                &#125;
            &#125;
        &#125;
    &#125;
&#125;
int lca(int a, int b, int w)&#123;
    static int dist[N * 2];
    int cnt = 0;
    if(depth[a] &lt; depth[b]) swap(a, b);
    for(int k = 16; k &gt;= 0; k--)&#123;
        if(depth[fa[a][k]] &gt;= depth[b])&#123;
            dist[cnt++] = d1[a][k];
            dist[cnt++] = d2[a][k];
            a = fa[a][k];
        &#125;
    &#125;
    if(a != b)&#123;
        for(int k = 16; k &gt;= 0; k--)&#123;
            if(fa[a][k] != fa[b][k])&#123;
                dist[cnt++] = d1[a][k];
                dist[cnt++] = d2[a][k];
                dist[cnt++] = d1[b][k];
                dist[cnt++] = d2[b][k];
                a = fa[a][k], b = fa[b][k];
            &#125;
        &#125;
        dist[cnt++] = d1[a][0];
        dist[cnt++] = d1[b][0];
    &#125;
    int dist1 = -INF, dist2 = -INF;
    for(int i = 0; i &lt; cnt; i++)&#123;
        int d = dist[i];
        if(d &gt; dist1) dist2 = dist1, dist1 = d;
        else if(d != dist1 &amp;&amp; d &gt; dist2) dist2 = d;
    &#125;
    if(w &gt; dist1) return w - dist1;
    if(w &gt; dist2) return w - dist2;
    return INF;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    memset(h, -1, sizeof(h));
    cin &gt;&gt; n &gt;&gt; m;
    for(int i = 0; i &lt; m; i++)&#123;
        int a, b, c;
        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        edges[i] = &#123;a, b, c&#125;;
    &#125;
    LL sum = kruskal();
    build();
    bfs();
    LL ans = 1e18;
    for(int i = 0; i &lt; m; i++)&#123;
        if(!edges[i].f)&#123;
            auto [a, b, c, _] = edges[i];
            ans = min(ans, sum + lca(a, b, c));
        &#125;
    &#125;
    cout &lt;&lt; ans &lt;&lt; endl;
&#125;
</code></pre><hr><h2 id="æœ‰å‘å›¾çš„å¼ºè¿é€šåˆ†é‡"><a href="#æœ‰å‘å›¾çš„å¼ºè¿é€šåˆ†é‡" class="headerlink" title="æœ‰å‘å›¾çš„å¼ºè¿é€šåˆ†é‡"></a>æœ‰å‘å›¾çš„å¼ºè¿é€šåˆ†é‡</h2><ul><li>å¯¹äºä¸€ä¸ªæœ‰å‘å›¾ï¼Œè¿é€šåˆ†é‡ï¼šå¯¹äºåˆ†é‡ä¸­ä»»æ„ä¸¤ç‚¹ $uï¼Œv$ï¼Œå¿…ç„¶å¯ä»¥ä» $u$ èµ°åˆ° $v$ï¼Œä¸”ä» $v$ èµ°åˆ° $u$</li><li>å¼ºè¿é€šåˆ†é‡ï¼šæå¤§è¿é€šåˆ†é‡</li><li>æœ‰å‘å›¾é€šè¿‡ç¼©ç‚¹æˆä¸ºä¸€ä¸ªæœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰ï¼Œï¼ˆæ‹“æ‰‘å›¾ï¼‰<ul><li>ç¼©ç‚¹ï¼šå°†æ‰€æœ‰è¿é€šåˆ†é‡ç¼©æˆä¸€ä¸ªç‚¹</li></ul></li><li>é€šå¸¸å°†ä¸€ä¸ªå›¾ï¼Œå¯¹å…¶æ±‚å¼ºè¿é€šåˆ†é‡ï¼Œç¼©ç‚¹æˆä¸€ä¸ªæ‹“æ‰‘å›¾æ–¹ä¾¿æ±‚è§£</li><li>å¼ºè¿é€šåˆ†é‡çš„æ±‚æ³•<ul><li>DFSï¼Œå°†è¾¹åˆ†ä¸ºå››ç±»<ul><li>æ ‘æè¾¹ï¼Œå‰å‘è¾¹ï¼Œåå‘è¾¹ï¼Œæ¨ªå‰è¾¹ ï¼ˆè¿å‘å·²è¢« DFS çš„å…¶ä»–æ ‘æçš„è¾¹ï¼‰</li></ul></li><li>åˆ¤æ–­æ˜¯å¦åœ¨å¼ºè¿é€šåˆ†é‡ä¸­<ul><li>å­˜åœ¨åå‘è¾¹æŒ‡å‘ç¥–å…ˆèŠ‚ç‚¹</li><li>å…ˆèµ°åˆ°æ¨ªå‰è¾¹å†èµ°åˆ°ç¥–å…ˆèŠ‚ç‚¹</li></ul></li><li>Tarjan ç®—æ³•æ±‚å¼ºè¿é€šåˆ†é‡ï¼ˆSCCï¼‰<ul><li>å¼•å…¥æ—¶é—´æˆ³ï¼Œå¯¹æ¯ä¸ªç‚¹å®šä¹‰ä¸¤ä¸ªæ—¶é—´æˆ³ï¼š$dfn[u]$ è¡¨ç¤ºéå†åˆ° $u$ çš„æ—¶é—´æˆ³ï¼Œ$low[u]$ è¡¨ç¤ºä» $u$ å¼€å§‹èµ°ï¼Œæ‰€èƒ½éå†åˆ°çš„æœ€å°æ—¶é—´æˆ³æ˜¯ä»€ä¹ˆ</li><li>$u$ æ˜¯å…¶æ‰€åœ¨çš„å¼ºè¿é€šåˆ†é‡çš„æœ€é«˜ç‚¹ï¼Œç­‰ä»·äº $dfn[u] &#x3D; low[u]$</li><li>ç¼©ç‚¹ï¼Œéå†æ‰€æœ‰ç‚¹ï¼Œå†éå†æ‰€æœ‰é‚»ç‚¹ï¼Œå¦‚æœ $i$ å’Œ $j$ ä¸åœ¨åŒä¸€ä¸ªè¿é€šåˆ†é‡ä¸­å°±åŠ ä¸€æ¡æ–°è¾¹ $id_i \to id_j$</li><li>è¿é€šåˆ†é‡ç¼–å·é€’å‡çš„é¡ºåºä¸€å®šæ˜¯æ‹“æ‰‘åº</li></ul></li></ul></li><li>æ¨¡æ¿</li></ul><pre><code class="cpp">void tarjan(int u)&#123;
    dfn[u] = low[u] = ++timestamp;
    stk[++top] = u, in_stk[u] = true;
    for(int i = h[u]; ~i; i = ne[i])&#123;
        int j = e[i];
        if(!dfn[j])&#123;
            tarjan(j);
            low[u] = min(low[u], low[j]);
        &#125;else if(in_stk[j])&#123;
            low[u] = min(low[u], dfn[j]);
        &#125;
    &#125;
    
    if(dfn[u] == low[u])&#123;
        int y;
        ++scc_cnt;
        do&#123;
            y = stk[top--];
            in_stk[y] = false;
            id[y] = scc_cnt;
        &#125;while(y != u);
    &#125;
&#125;
</code></pre><h3 id="AcWing-å—æ¬¢è¿çš„ç‰›"><a href="#AcWing-å—æ¬¢è¿çš„ç‰›" class="headerlink" title="AcWing|å—æ¬¢è¿çš„ç‰›"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTE3Ni8=">AcWing|å—æ¬¢è¿çš„ç‰›</span></h3><ul><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9zb2x1dGlvbi9jb250ZW50LzIwNjc4Lw==">è¯¦ç»†é¢˜è§£</span></li><li>åœ¨æ‹“æ‰‘å›¾ä¸­åªè¦å­˜åœ¨ä¸¤ä¸ªåŠä»¥ä¸Šå‡ºåº¦ä¸º $0$ çš„ç‚¹ï¼Œåˆ™æ— è§£ï¼Œè‹¥åªå­˜åœ¨ä¸€ä¸ªå‡ºåº¦ä¸º $0$ çš„ç‚¹ï¼Œåˆ™æ‰€æœ‰ç‚¹éƒ½å¯ä»¥åˆ°è¾¾å®ƒï¼Œæ•…è¯¥é¢˜å¯æ±‚å¼ºè¿é€šåˆ†é‡ï¼Œæ‰¾åˆ°é‚£ä¸ªå‡ºåº¦ä¸º $0$ çš„ç‚¹ï¼Œå…¶è¿é€šåˆ†é‡ä¸­ç‚¹çš„ä¸ªæ•°å³ä¸ºç­”æ¡ˆ</li></ul><pre><code class="cpp">
#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 10010, M = 50010;
int n, m;
int h[N], e[M], ne[M], idx;
int dfn[N], low[N], timestamp;
int stk[N], top;
bool in_stk[N];
int id[N], scc_cnt, sz[N];
int dout[N];
void add(int a, int b)&#123;
    e[idx] = b, ne[idx] = h[a], h[a] = idx++;
&#125;
void tarjan(int u)&#123;
    dfn[u] = low[u] = ++timestamp;
    stk[++top] = u, in_stk[u] = true;
    for(int i = h[u]; ~i; i = ne[i])&#123;
        int j = e[i];
        if(!dfn[j])&#123;
            tarjan(j);
            low[u] = min(low[u], low[j]);
        &#125;else if(in_stk[j])&#123;
            low[u] = min(low[u], dfn[j]);
        &#125;
    &#125;
    if(dfn[u] == low[u])&#123;
        ++scc_cnt;
        int y;
        do&#123;
            y = stk[top--];
            in_stk[y] = false;
            id[y] = scc_cnt;
            sz[scc_cnt]++;
        &#125;while(y != u);
    &#125;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    cin &gt;&gt; n &gt;&gt; m;
    memset(h, -1, sizeof(h));
    while(m--)&#123;
        int a, b; cin &gt;&gt; a &gt;&gt; b;
        add(a, b);
    &#125;
    for(int i = 1; i &lt;= n; i++)&#123;
        if(!dfn[i]) tarjan(i);
    &#125;
    for(int i = 1; i &lt;= n; i++)&#123;
        for(int j = h[i]; ~j; j = ne[j])&#123;
            int k = e[j];
            int a = id[i], b = id[k];
            if(a != b) dout[a]++;
        &#125;
    &#125;
    int zeros = 0, sum = 0;
    for(int i = 1; i &lt;= scc_cnt; i++)&#123;
        if(!dout[i])&#123;
            zeros++;
            sum += sz[i];
            if(zeros &gt; 1)&#123;
                sum = 0;
                break;
            &#125;
        &#125;
    &#125;
    cout &lt;&lt; sum &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><h3 id="AcWing-å­¦æ ¡ç½‘ç»œ"><a href="#AcWing-å­¦æ ¡ç½‘ç»œ" class="headerlink" title="AcWing|å­¦æ ¡ç½‘ç»œ"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMzY5Lw==">AcWing|å­¦æ ¡ç½‘ç»œ</span></h3><ul><li>ç¬¬ä¸€é—®ï¼Œç¼©ç‚¹åæ±‚å…¥åº¦ä¸º $0$ çš„èµ·ç‚¹çš„ä¸ªæ•°</li><li>ç¬¬äºŒé—®ï¼Œå…¥åº¦ä¸º $0$ å’Œå‡ºåº¦ä¸º $0$ çš„ç‚¹çš„ä¸ªæ•°çš„æœ€å¤§å€¼ï¼Œå› ä¸ºå¼ºè¿é€šåˆ†é‡å†…éƒ¨ä»»æ„ä¸€ç‚¹éƒ½å¯ä»¥åˆ°è¾¾ï¼Œå¦‚æœæ•´ä¸ªå›¾æ˜¯ä¸€ä¸ªå¼ºè¿é€šåˆ†é‡ï¼Œåˆ™ä¸éœ€è¦è¿è¾¹<ul><li>è¯æ˜<ul><li>èµ·ç‚¹å’Œç»ˆç‚¹å¯ä»¥å¯¹ç§°çœ‹ï¼Œæ•…åªè¯æ˜ä¸€è¾¹ï¼Œä¸å¦¨è®¾ $|P| \le |Q|$</li><li>å¦‚æœ $|P| &#x3D; 1$ï¼Œåœ¨æœ‰é™æ­¥ä¹‹å†…ï¼Œæ¯ä¸€ä¸ªç»ˆç‚¹éƒ½å¯ä»¥è¢«èµ°åˆ°ï¼Œå› æ­¤åªéœ€è¦ä»æ¯ä¸€ä¸ªç»ˆç‚¹è¿ä¸€æ¡åˆ°èµ·ç‚¹çš„è¾¹</li><li>å¦‚æœ $|P| &gt; 1$ï¼Œåˆ™ä¸€å®šè‡³å°‘æœ‰ $P_1 \to Q_1, P_2 \to Q_2$ï¼Œè€ƒè™‘åè¯æ³•ï¼Œå¦‚æœæ‰¾ä¸åˆ°è¿™æ ·çš„ä¸¤ä¸ªç‚¹ï¼Œæ‰€æœ‰çš„èµ·ç‚¹éƒ½åªèƒ½èµ°åˆ°ä¸€ä¸ªç»ˆç‚¹ï¼Œè€Œå…¶ä»–çš„ç»ˆç‚¹å¿…ç„¶èƒ½å¤Ÿæ‰¾åˆ°ä¸€ä¸ªèµ·ç‚¹ï¼Œæ•…çŸ›ç›¾ã€‚åŒæ—¶ï¼Œåªè¦è¿ä¸€æ¡è¾¹ï¼Œå°±å¯ä»¥è®©åŸå…ˆèµ·ç‚¹å’Œç»ˆç‚¹ä¸¤ä¸ªé›†åˆä¸­çš„ç‚¹æ•°éƒ½å‡ä¸€</li></ul></li></ul></li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 110, M = 50010;
int h[N], e[M], ne[M], idx;
int dfn[N], low[N], timestamp;
int stk[N], top;
bool in_stk[N];
int id[N], scc_cnt;
int din[N], dout[N];
void add(int a, int b)&#123;
    e[idx] = b, ne[idx] = h[a], h[a] = idx++;
&#125;
void tarjan(int u)&#123;
    dfn[u] = low[u] = ++timestamp;
    stk[++top] = u;
    in_stk[u] = true;
    for(int i = h[u]; ~i; i = ne[i])&#123;
        int j = e[i];
        if(!dfn[j])&#123;
            tarjan(j);
            low[u] = min(low[u], low[j]);
        &#125;else if(in_stk[j])&#123;
            low[u] = min(low[u], dfn[j]);
        &#125;
    &#125;
    if(dfn[u] == low[u])&#123;
        int y;
        ++scc_cnt;
        do&#123;
            y = stk[top--];
            in_stk[y] = false;
            id[y] = scc_cnt;
        &#125;while(y != u);
    &#125;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    memset(h, -1, sizeof(h));
    int n; cin &gt;&gt; n;
    for(int i = 1; i &lt;= n; i++)&#123;
        int x;
        while(cin &gt;&gt; x, x)&#123;
            add(i, x);
        &#125;
    &#125;
    for(int i = 1; i &lt;= n; i++)&#123;
        if(!dfn[i]) tarjan(i);
    &#125;
    for(int i = 1; i &lt;= n; i++)&#123;
        for(int j = h[i]; ~j; j = ne[j])&#123;
            int k = e[j];
            int a = id[i], b = id[k];
            if(a != b)&#123;
                dout[a]++;
                din[b]++;
            &#125;
        &#125;
    &#125;
    int cnt1 = 0, cnt2 = 0;
    for(int i = 1; i &lt;= scc_cnt; i++)&#123;
        if(!dout[i]) cnt2++;
        if(!din[i]) cnt1++;
    &#125;
    cout &lt;&lt; cnt1 &lt;&lt; &#39;\n&#39;;
    if(scc_cnt == 1) cout &lt;&lt; 0 &lt;&lt; &#39;\n&#39;;
    else cout &lt;&lt; max(cnt1, cnt2) &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><h3 id="AcWing-æœ€å¤§åŠè¿é€šå­å›¾"><a href="#AcWing-æœ€å¤§åŠè¿é€šå­å›¾" class="headerlink" title="AcWing|æœ€å¤§åŠè¿é€šå­å›¾"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTE3Ny8=">AcWing|æœ€å¤§åŠè¿é€šå­å›¾</span></h3><ul><li>å¼ºè¿é€šåˆ†é‡ä¸€å®šæ˜¯åŠè¿é€š</li><li>tarjanï¼Œç¼©ç‚¹ï¼Œå»ºå›¾ï¼ˆç»™è¾¹æ’é‡ï¼‰ï¼Œä¹‹åæŒ‰ç…§æ‹“æ‰‘åºé€’æ¨ï¼ˆèŠ‚ç‚¹ç¼–å·å€’ç€å³ä¸ºæ‹“æ‰‘åºï¼‰</li><li>æ±‚ <strong>æœ€å¤§åŠè¿é€šå­å›¾</strong> ç­‰ä»·äºæ±‚ <strong>æœ€é•¿æ— åˆ†å‰é“¾</strong> ï¼Œé“¾ä¸Šæƒé‡æ˜¯è¿é€šåˆ†é‡é‡Œçš„èŠ‚ç‚¹æ•°</li><li>æ±‚ <strong>æœ€é•¿é“¾æ–¹æ¡ˆæ•°</strong> ç­‰ä»·äº <strong>æ‹“æ‰‘å›¾æ±‚æœ€é•¿è·¯</strong> ï¼ˆæƒé‡æ˜¯ç»“ç‚¹æ•°ï¼‰ï¼Œä¸èƒŒåŒ…é—®é¢˜æ±‚æ–¹æ¡ˆæ•°ç›¸ç±»ä¼¼</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef long long LL;
const int N = 100010, M = 2000010;
int n, m, mod;
int h[N], hs[N], e[M], ne[M], idx;
int dfn[N], low[N], timestamp;
int stk[N], top;
bool in_stk[N];
int id[N], scc_cnt, sz[N];
int f[N], g[N];
void add(int h[], int a, int b)&#123;
    e[idx] = b, ne[idx] = h[a], h[a] = idx++;
&#125;
void tarjan(int u)&#123;
    dfn[u] = low[u] = ++timestamp;
    stk[++top] = u, in_stk[u] = true;
    for(int i = h[u]; ~i; i = ne[i])&#123;
        int j = e[i];
        if(!dfn[j])&#123;
            tarjan(j);
            low[u] = min(low[u], low[j]);
        &#125;else if(in_stk[j])&#123;
            low[u] = min(low[u], dfn[j]);
        &#125;
    &#125;
    if(dfn[u] == low[u])&#123;
        ++scc_cnt;
        int y;
        do&#123;
            y = stk[top--];
            in_stk[y] = false;
            id[y] = scc_cnt;
            sz[scc_cnt]++;
        &#125;while(y != u);
    &#125;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    cin &gt;&gt; n &gt;&gt; m &gt;&gt; mod;
    memset(h, -1, sizeof(h));
    memset(hs, -1, sizeof(hs));
    while(m--)&#123;
        int a, b; cin &gt;&gt; a &gt;&gt; b;
        add(h, a, b);
    &#125;
    for(int i = 1; i &lt;= n; i++)&#123;
        if(!dfn[i]) tarjan(i);
    &#125;
    unordered_set&lt;LL&gt; st; // (u, v) -&gt; u * 1000000 + v;
    for(int i = 1; i &lt;= n; i++)&#123;
        for(int j = h[i]; ~j; j = ne[j])&#123;
            int k = e[j];
            int a = id[i], b = id[k];
            LL tmp = a * 1000000ll + b;
            if(a != b &amp;&amp; !st.count(tmp))&#123;
                st.insert(tmp);
                add(hs, a, b);
            &#125;
        &#125;
    &#125;
    for(int i = scc_cnt; i; i--)&#123;
        if(!f[i])&#123;
            f[i] = sz[i];
            g[i] = 1;
        &#125;
        for(int j = hs[i]; ~j; j = ne[j])&#123;
            int k = e[j];
            if(f[k] &lt; f[i] + sz[k])&#123;
                f[k] = f[i] + sz[k];
                g[k] = g[i];
            &#125;else if(f[k] == f[i] + sz[k])&#123;
                g[k] = (g[k] + g[i]) % mod;
            &#125;
        &#125;
    &#125;
    int maxf = 0, sum = 0;
    for(int i = 1; i &lt;= scc_cnt; i++)&#123;
        if(maxf &lt; f[i])&#123;
            maxf = f[i];
            sum = g[i];
        &#125;else if(maxf == f[i])&#123;
            sum = (sum + g[i]) % mod;
        &#125;
    &#125;
    cout &lt;&lt; maxf &lt;&lt; &#39;\n&#39; &lt;&lt; sum &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><h3 id="AcWing-é“¶æ²³"><a href="#AcWing-é“¶æ²³" class="headerlink" title="AcWing|é“¶æ²³"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMzcwLw==">AcWing|é“¶æ²³</span></h3><ul><li>ä¸å·®åˆ†çº¦æŸ-ç³–æœç±»ä¼¼ï¼Œè¿™é‡Œä½¿ç”¨å¼ºè¿é€šåˆ†é‡è§£æ³•ï¼Œæ±‚æœ€å°å€¼è½¬åŒ–æˆæ±‚æœ€é•¿è·¯</li><li>å¼ºè¿é€šåˆ†é‡æ—¶é—´å¤æ‚åº¦ç¨³å®šçº¿æ€§</li><li>æ‰€ä»¥è¾¹æƒå¤§äºç­‰äº $0$ ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨æ­£ç¯ï¼Œæ•…å¯ä»¥ä½¿ç”¨å¼ºè¿é€šåˆ†é‡è§£ï¼Œå¯¹äºå¼ºè¿é€šåˆ†é‡ä¸­ä»»æ„ä¸¤ç‚¹ï¼Œåªè¦è¾¹æƒå¤§äº $0$ åˆ™å¿…å®šå­˜åœ¨æ­£ç¯</li><li>tarjanï¼Œç¼©ç‚¹å»ºå›¾ï¼Œæ‹“æ‰‘åºé€’æ¨æ±‚æœ€é•¿è·¯</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef long long LL;
const int N = 100010, M = 600010;
int n, m;
int h[N], hs[N], e[M], ne[M], w[M], idx;
int dfn[N], low[N], timestamp;
bool in_stk[N];
int stk[N], top;
int id[N], scc_cnt, sz[N];
int dist[N];
void add(int h[], int a, int b, int c)&#123;
    e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx++;
&#125;
void tarjan(int u)&#123;
    dfn[u] = low[u] = ++timestamp;
    stk[++top] = u, in_stk[u] = true;
    for(int i = h[u]; ~i; i = ne[i])&#123;
        int j = e[i];
        if(!dfn[j])&#123;
            tarjan(j);
            low[u] = min(low[u], low[j]);
        &#125;else if(in_stk[j])&#123;
            low[u] = min(low[u], dfn[j]);
        &#125;
    &#125;
    if(dfn[u] == low[u])&#123;
        ++scc_cnt;
        int y;
        do&#123;
            y = stk[top--];
            in_stk[y] = false;
            id[y] = scc_cnt;
            sz[scc_cnt]++;
        &#125;while(y != u);
    &#125;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    cin &gt;&gt; n &gt;&gt; m;
    memset(h, -1, sizeof(h));
    memset(hs, -1, sizeof(hs));
    for(int i = 1; i &lt;= n; i++)&#123;
        add(h, 0, i, 1);
    &#125;
    while(m--)&#123;
        int t, a, b;
        cin &gt;&gt; t &gt;&gt; a &gt;&gt; b;
        if(t == 1) add(h, a, b, 0), add(h, b, a, 0);
        else if(t == 2) add(h, a, b, 1);
        else if(t == 3) add(h, b, a, 0);
        else if(t == 4) add(h, b, a, 1);
        else add(h, a, b, 0);
    &#125;
    tarjan(0);
    bool ok = 1;
    for(int i = 0; i &lt;= n; i++)&#123;
        for(int j = h[i]; ~j; j = ne[j])&#123;
            int k = e[j];
            int a = id[i], b = id[k];
            if(a == b)&#123;
                if(w[j] &gt; 0)&#123;
                    ok = 0;
                    break;
                &#125;
            &#125;else&#123;
                add(hs, a, b, w[j]);
            &#125;
        &#125;
        if(!ok) break; 
    &#125;
    if(!ok) cout &lt;&lt; &quot;-1\n&quot;;
    else&#123;
        for(int i = scc_cnt; i; i--)&#123;
            for(int j = hs[i]; ~j; j = ne[j])&#123;
                int k = e[j];
                dist[k] = max(dist[k], dist[i] + w[j]);
            &#125;
        &#125;
        LL ans = 0;
        for(int i = 1; i &lt;= scc_cnt; i++)&#123;
            ans += 1ll * dist[i] * sz[i];
        &#125;
        cout &lt;&lt; ans &lt;&lt; &#39;\n&#39;;
    &#125;
&#125;
</code></pre><hr><h2 id="æ— å‘å›¾çš„åŒè¿é€šåˆ†é‡"><a href="#æ— å‘å›¾çš„åŒè¿é€šåˆ†é‡" class="headerlink" title="æ— å‘å›¾çš„åŒè¿é€šåˆ†é‡"></a>æ— å‘å›¾çš„åŒè¿é€šåˆ†é‡</h2><ul><li>åˆ«ç§°ï¼šé‡è¿é€šåˆ†é‡ ï¼ˆTarjan å‘æ˜ï¼‰</li><li>åŒè¿é€šåˆ†é‡<ol><li>è¾¹åŒè¿é€šåˆ†é‡ e-DCC<ul><li>ä¸å«æœ‰æ¡¥çš„è¿é€šåŒºåŸŸï¼Œä¸ç®¡åˆ æ‰å“ªæ¡è¾¹ï¼Œè¿™ä¸ªå›¾éƒ½è¿˜æ˜¯è¿é€šçš„</li><li>åœ¨ä¸€ä¸ªè¾¹çš„åŒè¿é€šåˆ†é‡é‡Œï¼Œä»»æ„ä¸¤ç‚¹é—´éƒ½åŒ…å«ä¸¤ä¸ªä¸ç›¸äº¤çš„è·¯å¾„ï¼Œå³æ²¡æœ‰å…¬å…±è¾¹</li><li>æå¤§çš„ä¸åŒ…æ‹¬æ¡¥çš„è¿é€šå—</li></ul></li><li>ç‚¹åŒè¿é€šåˆ†é‡ v-DCC<ul><li>å‰²ç‚¹ï¼šä¸€ä¸ªå›¾ä¸­åˆ æ‰ä¸€ä¸ªç‚¹åå˜æˆä¸è¿é€šå›¾ï¼Œè¿™ä¸ªç‚¹è¢«ç§°ä¸ºå‰²ç‚¹</li><li>æå¤§çš„ä¸åŒ…æ‹¬å‰²ç‚¹çš„è¿é€šå—</li><li>æ¯ä¸ªå‰²ç‚¹è‡³å°‘å±äºä¸¤ä¸ªç‚¹åŒè¿é€šåˆ†é‡</li></ul></li></ol></li><li>Tarjan ç®—æ³•<ul><li>è¾¹åŒè¿é€šåˆ†é‡<ul><li>å¼•å…¥æ—¶é—´æˆ³ï¼Œå¯¹æ¯ä¸ªç‚¹å®šä¹‰ä¸¤ä¸ªæ—¶é—´æˆ³ï¼š$dfn[u]$ è¡¨ç¤ºéå†åˆ° $u$ çš„æ—¶é—´æˆ³ï¼Œ$low[u]$ è¡¨ç¤ºä» $u$ å¼€å§‹èµ°ï¼Œæ‰€èƒ½éå†åˆ°çš„æœ€å°æ—¶é—´æˆ³æ˜¯ä»€ä¹ˆ</li><li>æ— æ¨ªå‰è¾¹</li><li>å¦‚ä½•æ‰¾åˆ°æ¡¥<ul><li>æ¡¥ $(x&#x2F;leftrightarrow y)$ $&#x2F;leftrightarrow$ $dfn[x] &lt; low[y]$</li></ul></li><li>å¦‚ä½•æ‰¾åˆ°æ‰€æœ‰è¾¹çš„åŒè¿é€šåˆ†é‡<ul><li>å°†æ‰€æœ‰æ¡¥åˆ æ‰</li><li>stack $dfn[x] &#x3D; low[x]$</li></ul></li></ul></li><li>ç‚¹åŒè¿é€šåˆ†é‡<ul><li>å¼•å…¥æ—¶é—´æˆ³ï¼Œå¯¹æ¯ä¸ªç‚¹å®šä¹‰ä¸¤ä¸ªæ—¶é—´æˆ³ï¼š$dfn[u]$ è¡¨ç¤ºéå†åˆ° $u$ çš„æ—¶é—´æˆ³ï¼Œ$low[u]$ è¡¨ç¤ºä» $u$ å¼€å§‹èµ°ï¼Œæ‰€èƒ½éå†åˆ°çš„æœ€å°æ—¶é—´æˆ³æ˜¯ä»€ä¹ˆå¼•å…¥æ—¶é—´æˆ³</li><li>å¦‚ä½•æ‰¾åˆ°å‰²ç‚¹<ul><li>$dfn[x] \le low[y]$<ol><li>$x$ ä¸æ˜¯æ ¹èŠ‚ç‚¹ï¼Œé‚£ä¹ˆ $x$ æ˜¯å‰²ç‚¹</li><li>$x$ æ˜¯æ ¹èŠ‚ç‚¹ï¼Œè‡³å°‘æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ $y_i$ï¼Œ$dfn[x] \le low[y_i]$</li></ol></li></ul></li><li>å¦‚ä½•æ±‚ç‚¹åŒè¿é€šåˆ†é‡<pre><code class="cpp">stk[]
if(dfn[x] &lt;= low[y])&#123;
    cnt++;
    if(x != root || cnt &gt; 1) xä¸ºå‰²ç‚¹
    stk.pop(j) while(j != y) å°†æ ˆä¸­å…ƒç´ å¼¹å‡ºè‡³ y ä¸ºæ­¢
    ä¸” x ä¹Ÿå±äºè¯¥åŒè¿é€šåˆ†é‡
&#125;
</code></pre></li></ul></li></ul></li></ul><h3 id="AcWing-å†—ä½™è·¯å¾„"><a href="#AcWing-å†—ä½™è·¯å¾„" class="headerlink" title="AcWing|å†—ä½™è·¯å¾„"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMzk3Lw==">AcWing|å†—ä½™è·¯å¾„</span></h3><ul><li>ç»™å®šä¸€ä¸ªæ— å‘è¿é€šå›¾ï¼Œé—®æœ€å°‘åŠ å‡ æ¡è¾¹ï¼Œå¯ä»¥å°†å…¶å˜æˆä¸€ä¸ªè¾¹åŒè¿é€šåˆ†é‡</li><li>å¯¹åŒè¿é€šåˆ†é‡åšå®Œç¼©ç‚¹ååªå‰©æ¡¥å’Œç‚¹ï¼Œå¯ä»¥å‘ç°å¯¹å·¦å³ä¸¤ä¸ªå¶å­èŠ‚ç‚¹è¿é€šåï¼Œæ ¹èŠ‚ç‚¹è¿å‘å·¦å³å¶å­èŠ‚ç‚¹çš„è¾¹å°±å¯ä»¥åˆ å»äº†</li><li>(cnt + 1) &#x2F; 2 å‘ä¸‹å–æ•´</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 5010, M = 20010;
int h[N], e[M], ne[M], idx;
int dfn[N], low[N], timestamp;
int stk[N], top;
int id[N], dcc_cnt;
bool is_bridge[M];
int d[N];
void add(int a, int b)&#123;
    e[idx] = b, ne[idx] = h[a], h[a] = idx++;
&#125;
void tarjan(int u, int from)&#123;
    dfn[u] = low[u] = ++timestamp;
    stk[++top] = u;
    for(int i = h[u]; ~i; i = ne[i])&#123;
        int j = e[i];
        if(!dfn[j])&#123;
            tarjan(j, i);
            low[u] = min(low[u], low[j]);
            if(dfn[u] &lt; low[j])&#123;
                is_bridge[i] = is_bridge[i ^ 1] = 1;
            &#125;
        &#125;else if(i != (from ^ 1))&#123;
            low[u] = min(low[u], dfn[j]);
        &#125;
    &#125;
    if(dfn[u] == low[u])&#123;
        int y;
        ++dcc_cnt;
        do&#123;
            y = stk[top--];
            id[y] = dcc_cnt;
        &#125;while(y != u);
    &#125;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    int n, m;
    cin &gt;&gt; n &gt;&gt; m;
    memset(h, -1, sizeof(h));
    while(m--)&#123;
        int a, b;
        cin &gt;&gt; a &gt;&gt; b;
        add(a, b);
        add(b, a);
    &#125;
    tarjan(1, -1);
    for(int i = 0; i &lt; idx; i++)&#123;
        if(is_bridge[i])&#123;
            d[id[e[i]]]++;
        &#125;
    &#125;
    int cnt = 0;
    for(int i = 1; i &lt;= dcc_cnt; i++)&#123;
        if(d[i] == 1) cnt++;
    &#125;
    cout &lt;&lt; (cnt + 1) / 2 &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><hr><h3 id="AcWing-ç”µåŠ›"><a href="#AcWing-ç”µåŠ›" class="headerlink" title="AcWing|ç”µåŠ›"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTE4NS8=">AcWing|ç”µåŠ›</span></h3><ul><li>ç»Ÿè®¡è¿é€šå—ä¸ªæ•°</li><li>æšä¸¾ä»å“ªä¸ªå—ä¸­åˆ é™¤æŸä¸ªç‚¹èƒ½åˆ†æˆå¤šå°‘å—</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 10010, M = 30010;
int dfn[N], low[N], timestamp;
int h[N], e[M], ne[M], idx;
int ans;
void add(int a, int b)&#123;
    e[idx] = b, ne[idx] = h[a], h[a] = idx++;
&#125;
void tarjan(int u, int root)&#123;
    dfn[u] = low[u] = ++timestamp;
    int cnt = 0;
    for(int i = h[u]; ~i; i = ne[i])&#123;
        int j = e[i];
        if(!dfn[j])&#123;
            tarjan(j, root);
            low[u] = min(low[u], low[j]);
            if(dfn[u] &lt;= low[j])&#123;
                cnt++;
            &#125;
        &#125;else&#123;
            low[u] = min(low[u], dfn[j]);
        &#125;
    &#125;
    if(u != root)&#123;
        cnt++;
    &#125;
    ans = max(ans, cnt);
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    int n, m;
    while(cin &gt;&gt; n &gt;&gt; m)&#123;
        if(!n &amp;&amp; !m) break;
        memset(h, -1, sizeof(h));
        memset(dfn, 0, sizeof(dfn));
        idx = timestamp = 0;
        while(m--)&#123;
            int a, b;
            cin &gt;&gt; a &gt;&gt; b;
            add(a, b);
            add(b, a);
        &#125;
        ans = 0;
        int cnt = 0;
        for(int root = 0; root &lt; n; root++)&#123;
            if(!dfn[root])&#123;
                tarjan(root, root);
                cnt++;
            &#125;
        &#125;
        cout &lt;&lt; ans + cnt - 1 &lt;&lt; &#39;\n&#39;;
    &#125;
&#125;
</code></pre><h3 id="AcWing-çŸ¿åœºæ­å»º-ğŸŒ–ğŸŒ–"><a href="#AcWing-çŸ¿åœºæ­å»º-ğŸŒ–ğŸŒ–" class="headerlink" title="AcWing|çŸ¿åœºæ­å»º ğŸŒ–ğŸŒ–"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMzk4Lw==">AcWing|çŸ¿åœºæ­å»º</span> ğŸŒ–ğŸŒ–</h3><ul><li>ç»™å®šä¸€ä¸ªæ— å‘å›¾ï¼Œé—®æœ€å°‘åœ¨å‡ ä¸ªç‚¹ä¸Šè®¾ç½®å‡ºå£ï¼Œå¯ä»¥ä½¿å¾—ä»»æ„ä¸€ç‚¹åå¡Œï¼Œå…¶ä½™æ‰€æœ‰ç‚¹éƒ½å¯ä»¥ä¸æŸä¸ªå‡ºå£è¿é€š</li><li>å‡ºå£æ•°é‡ $\ge 2$</li><li>åˆ†åˆ«çœ‹æ¯ä¸ªè¿é€šå—<ul><li>æ— å‰²ç‚¹ï¼Œ$C_{cnt}^2$ ç§å‡ºå£æ–¹æ¡ˆ</li><li>æœ‰å‰²ç‚¹ï¼Œç¼©ç‚¹ï¼Œå…ˆå°†æ¯ä¸ªå‰²ç‚¹å•ç‹¬ä½œä¸ºä¸€ä¸ªç‚¹ï¼Œä»æ¯ä¸ª v-DCC å‘å…¶æ‰€åŒ…å«çš„æ¯ä¸ªå‰²ç‚¹è¿ä¸ªè¾¹<ul><li>v-DCC åº¦æ•°ä¸º 1ï¼Œéœ€è¦åœ¨è¯¥åˆ†é‡å†…éƒ¨ï¼ˆéå‰²ç‚¹ï¼‰æ”¾ä¸€ä¸ªå‡ºå£</li><li>v-DCC åº¦æ•° $&gt; 1$ æ— éœ€è®¾ç½®å‡ºå£</li></ul></li></ul></li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef unsigned long long ULL;
const int N = 510, M = 1010;
int h[N], e[M], ne[M], idx;
int dfn[N], low[N], timestamp;
int stk[N], top;
int dcc_cnt;
vector&lt;int&gt; dcc[N];
bool cut[N];
int root;

void add(int a, int b)&#123;
    e[idx] = b, ne[idx] = h[a], h[a] = idx++;
&#125;
void tarjan(int u)&#123;
    low[u] = dfn[u] = ++timestamp;
    stk[++top] = u;
    // 1. u æ˜¯å­¤ç«‹ç‚¹
    if(u == root &amp;&amp; h[u] == -1)&#123;
        dcc_cnt++;
        dcc[dcc_cnt].push_back(u);
        return ;
    &#125;
    // 2. u ä¸æ˜¯å­¤ç«‹ç‚¹
    int cnt = 0;
    for(int i = h[u]; ~i; i = ne[i])&#123;
        int j = e[i];
        if(!dfn[j])&#123;
            tarjan(j);
            low[u] = min(low[u], low[j]);
            // çœ‹ j æ˜¯ä¸æ˜¯èƒ½è¿åˆ°æ¯” u è¿˜é«˜çš„åœ°æ–¹
            if(dfn[u] &lt;= low[j])&#123;   // j æ˜¯ u çš„æ–°åˆ†æ”¯
                cnt++;
                if(u != root || cnt &gt; 1)&#123;
                    cut[u] = true;
                &#125;
                ++dcc_cnt;
                int y;
                do&#123;
                    y = stk[top--];
                    dcc[dcc_cnt].push_back(y);
                &#125;while(y != j); // å¼¹å‡ºåˆ° j ä¸ºæ­¢
                // ğŸ”º å¼€æ–°åˆ†æ”¯ == u ä¸€å®šå’Œæ–°åˆ†æ”¯ j ç»„æˆä¸€ä¸ª dcc ä¹Ÿå’Œæ—§è¿é€šå—ç»„æˆ dcc
                // é‚£ä¹ˆå½“å‰æœ€é«˜ç‚¹ u è¿˜è¦è¢«ç”¨åœ¨æ›´é«˜çš„åŒ…å« u çš„æ—§è¿é€šå—
                // æ‰€ä»¥å¦‚æœè¿™ä¸ªæ—¶å€™å‡ºæ ˆäº† å›æº¯åˆ°æ¯” u é«˜çš„ç‚¹çš„æ—¶å€™ u å°±åŠ ä¸è¿›æ—§è¿é€šå—é‡Œ
                dcc[dcc_cnt].push_back(u);
            &#125;
        &#125;else&#123;
            low[u] = min(low[u], dfn[j]);
        &#125;
    &#125;
&#125;

int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    int T = 1, n, m;
    while(cin &gt;&gt; m, m)&#123;
        for(int i = 1; i &lt;= dcc_cnt; i++)&#123;
            dcc[i].clear();
        &#125;
        idx = timestamp = n = top = dcc_cnt = 0;
        memset(h, -1, sizeof(h));
        memset(dfn, 0, sizeof(dfn));
        memset(low, 0, sizeof(low));
        memset(cut, 0, sizeof(cut));
        while(m--)&#123;
            int a, b;
            cin &gt;&gt; a &gt;&gt; b;
            n = max(&#123;n, a, b&#125;);
            add(a, b);
            add(b, a);
        &#125;
        for(root = 1; root &lt;= n; root++)&#123;
            if(!dfn[root])&#123;
                tarjan(root);
            &#125;
        &#125;
        int ans = 0;
        ULL num = 1;
        for(int i = 1; i &lt;= dcc_cnt; i++)&#123;
            int cnt = 0;
            for(int j = 0; j &lt; dcc[i].size(); j++)&#123;
                if(cut[dcc[i][j]])&#123;
                    cnt++;
                &#125;
            &#125;
            if(cnt == 0)&#123;
                if(dcc[i].size() &gt; 1) ans += 2, num *= dcc[i].size() * (dcc[i].size() - 1) / 2;
                else ans++;
            &#125;else if(cnt == 1)&#123;
                ans++;
                num *= dcc[i].size() - 1;
            &#125;
        &#125;
        cout &lt;&lt; &quot;Case &quot; &lt;&lt; T++ &lt;&lt; &quot;: &quot; &lt;&lt; ans &lt;&lt; &quot; &quot; &lt;&lt; num &lt;&lt; &#39;\n&#39;;
    &#125;
&#125;
</code></pre><h2 id="äºŒåˆ†å›¾"><a href="#äºŒåˆ†å›¾" class="headerlink" title="äºŒåˆ†å›¾"></a>äºŒåˆ†å›¾</h2><ul><li><p>äºŒåˆ†å›¾ï¼Œä¸å­˜åœ¨å¥‡æ•°ç¯ï¼ŒæŸ“è‰²æ³•ä¸å­˜åœ¨çŸ›ç›¾</p></li><li><p>åŒˆç‰™åˆ©ç®—æ³•ï¼ŒåŒ¹é…ã€æœ€å¤§åŒ¹é…ã€åŒ¹é…ç‚¹ã€å¢å¹¿è·¯å¾„</p><ul><li>å¢å¹¿è·¯å¾„ï¼šéåŒ¹é…ç‚¹èµ°ï¼Œé€šè¿‡éåŒ¹é…è¾¹ï¼ŒåŒ¹é…è¾¹ï¼ŒéåŒ¹é…è¾¹ â€¦ å†èµ°åˆ°å¦ä¸€å—çš„éåŒ¹é…ç‚¹</li><li>æœ€å¤§åŒ¹é…ç­‰ä»·äºä¸å­˜åœ¨å¢å¹¿è·¯å¾„</li></ul></li><li><p>æœ€å°ç‚¹è¦†ç›–ã€æœ€å¤§ç‹¬ç«‹é›†ã€æœ€å°è·¯å¾„ç‚¹è¦†ç›–ã€æœ€å°è·¯å¾„é‡å¤ç‚¹è¦†ç›–</p><ul><li>æœ€å¤§åŒ¹é…æ•° &#x3D; æœ€å°ç‚¹è¦†ç›– &#x3D; æ€»ç‚¹æ•° - æœ€å¤§ç‹¬ç«‹é›† &#x3D; æ€»ç‚¹æ•° - æœ€å°è·¯å¾„è¦†ç›–</li><li>åœ¨äºŒåˆ†å›¾ä¸­ï¼Œæœ€å°ç‚¹è¦†ç›– &#x3D; æœ€å¤§åŒ¹é…æ•°ï¼Œ<em>è¯æ˜å¾…çœ‹</em></li><li>æœ€å¤§ç‹¬ç«‹é›†ï¼Œé€‰å‡ºæœ€å¤šçš„ç‚¹ï¼Œä½¿å¾—é€‰å‡ºçš„ç‚¹ä¹‹é—´æ²¡æœ‰è¾¹ã€‚åœ¨äºŒåˆ†å›¾ä¸­ï¼Œæ±‚ä¸€ä¸ªæœ€å¤§ç‹¬ç«‹é›†ï¼Œç­‰ä»·äºå»æ‰æœ€å°‘çš„ç‚¹ï¼Œå°†æ‰€æœ‰è¾¹éƒ½ç ´åæ‰ï¼Œä¹Ÿå°±æ˜¯æ‰¾åˆ°æœ€å°ç‚¹è¦†ç›–ï¼Œå³æ‰¾æœ€å¤§åŒ¹é…</li></ul></li><li><p>æœ€ä¼˜åŒ¹é…ï¼ŒKM</p></li><li><p>å¤šé‡åŒ¹é…ï¼Œï¼ˆæœ€å¤§æµ</p></li></ul><h3 id="AcWing-å…³æŠ¼ç½ªçŠ¯"><a href="#AcWing-å…³æŠ¼ç½ªçŠ¯" class="headerlink" title="AcWing|å…³æŠ¼ç½ªçŠ¯"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMjU5Lw==">AcWing|å…³æŠ¼ç½ªçŠ¯</span></h3><ul><li>äºŒåˆ† + æŸ“è‰²æ³•åˆ¤æ–­äºŒåˆ†å›¾ï¼ˆæ— å‘å›¾ï¼‰</li><li>å°†ç½ªçŠ¯å½“ä½œç‚¹ï¼Œç½ªçŠ¯ä¹‹é—´çš„ä»‡æ¨å…³ç³»å½“åšç‚¹ä¸ç‚¹ä¹‹é—´çš„æ— å‘è¾¹ï¼Œè¾¹çš„æƒé‡æ˜¯ç½ªçŠ¯ä¹‹é—´çš„ä»‡æ¨å€¼ã€‚é‚£ä¹ˆåŸé—®é¢˜å˜æˆï¼šå°†æ‰€æœ‰ç‚¹åˆ†æˆä¸¤ç»„ï¼Œä½¿å¾—å„ç»„å†…è¾¹çš„æƒé‡çš„æœ€å¤§å€¼å°½å¯èƒ½å°</li><li>$color$ æ•°ç»„ä¸­ï¼Œ$0$ è¡¨ç¤ºæœªæŸ“è‰²ï¼Œ$1$ è¡¨ç¤ºæŸ“ç™½è‰²ï¼Œ$2$ è¡¨ç¤ºæŸ“é»‘è‰²</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 20010, M = 200010;
int h[N], e[M], ne[M], w[M], idx;
int color[N];
int n, m;
void add(int a, int b, int c)&#123;
    e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx++;
&#125;
bool dfs(int u, int c, int mid)&#123;
    color[u] = c;
    for(int i = h[u]; ~i; i = ne[i])&#123;
        if(w[i] &lt;= mid) continue;
        int j = e[i];
        if(color[j] == c) return false;
        if(!color[j] &amp;&amp; !dfs(j, 3 - c, mid)) return false;
    &#125;
    return true;
&#125;
bool check(int limit)&#123;
    memset(color, 0, sizeof(color));
    for(int i = 1; i &lt;= n; i++)&#123;
        if(!color[i])&#123;
            if(!dfs(i, 1, limit)) return false;
        &#125;
    &#125;
    return true;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    memset(h, -1, sizeof(h));
    cin &gt;&gt; n &gt;&gt; m;
    while(m--)&#123;
        int a, b, c;
        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;
        add(a, b, c), add(b, a, c);
    &#125;
    int l = 0, r = 1e9;
    while(l &lt; r)&#123;
        int mid = (l + r) &gt;&gt; 1;
        if(check(mid)) r = mid;
        else l = mid + 1;
    &#125;
    cout &lt;&lt; l &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><h3 id="AcWing-æ£‹ç›˜è¦†ç›–"><a href="#AcWing-æ£‹ç›˜è¦†ç›–" class="headerlink" title="AcWing|æ£‹ç›˜è¦†ç›–"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMzc0Lw==">AcWing|æ£‹ç›˜è¦†ç›–</span></h3><ul><li>æŠŠä¸€ä¸ªéª¨ç‰Œçœ‹ä½œä¸€æ¡è¾¹ï¼Œæ‰€å çš„ä¸¤ä¸ªæ ¼å­çœ‹ä½œç‚¹ï¼Œå› æ­¤å¯ä»¥å°†é—®é¢˜è½¬åŒ–æˆä¸€ä¸ªæ£‹ç›˜å¯ä»¥æœ€å¤šå–å¤šå°‘æ¡è¾¹ï¼Œä¸”æ‰€æœ‰é€‰å‡ºçš„è¾¹æ— å…¬å…±ç‚¹</li><li>ç”¨æœ€å¤§åŒ¹é…æ¥åšï¼Œç»å…¸é»‘ç™½äºŒåˆ†å›¾</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 110;
typedef pair&lt;int, int&gt; PII;
bool g[N][N], st[N][N];
PII match[N][N];
int dx[4] = &#123;-1, 0, 1, 0&#125;, dy[4] = &#123;0, 1, 0, -1&#125;;
int n, t;
bool find(int x, int y)&#123;
    for(int i = 0; i &lt; 4; i++)&#123;
        int nx = x + dx[i], ny = y + dy[i];
        if(nx &lt;= 0 || nx &gt; n || ny &lt;= 0 || ny &gt; n) continue;
        if(st[nx][ny] || g[nx][ny]) continue;
        st[nx][ny] = true;
        PII t = match[nx][ny];
        if(t.first == -1 || find(t.first, t.second))&#123;
            match[nx][ny] = &#123;x, y&#125;;
            return true;
        &#125;
    &#125;
    return false;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    cin &gt;&gt; n &gt;&gt; t;
    while(t--)&#123;
        int a, b; cin &gt;&gt; a &gt;&gt; b;
        g[a][b] = true;
    &#125;
    memset(match, -1, sizeof(match));
    int ans = 0;
    for(int i = 1; i &lt;= n; i++)&#123;
        for(int j = 1; j &lt;= n; j++)&#123;
            if((i + j) % 2 &amp;&amp; !g[i][j])&#123;
                memset(st, 0, sizeof(st));
                if(find(i, j)) ans++;
            &#125;
        &#125;
    &#125;
    cout &lt;&lt; ans &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><h3 id="AcWing-æœºå™¨ä»»åŠ¡"><a href="#AcWing-æœºå™¨ä»»åŠ¡" class="headerlink" title="AcWing|æœºå™¨ä»»åŠ¡"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMzc4Lw==">AcWing|æœºå™¨ä»»åŠ¡</span></h3><ul><li>$a[i] &#x3D; 0 || b[i] &#x3D; 0$ æ—¶å¯ä»¥è·³è¿‡</li><li>ä¸€ä¸ªä»»åŠ¡ $i$ å¯ä»¥åœ¨ä¸¤ç§çŠ¶æ€ä¸‹å®Œæˆï¼Œå› æ­¤å¯ä»¥å°†ä¸€ä¸ªä»»åŠ¡çœ‹æˆä¸€æ¡è¾¹ï¼Œä¸¤ç§çŠ¶æ€çœ‹æˆä¸¤ä¸ªç«¯ç‚¹ï¼Œè¦å®Œæˆä¸€ä¸ªä»»åŠ¡å°±è¦ä»è¿™ä¸¤ä¸ªç‚¹ä¸­é€‰ä¸€ä¸ªç‚¹ï¼Œå¯¹äºæ‰€æœ‰ä»»åŠ¡æ¥è¯´ï¼Œå°±æ˜¯ä» $N + M - 2$ ï¼ˆä¸åŒ…å«åˆå§‹çŠ¶æ€ï¼‰ä¸­é€‰å‡ºæœ€å°‘çš„ç‚¹ï¼Œè¦†ç›–æ‰€æœ‰çš„è¾¹ï¼ˆä»»åŠ¡ï¼‰ï¼Œé—®é¢˜å°±å˜æˆæ±‚æœ€å°ç‚¹è¦†ç›–é—®é¢˜</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 110;
int match[N];
bool st[N], g[N][N];
int n, m, k;
bool find(int x)&#123;
    for(int i = 1; i &lt; m; i++)&#123;
        if(g[x][i] &amp;&amp; !st[i])&#123;
            st[i] = true;
            if(match[i] == -1 || find(match[i]))&#123;
                match[i] = x;
                return true;
            &#125;
        &#125;
    &#125;
    return false;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    while(cin &gt;&gt; n, n)&#123;
        cin &gt;&gt; m &gt;&gt; k;
        memset(g, 0, sizeof(g));
        while(k--)&#123;
            int op, a, b;
            cin &gt;&gt; op &gt;&gt; a &gt;&gt; b;
            g[a][b] = true;
        &#125;
        memset(match, -1, sizeof(match));
        int ans = 0;
        for(int i = 1; i &lt; n; i++)&#123;
            memset(st, 0, sizeof(st));
            if(find(i)) ans++;
        &#125;
        cout &lt;&lt; ans &lt;&lt; &#39;\n&#39;;
    &#125;
&#125;
</code></pre><h3 id="AcWing-éª‘å£«æ”¾ç½®"><a href="#AcWing-éª‘å£«æ”¾ç½®" class="headerlink" title="AcWing|éª‘å£«æ”¾ç½®"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvNTg1Lw==">AcWing|éª‘å£«æ”¾ç½®</span></h3><ul><li>æ¯ä¸ªä¸ç¦æ­¢æ”¾çš„ç‚¹æ˜¯ä¸€ä¸ªå›¾èŠ‚ç‚¹ï¼Œæ¯ä¸¤ä¸ªå¯ä»¥é€šè¿‡æ—¥å­—å½¢èµ°åˆ°çš„ç‚¹è¿ä¸€æ¡è¾¹ï¼Œé—®é¢˜ä¸ºé€‰å‡ºæœ€å¤šçš„ç‚¹ï¼Œä½¿å¾—é€‰å‡ºæ¥çš„ç‚¹ä¹‹é—´ä¸èƒ½é€šè¿‡æ—¥å­—å½¢èµ°åˆ°ï¼Œå¯ä»¥è½¬åŒ–æˆé€‰å‡ºæœ€å¤šçš„ç‚¹ï¼Œä½¿å¾—é€‰å‡ºæ¥çš„ç‚¹ä¹‹é—´æ²¡æœ‰è¾¹</li><li>å³ä¸ºæœ€å¤§ç‹¬ç«‹é›†é—®é¢˜ï¼Œå¯ä»¥è½¬åŒ–æˆæ±‚æœ€å¤§åŒ¹é…ï¼Œä¸”æ»¡è¶³äºŒåˆ†å›¾ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨åŒˆç‰™åˆ©ç®—æ³•<ul><li>ä»ç™½ç‚¹é€šè¿‡æ—¥å­—å½¢åªèƒ½èµ°åˆ°é»‘ç‚¹ï¼Œå› æ­¤è¿™æ˜¯ä¸ªäºŒåˆ†å›¾</li></ul></li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
typedef pair&lt;int, int&gt; PII;
const int N = 110;
bool g[N][N], st[N][N];
PII match[N][N];
int n, m, t;
int dx[8] = &#123;-2, -1, 1, 2, -2, -1, 1, 2&#125;, dy[8] = &#123;-1, -2, -2, -1, 1, 2, 2, 1&#125;;
bool find(int x, int y)&#123;
    for(int i = 0; i &lt; 8; i++)&#123;
        int nx = x + dx[i], ny = y + dy[i];
        if(nx &lt;= 0 || nx &gt; n || ny &lt;= 0 || ny &gt; m) continue;
        if(g[nx][ny] || st[nx][ny]) continue;
        st[nx][ny] = true;
        PII t = match[nx][ny];
        if(t.first == -1 || find(t.first, t.second))&#123;
            match[nx][ny] = &#123;x, y&#125;;
            return true;
        &#125;
    &#125;
    return false;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    cin &gt;&gt; n &gt;&gt; m &gt;&gt; t;
    for(int i = 1; i &lt;= t; i++)&#123;
        int a, b; cin &gt;&gt; a &gt;&gt; b;
        g[a][b] = true;
    &#125;
    memset(match, -1, sizeof(match));
    int ans = 0;
    for(int i = 1; i &lt;= n; i++)&#123;
        for(int j = 1; j &lt;= m; j++)&#123;
            if((i + j) % 2 || g[i][j]) continue;
            memset(st, 0, sizeof(st));
            if(find(i, j)) ans++;
        &#125;
    &#125;
    cout &lt;&lt; n * m - ans - t &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><h3 id="AcWing-æ‰è¿·è—"><a href="#AcWing-æ‰è¿·è—" class="headerlink" title="AcWing|æ‰è¿·è—"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMzgxLw==">AcWing|æ‰è¿·è—</span></h3><hr><h2 id="æ¬§æ‹‰å›è·¯å’Œæ¬§æ‹‰è·¯å¾„"><a href="#æ¬§æ‹‰å›è·¯å’Œæ¬§æ‹‰è·¯å¾„" class="headerlink" title="æ¬§æ‹‰å›è·¯å’Œæ¬§æ‹‰è·¯å¾„"></a>æ¬§æ‹‰å›è·¯å’Œæ¬§æ‹‰è·¯å¾„</h2><ul><li>æ¬§æ‹‰è·¯å¾„é—®é¢˜ï¼Œæ¯æ¡è¾¹èµ°ä¸€æ¬¡<ul><li>ç»å…¸é—®é¢˜ï¼šå“¥å°¼æ–¯å ¡ä¸ƒæ¡¥é—®é¢˜</li><li>èµ·ç‚¹çš„åº¦æ•°å’Œç»ˆç‚¹çš„åº¦æ•°éƒ½æ˜¯å¥‡æ•°ï¼Œé€”å¾„ç‚¹çš„åº¦æ•°éƒ½æ˜¯å¶æ•°</li></ul></li><li>å¯¹äºæ— å‘å›¾ï¼Œæ‰€æœ‰è¾¹éƒ½æ˜¯è¿é€šçš„<ul><li>å­˜åœ¨æ¬§æ‹‰è·¯å¾„çš„å……åˆ†å¿…è¦æ¡ä»¶ï¼šåº¦æ•°ä¸ºå¥‡æ•°çš„ç‚¹åªèƒ½æœ‰ 0 æˆ– 2 ä¸ª</li><li>å­˜åœ¨æ¬§æ‹‰å›è·¯çš„å……åˆ†å¿…è¦æ¡ä»¶ï¼šåº¦æ•°ä¸ºå¥‡æ•°çš„ç‚¹åªèƒ½æœ‰ 0 ä¸ª</li></ul></li><li>å¯¹äºæœ‰å‘å›¾ï¼Œæ‰€æœ‰è¾¹éƒ½æ˜¯è¿é€šçš„<ul><li>å­˜åœ¨æ¬§æ‹‰è·¯å¾„çš„å……åˆ†å¿…è¦æ¡ä»¶ï¼šè¦ä¹ˆæ‰€æœ‰ç‚¹çš„å‡ºåº¦å‡ç­‰äºå…¥åº¦ï¼Œè¦ä¹ˆé™¤äº†ä¸¤ä¸ªç‚¹ä¹‹å¤–ï¼Œå…¶ä½™æ‰€æœ‰ç‚¹çš„å‡ºåº¦ç­‰äºå…¥åº¦ï¼Œå‰©ä½™çš„ä¸¤ä¸ªç‚¹ï¼šä¸€ä¸ªæ»¡è¶³å‡ºåº¦æ¯”å…¥åº¦å¤š 1ï¼ˆèµ·ç‚¹ï¼‰ï¼Œå¦ä¸€ä¸ªæ»¡è¶³å…¥åº¦æ¯”å‡ºåº¦å¤š 1ï¼ˆç»ˆç‚¹ï¼‰</li><li>å­˜åœ¨æ¬§æ‹‰å›è·¯çš„å……åˆ†å¿…è¦æ¡ä»¶ï¼šæ‰€æœ‰ç‚¹çš„å‡ºåº¦å‡ç­‰äºå…¥åº¦</li></ul></li></ul><h3 id="AcWing-é“²é›ªè½¦"><a href="#AcWing-é“²é›ªè½¦" class="headerlink" title="AcWing|é“²é›ªè½¦"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTEyNS8=">AcWing|é“²é›ªè½¦</span></h3><ul><li>æ¯æ¡è·¯è¦é“²ä¸¤ä¸ªæ–¹å‘ï¼Œå°±å½“ä½œæ˜¯æœ‰å‘å›¾åšï¼Œå¿…ç„¶å­˜åœ¨æ¬§æ‹‰å›è·¯</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
int main()&#123;
    double x1, y1, x2, y2;
    cin &gt;&gt; x1 &gt;&gt; y1;
    double sum = 0;
    while(cin &gt;&gt; x1 &gt;&gt; y1 &gt;&gt; x2 &gt;&gt; y2)&#123;
        double dx = x2 - x1, dy = y2 - y1;
        sum += sqrt(dx * dx + dy * dy) * 2;
    &#125;
    int minutes = round(sum / 1000 / 20 * 60);
    int hours = minutes / 60;
    minutes %= 60;
    cout &lt;&lt; hours &lt;&lt; &quot;:&quot; &lt;&lt; setfill(&#39;0&#39;) &lt;&lt; setw(2) &lt;&lt; minutes &lt;&lt; endl;
&#125;
</code></pre><h3 id="AcWing-æ¬§æ‹‰å›è·¯"><a href="#AcWing-æ¬§æ‹‰å›è·¯" class="headerlink" title="AcWing|æ¬§æ‹‰å›è·¯"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTE4Ni8=">AcWing|æ¬§æ‹‰å›è·¯</span></h3><ul><li>æ— å‘å›¾<ul><li>æ‰€æœ‰ç‚¹çš„åº¦æ•°å¿…é¡»æ˜¯å¶æ•°</li><li>æ‰€æœ‰è¾¹è¿é€š</li></ul></li><li>æœ‰å‘å›¾<ul><li>æ‰€æœ‰ç‚¹çš„å…¥åº¦ç­‰äºå‡ºåº¦</li><li>æ‰€æœ‰è¾¹è¿é€š</li></ul></li><li><img data-src="https://cdn.acwing.com/media/article/image/2021/06/16/42785_76564c8cce-QQ%E6%B5%8F%E8%A7%88%E5%99%A8%E6%88%AA%E5%9B%BE20210616101308.png" alt="img"></li><li><img data-src="https://cdn.acwing.com/media/article/image/2021/06/16/42785_57cbd99cce-QQ%E6%B5%8F%E8%A7%88%E5%99%A8%E6%88%AA%E5%9B%BE20210616102633.png" alt="img"></li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 100010, M = 400010;
int h[N], e[M], ne[M], idx;
bool used[M];
int ans[M], cnt;
int din[N], dout[N];
int type;
void add(int a, int b)&#123;
    e[idx] = b, ne[idx] = h[a], h[a] = idx++;
&#125;
void dfs(int u)&#123;
    // ä½¿ç”¨å¼•ç”¨, å¯ä»¥ç›´æ¥åœ¨i=ne[i]ä¸­, å°†è¾¹åˆ æ‰
    for(int &amp;i = h[u]; ~i; )&#123;
        if(used[i])&#123;
            i = ne[i];
            continue;
        &#125;
        used[i] = 1;
        if(type == 1) used[i ^ 1] = 1;

        int t;
        if(type == 1)&#123;
            t = i / 2 + 1;      // è¾¹çš„ç¼–å·
            if(i &amp; 1) t = -t;   // åå‘è¾¹
        &#125;else&#123;
            t = i + 1;
        &#125;
        int j = e[i];
        i = ne[i];              // è¾¹ç”¨è¿‡ä¹‹åç›´æ¥åˆ äº†
        dfs(j);
        ans[++cnt] = t;         // ä»ä¸‹å¾€ä¸Šå°†ç‚¹è¾“å…¥åˆ°è·¯å¾„ä¸­,å› ä¸ºä»ä¸Šå¾€ä¸‹çš„è¿‡ç¨‹ä¸­,å¯èƒ½è¾¹è·¯æœ‰äº›ç¯å¹¶æ²¡æœ‰è¢«é¡¾è™‘åˆ°
    &#125;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    int n, m;
    cin &gt;&gt; type &gt;&gt; n &gt;&gt; m;
    memset(h, -1, sizeof(h));
    for(int i = 0; i &lt; m; i++)&#123;
        int a, b;
        cin &gt;&gt; a &gt;&gt; b;
        add(a, b);
        if(type == 1)&#123;
            add(b, a);
        &#125;
        din[b]++, dout[a]++;
    &#125;
    if(type == 1)&#123;
        for(int i = 1; i &lt;= n; i++)&#123;
            if(din[i] + dout[i] &amp; 1)&#123;
                cout &lt;&lt; &quot;NO&quot; &lt;&lt; &#39;\n&#39;;
                return 0;
            &#125;
        &#125;
    &#125;else&#123;
        for(int i = 1; i &lt;= n; i++)&#123;
            if(din[i] != dout[i])&#123;
                cout &lt;&lt; &quot;NO&quot; &lt;&lt; &#39;\n&#39;;
                return 0;
            &#125;
        &#125;
    &#125;
    // éå†æ—¶å¯èƒ½æœ‰å­¤ç«‹ç‚¹--æ‰¾ä¸€ä¸ªåŒ…å«è¾¹çš„èµ·ç‚¹
    for(int i = 1; i &lt;= n; i++)&#123;
        if(h[i] != -1)&#123;
            dfs(i);
            break;
        &#125;
    &#125;

    if(cnt &lt; m)&#123;
        cout &lt;&lt; &quot;NO&quot; &lt;&lt; &#39;\n&#39;;
    &#125;else&#123;
        cout &lt;&lt; &quot;YES&quot; &lt;&lt; &#39;\n&#39;;
        for(int i = cnt; i &gt;= 1; i--)&#123;
            cout &lt;&lt; ans[i] &lt;&lt; &#39; &#39;;
        &#125;
        cout &lt;&lt; &#39;\n&#39;;
    &#125;
&#125;
</code></pre><h3 id="AcWing-éª‘é©¬ä¿®æ …æ "><a href="#AcWing-éª‘é©¬ä¿®æ …æ " class="headerlink" title="AcWing|éª‘é©¬ä¿®æ …æ "></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTEyNi8=">AcWing|éª‘é©¬ä¿®æ …æ </span></h3><ul><li>è¦æ±‚å­—å…¸åºæœ€å°<ul><li>åªéœ€è¦ä»å°å¾€å¤§æšä¸¾å³å¯</li><li>å…ˆéå† 1 å·ç‚¹ï¼ˆç¼–å·ä» 1 åˆ° nï¼‰ï¼Œåˆ™ 1 å·ç‚¹ä¸€å®šæœ€åè¢«åŠ å…¥æ¬§æ‹‰è·¯å¾„ã€‚å› æ­¤åªè¦æŒ‰ç…§ä»å°åˆ°å¤§çš„ç‚¹çš„åºå·æœï¼Œå°±å¯ä»¥å¾—åˆ°å­—å…¸åºæœ€å°çš„æ¬§æ‹‰è·¯å¾„ï¼ˆæœ€åé€†åºè¾“å‡ºï¼Œæœ€å°çš„ç‚¹ä¼šæœ€ååŠ å…¥ ans)</li></ul></li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 510;
int n = 500, m;
int g[N][N];
int ans[1110], cnt;
int d[N];
void dfs(int u)&#123;
    for(int i = 1; i &lt;= n; i++)&#123;
        if(g[u][i])&#123;
            g[u][i]--, g[i][u]--;
            dfs(i);
        &#125;
    &#125;
    ans[++cnt] = u;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    cin &gt;&gt; m;
    while(m--)&#123;
        int a, b;
        cin &gt;&gt; a &gt;&gt; b;
        g[a][b]++, g[b][a]++;
        d[a]++, d[b]++;
    &#125;
    int st = 1;
    while(!d[st]) st++;
    for(int i = 1; i &lt;= 500; i++)&#123;
        if(d[i] % 2)&#123;
            st = i;
            break;
        &#125;
    &#125;
    dfs(st);
    for(int i = cnt; i &gt;= 1; i--)&#123;
        cout &lt;&lt; ans[i] &lt;&lt; &#39;\n&#39;;
    &#125;
&#125;
</code></pre><h3 id="AcWing-å•è¯æ¸¸æˆ"><a href="#AcWing-å•è¯æ¸¸æˆ" class="headerlink" title="AcWing|å•è¯æ¸¸æˆ"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTE4Ny8=">AcWing|å•è¯æ¸¸æˆ</span></h3><ul><li>æ¯ä¸ªå•è¯å¯ä»¥å½“ä½œä¸€æ¡æœ‰å‘è¾¹ï¼Œç¬¬ä¸€ä¸ªå­—æ¯è¿åˆ°æœ€åä¸€ä¸ªå­—æ¯</li><li>å› æ­¤æœ¬é¢˜è½¬æ¢æˆæœ‰å‘å›¾æ˜¯å¦å­˜åœ¨æ¬§æ‹‰è·¯å¾„</li><li>åˆ¤æ–­æ˜¯å¦è¿é€šé‡‡ç”¨å¹¶æŸ¥é›†ç»´æŠ¤<ul><li>åº¦æ•°æ»¡è¶³çš„æƒ…å†µä¸‹ï¼Œå¦‚æœåˆæ˜¯éƒ½åœ¨åŒä¸€ä¸ªé›†åˆä¸­ï¼Œåˆ™ä¸€å®šå­˜åœ¨æ¬§æ‹‰è·¯å¾„</li></ul></li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 30;
int p[N], din[N], dout[N];
bool st[N];
int find(int x)&#123;
    if(p[x] != x) p[x] = find(p[x]);
    return p[x];
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    string s;
    int t;
    cin &gt;&gt; t;
    while(t--)&#123;
        int n;
        cin &gt;&gt; n;
        memset(din, 0, sizeof(din));
        memset(dout, 0, sizeof(dout));
        memset(st, 0, sizeof(st));
        for(int i = 0; i &lt; 26; i++)&#123;
            p[i] = i;
        &#125;
        for(int i = 1; i &lt;= n; i++)&#123;
            cin &gt;&gt; s;
            int a = s[0] - &#39;a&#39;, b = s[s.size() - 1] - &#39;a&#39;;
            st[a] = st[b] = 1;
            dout[a]++, din[b]++;
            p[find(a)] = find(b);
        &#125;

        int start = 0, end = 0;
        bool ok = 1;
        for(int i = 0; i &lt; 26; i++)&#123;
            if(din[i] != dout[i])&#123;
                if(din[i] == dout[i] + 1) end++;
                else if(dout[i] == din[i] + 1) start++;
                else&#123;
                    ok = 0;
                    break;
                &#125;
            &#125;
        &#125;
        if(ok &amp;&amp; !(!start &amp;&amp; !end || start == 1 &amp;&amp; end == 1))&#123;
            ok = 0;
        &#125;
        // åˆ¤æ–­è¿é€š
        int rep = -1;
        for(int i = 0; i &lt; 26; i++)&#123;
            if(st[i])&#123;
                if(rep == -1) rep = find(i);
                else if(rep != find(i))&#123;
                    ok = 0;
                    break;
                &#125;
            &#125;
        &#125;
        if(ok) cout &lt;&lt; &quot;Ordering is possible.\n&quot;;
        else cout &lt;&lt; &quot;The door cannot be opened.\n&quot;;
    &#125;
&#125;
</code></pre><hr><h2 id="æ‹“æ‰‘æ’åº"><a href="#æ‹“æ‰‘æ’åº" class="headerlink" title="æ‹“æ‰‘æ’åº"></a>æ‹“æ‰‘æ’åº</h2><ul><li>å¯¹æœ‰å‘å›¾æ¥è¯´, å¦‚æœæœ‰ç¯å¿…ç„¶ä¸å­˜åœ¨æ‹“æ‰‘æ’åºï¼Œæ‹“æ‰‘å›¾ç­‰ä»·äºæœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰</li><li>å…ˆå°†æ‰€æœ‰å…¥åº¦ä¸º 0 çš„ç‚¹å…¥é˜Ÿ</li><li>å®½æœæ¡†æ¶ï¼Œå°†æ¯æ¬¡æ›´æ–°å®Œå…¥åº¦ä¸º 0 çš„ç‚¹å…¥é˜Ÿ</li><li>è¦æ±‚å­—å…¸åºæœ€å°çš„æ—¶å€™ï¼Œå¯ä»¥å°†é˜Ÿåˆ—æ¢æˆå°æ ¹å †</li></ul><h3 id="AcWing-å®¶è°±æ ‘"><a href="#AcWing-å®¶è°±æ ‘" class="headerlink" title="AcWing|å®¶è°±æ ‘"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTE5Mw==">AcWing|å®¶è°±æ ‘</span></h3><ul><li>é˜Ÿåˆ—ä¸­çš„é¡ºåºå³ä¸ºæ‹“æ‰‘åº</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 110, M = N * N / 2;
int h[N], e[M], ne[M], idx;
int din[N], n;
int q[N];
void add(int a, int b)&#123;
    e[idx] = b, ne[idx] = h[a], h[a] = idx++;
&#125;
void toposort()&#123;
    int hh = 0, tt = -1;
    for(int i = 1; i &lt;= n; i++)&#123;
        if(!din[i])&#123;
            q[++tt] = i;
        &#125;
    &#125;
    while(hh &lt;= tt)&#123;
        int t = q[hh++];
        for(int i = h[t]; ~i; i = ne[i])&#123;
            int j = e[i];
            din[j]--;
            if(!din[j])&#123;
                q[++tt] = j;
            &#125;
        &#125;
    &#125;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    cin &gt;&gt; n;
    memset(h, -1, sizeof(h));
    for(int i = 1; i &lt;= n; i++)&#123;
        int x;
        while(cin &gt;&gt; x, x)&#123;
            add(i, x);
            din[x]++;
        &#125;
    &#125;
    toposort();
    for(int i = 0; i &lt; n; i++)&#123;
        cout &lt;&lt; q[i] &lt;&lt; &quot; &quot;;
    &#125;
&#125;
</code></pre><h3 id="AcWing-å¥–é‡‘"><a href="#AcWing-å¥–é‡‘" class="headerlink" title="AcWing|å¥–é‡‘"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTE5NC8=">AcWing|å¥–é‡‘</span></h3><ul><li>å·®åˆ†çº¦æŸç®€åŒ–ç‰ˆ</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 20010;
int h[N], e[N], ne[N], idx;
int deg[N];
int dist[N];
int n, m, cnt;
void add(int a, int b)&#123;
    e[idx] = b, ne[idx] = h[a], h[a] = idx++;
&#125;
void toposort()&#123;
    queue&lt;int&gt; q;
    for(int i = 1; i &lt;= n; i++)&#123;
        if(!deg[i])&#123;
            q.push(i);
            dist[i] = 100;
        &#125;
    &#125;
    while(!q.empty())&#123;
        int t = q.front();
        q.pop();
        cnt++;
        for(int i = h[t]; ~i; i = ne[i])&#123;
            int j = e[i];
            deg[j]--;
            if(!deg[j])&#123;
                q.push(j);
                dist[j] = dist[t] + 1;
            &#125;
        &#125;
    &#125;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    cin &gt;&gt; n &gt;&gt; m;
    memset(h, -1, sizeof(h));
    for(int i = 1; i &lt;= m; i++)&#123;
        int a, b;
        cin &gt;&gt; a &gt;&gt; b;
        add(b, a);
        deg[a]++;
    &#125;
    toposort();
    if(cnt &lt; n) cout &lt;&lt; &quot;Poor Xed\n&quot;;
    else&#123;
        int res = 0;
        for(int i = 1; i &lt;= cnt; i++)&#123;
            res += dist[i];
        &#125;
        cout &lt;&lt; res &lt;&lt; &#39;\n&#39;;
    &#125;
&#125;
</code></pre><h3 id="AcWing-å¯è¾¾æ€§ç»Ÿè®¡"><a href="#AcWing-å¯è¾¾æ€§ç»Ÿè®¡" class="headerlink" title="AcWing|å¯è¾¾æ€§ç»Ÿè®¡"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvMTY2Lw==">AcWing|å¯è¾¾æ€§ç»Ÿè®¡</span></h3><ul><li>æœ‰å‘æ— ç¯å›¾ï¼Œå› æ­¤å¯ä»¥ dp</li><li>å…ˆæ‹“æ‰‘æ’åºï¼Œå†å€’ç€æ¨</li><li>é›†åˆç”¨äºŒè¿›åˆ¶è¡¨ç¤º</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 30010, M = 30010;
int h[N], e[M], ne[M], idx;
int deg[N];
int q[N];
int n, m;
bitset&lt;N&gt; f[N];
void add(int a, int b)&#123;
    e[idx] = b, ne[idx] = h[a], h[a] = idx++;
&#125;
void toposort()&#123;
    int hh = 0, tt = -1;
    for(int i = 1; i &lt;= n; i++)&#123;
        if(!deg[i])&#123;
            q[++tt] = i;
        &#125;
    &#125;
    while(hh &lt;= tt)&#123;
        int t = q[hh++];
        for(int i = h[t]; ~i; i = ne[i])&#123;
            int j = e[i];
            deg[j]--;
            if(!deg[j])&#123;
                q[++tt] = j;
            &#125;
        &#125;
    &#125;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    cin &gt;&gt; n &gt;&gt; m;
    memset(h, -1, sizeof(h));
    for(int i = 1; i &lt;= m; i++)&#123;
        int a, b;
        cin &gt;&gt; a &gt;&gt; b;
        add(a, b);
        deg[b]++;
    &#125;
    toposort();
    for(int i = n - 1; i &gt;= 0; i--)&#123;
        int j = q[i];
        f[j][j] = 1;
        for(int k = h[j]; ~k; k = ne[k])&#123;
            int l = e[k];
            f[j] |= f[l];
        &#125;
    &#125;
    for(int i = 1; i &lt;= n; i++)&#123;
        cout &lt;&lt; f[i].count() &lt;&lt; &#39;\n&#39;;
    &#125;
&#125;
</code></pre><h3 id="AcWing-è½¦ç«™åˆ†çº§"><a href="#AcWing-è½¦ç«™åˆ†çº§" class="headerlink" title="AcWing|è½¦ç«™åˆ†çº§"></a><span class="exturl" data-url="aHR0cHM6Ly93d3cuYWN3aW5nLmNvbS9wcm9ibGVtL2NvbnRlbnQvNDU4">AcWing|è½¦ç«™åˆ†çº§</span></h3><ul><li>å»ºç«‹è™šæ‹ŸèŠ‚ç‚¹ï¼Œå°†è¾¹æ•°å‡å°‘ï¼Œå†æ‹“æ‰‘æ’åºè§£å†³ï¼ŒåŒä¸Šã€Šå¥–æ¯ã€‹</li></ul><pre><code class="cpp">#include &lt;bits/stdc++.h&gt;
using namespace std;
const int N = 2010, M = 1000010;
int n, m;
int h[N], e[M], ne[M], w[M], idx;
int deg[N], vis[N];
int q[N];
int dist[N];
void add(int a, int b, int c)&#123;
    e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx++;
    deg[b]++;
&#125;
void toposort()&#123;
    int hh = 0, tt = -1;
    for(int i = 1; i &lt;= n + m; i++)&#123;
        if(!deg[i])&#123;
            q[++tt] = i;
        &#125;
        // if(tt == N) tt = 0;
    &#125;
    while(hh &lt;= tt)&#123;
        int t = q[hh++];
        // if(hh == N) hh = 0;
        for(int i = h[t]; ~i; i = ne[i])&#123;
            int j = e[i];
            if(--deg[j] == 0)&#123;
                q[++tt] = j;
                // if(tt == N) tt = 0;
            &#125;
        &#125;
    &#125;
&#125;
int main()&#123;
    cin.tie(nullptr)-&gt;sync_with_stdio(false);
    cin &gt;&gt; n &gt;&gt; m;
    memset(h, -1, sizeof(h));
    for(int i = 1; i &lt;= m; i++)&#123;
        int s;
        cin &gt;&gt; s;
        memset(vis, 0, sizeof(vis));
        int stop, start = n, end = 1;
        while(s--)&#123;
            cin &gt;&gt; stop;
            vis[stop] = 1;
            start = min(start, stop);
            end = max(end, stop);
        &#125;
        int ver = n + i;
        for(int j = start; j &lt;= end; j++)&#123;
            if(!vis[j])&#123;
                add(j, ver, 0);
            &#125;else&#123;
                add(ver, j, 1);
            &#125;
        &#125;
    &#125;

    toposort();
    for(int i = 1; i &lt;= n; i++)&#123;
        dist[i] = 1;
    &#125;
    for(int i = 0; i &lt; n + m; i++)&#123;
        int j = q[i];
        for(int k = h[j]; ~k; k = ne[k])&#123;
            int l = e[k];
            dist[l] = max(dist[l], dist[j] + w[k]);
        &#125;
    &#125;
    int ans = 0;
    for(int i = 1; i &lt;= n; i++)&#123;
        ans = max(ans, dist[i]);
    &#125;
    cout &lt;&lt; ans &lt;&lt; &#39;\n&#39;;
&#125;
</code></pre><div class="tags"><a href="/tags/%E6%A8%A1%E6%9D%BF/" rel="tag"><i class="ic i-tag"></i> æ¨¡æ¿</a> <a href="/tags/%E9%A2%98%E9%9B%86/" rel="tag"><i class="ic i-tag"></i> é¢˜é›†</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">æ›´æ–°äº</span> <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-08-31 07:15:27" itemprop="dateModified" datetime="2022-08-31T07:15:27+08:00">2022-08-31</time> </span><span id="post/å›¾è®ºé¢˜é›†.html" class="item leancloud_visitors" data-flag-title="å›¾è®ºé¢˜é›†" title="é˜…è¯»æ¬¡æ•°"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">é˜…è¯»æ¬¡æ•°</span> <span class="leancloud-visitors-count"></span> <span class="text">æ¬¡</span></span></div><div id="copyright"><ul><li class="author"><strong>æœ¬æ–‡ä½œè€…ï¼š </strong>Retsa <i class="ic i-at"><em>@</em></i>Retsa</li><li class="link"><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong> <a href="https://asterzc19.github.io/post/%E5%9B%BE%E8%AE%BA%E9%A2%98%E9%9B%86.html" title="å›¾è®ºé¢˜é›†">https://asterzc19.github.io/post/å›¾è®ºé¢˜é›†.html</a></li><li class="license"><strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬ç«™æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/post/%E6%90%9C%E7%B4%A2%E9%A2%98%E9%9B%86.html" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;s3.bmp.ovh&#x2F;imgs&#x2F;2022&#x2F;09&#x2F;05&#x2F;0ff0506797b60902.jpg" title="æœç´¢é¢˜é›†"><span class="type">ä¸Šä¸€ç¯‡</span> <span class="category"><i class="ic i-flag"></i></span><h3>æœç´¢é¢˜é›†</h3></a></div><div class="item right"><a href="/post/%E9%AB%98%E7%BA%A7%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E9%A2%98%E9%9B%86.html" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;s3.bmp.ovh&#x2F;imgs&#x2F;2022&#x2F;09&#x2F;06&#x2F;0f4de4af64f8d166.jpg" title="é«˜çº§æ•°æ®ç»“æ„é¢˜é›†"><span class="type">ä¸‹ä¸€ç¯‡</span> <span class="category"><i class="ic i-flag"></i></span><h3>é«˜çº§æ•°æ®ç»“æ„é¢˜é›†</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="æ–‡ç« ç›®å½•"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E6%BA%90%E6%9C%80%E7%9F%AD%E8%B7%AF%E7%9A%84%E5%BB%BA%E5%9B%BE%E6%96%B9%E5%BC%8F"><span class="toc-number">1.</span> <span class="toc-text">å•æºæœ€çŸ­è·¯çš„å»ºå›¾æ–¹å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E7%83%AD%E6%B5%AA"><span class="toc-number">1.1.</span> <span class="toc-text">AcWing|çƒ­æµª</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E4%BF%A1%E4%BD%BF"><span class="toc-number">1.2.</span> <span class="toc-text">AcWing|ä¿¡ä½¿</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E9%A6%99%E7%94%9C%E7%9A%84%E9%BB%84%E6%B2%B9"><span class="toc-number">1.3.</span> <span class="toc-text">AcWing|é¦™ç”œçš„é»„æ²¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E6%9C%80%E5%B0%8F%E8%8A%B1%E8%B4%B9"><span class="toc-number">1.4.</span> <span class="toc-text">AcWing|æœ€å°èŠ±è´¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E6%9C%80%E4%BC%98%E4%B9%98%E8%BD%A6"><span class="toc-number">1.5.</span> <span class="toc-text">AcWing|æœ€ä¼˜ä¹˜è½¦</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E6%98%82%E8%B4%B5%E7%9A%84%E8%81%98%E7%A4%BC"><span class="toc-number">1.6.</span> <span class="toc-text">AcWing|æ˜‚è´µçš„è˜ç¤¼</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E6%BA%90%E6%9C%80%E7%9F%AD%E8%B7%AF%E7%9A%84%E7%BB%BC%E5%90%88%E5%BA%94%E7%94%A8"><span class="toc-number">2.</span> <span class="toc-text">å•æºæœ€çŸ­è·¯çš„ç»¼åˆåº”ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E6%96%B0%E5%B9%B4%E5%A5%BD"><span class="toc-number">2.1.</span> <span class="toc-text">AcWing|æ–°å¹´å¥½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E9%80%9A%E4%BF%A1%E7%BA%BF%E8%B7%AF"><span class="toc-number">2.2.</span> <span class="toc-text">AcWing|é€šä¿¡çº¿è·¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E9%81%93%E8%B7%AF%E4%B8%8E%E8%88%AA%E7%BA%BF%F0%9F%8C%96%F0%9F%8C%96"><span class="toc-number">2.3.</span> <span class="toc-text">AcWing|é“è·¯ä¸èˆªçº¿ğŸŒ–ğŸŒ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E6%9C%80%E4%BC%98%E8%B4%B8%E6%98%93"><span class="toc-number">2.4.</span> <span class="toc-text">AcWing|æœ€ä¼˜è´¸æ˜“</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E6%BA%90%E6%9C%80%E7%9F%AD%E8%B7%AF%E7%9A%84%E6%89%A9%E5%B1%95%E5%BA%94%E7%94%A8"><span class="toc-number">3.</span> <span class="toc-text">å•æºæœ€çŸ­è·¯çš„æ‰©å±•åº”ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E9%80%89%E6%8B%A9%E6%9C%80%E4%BD%B3%E8%B7%AF%E7%BA%BF"><span class="toc-number">3.1.</span> <span class="toc-text">AcWing|é€‰æ‹©æœ€ä½³è·¯çº¿</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E6%8B%AF%E6%95%91%E5%A4%A7%E5%85%B5%E7%91%9E%E6%81%A9%F0%9F%8C%96%F0%9F%8C%96"><span class="toc-number">3.2.</span> <span class="toc-text">AcWing|æ‹¯æ•‘å¤§å…µç‘æ©ğŸŒ–ğŸŒ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E6%9C%80%E7%9F%AD%E8%B7%AF%E8%AE%A1%E6%95%B0%F0%9F%8C%B8"><span class="toc-number">3.3.</span> <span class="toc-text">AcWing|æœ€çŸ­è·¯è®¡æ•°ğŸŒ¸</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E8%A7%82%E5%85%89%F0%9F%8C%B8"><span class="toc-number">3.4.</span> <span class="toc-text">AcWing|è§‚å…‰ğŸŒ¸</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Floyd-%E7%AE%97%E6%B3%95"><span class="toc-number">4.</span> <span class="toc-text">Floyd ç®—æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E7%89%9B%E7%9A%84%E6%97%85%E8%A1%8C"><span class="toc-number">4.1.</span> <span class="toc-text">AcWing|ç‰›çš„æ—…è¡Œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E6%8E%92%E5%BA%8F%F0%9F%8C%B8"><span class="toc-number">4.2.</span> <span class="toc-text">AcWing|æ’åºğŸŒ¸</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E8%A7%82%E5%85%89%E4%B9%8B%E6%97%85%F0%9F%8C%B8"><span class="toc-number">4.3.</span> <span class="toc-text">AcWing|è§‚å…‰ä¹‹æ—…ğŸŒ¸</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E7%89%9B%E7%AB%99%F0%9F%8C%96"><span class="toc-number">4.4.</span> <span class="toc-text">AcWing|ç‰›ç«™ğŸŒ–</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91"><span class="toc-number">5.</span> <span class="toc-text">æœ€å°ç”Ÿæˆæ ‘</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E6%9C%80%E7%9F%AD%E7%BD%91%E7%BB%9C"><span class="toc-number">5.1.</span> <span class="toc-text">AcWing|æœ€çŸ­ç½‘ç»œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E5%B1%80%E5%9F%9F%E7%BD%91"><span class="toc-number">5.2.</span> <span class="toc-text">AcWing|å±€åŸŸç½‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E7%B9%81%E5%BF%99%E7%9A%84%E9%83%BD%E5%B8%82"><span class="toc-number">5.3.</span> <span class="toc-text">AcWing|ç¹å¿™çš„éƒ½å¸‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E8%81%94%E7%BB%9C%E5%91%98"><span class="toc-number">5.4.</span> <span class="toc-text">AcWing|è”ç»œå‘˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E8%BF%9E%E6%8E%A5%E6%A0%BC%E7%82%B9%F0%9F%8C%B8"><span class="toc-number">5.5.</span> <span class="toc-text">AcWing|è¿æ¥æ ¼ç‚¹ğŸŒ¸</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91%E7%9A%84%E6%89%A9%E5%B1%95%E5%BA%94%E7%94%A8"><span class="toc-number">6.</span> <span class="toc-text">æœ€å°ç”Ÿæˆæ ‘çš„æ‰©å±•åº”ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E6%96%B0%E7%9A%84%E5%BC%80%E5%A7%8B"><span class="toc-number">6.1.</span> <span class="toc-text">AcWing|æ–°çš„å¼€å§‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E5%8C%97%E6%9E%81%E9%80%9A%E8%AE%AF%E7%BD%91%E7%BB%9C"><span class="toc-number">6.2.</span> <span class="toc-text">AcWing|åŒ—æé€šè®¯ç½‘ç»œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E8%B5%B0%E5%BB%8A%E6%B3%BC%E6%B0%B4%E8%8A%82"><span class="toc-number">6.3.</span> <span class="toc-text">AcWing|èµ°å»Šæ³¼æ°´èŠ‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E7%A7%98%E5%AF%86%E7%9A%84%E7%89%9B%E5%A5%B6%E8%BF%90%E8%BE%93%F0%9F%8C%96"><span class="toc-number">6.4.</span> <span class="toc-text">AcWing|ç§˜å¯†çš„ç‰›å¥¶è¿è¾“ğŸŒ–</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B4%9F%E7%8E%AF"><span class="toc-number">7.</span> <span class="toc-text">è´Ÿç¯</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E8%99%AB%E6%B4%9E"><span class="toc-number">7.1.</span> <span class="toc-text">AcWing|è™«æ´</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E8%A7%82%E5%85%89%E5%A5%B6%E7%89%9B"><span class="toc-number">7.2.</span> <span class="toc-text">AcWing|è§‚å…‰å¥¶ç‰›</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E5%8D%95%E8%AF%8D%E7%8E%AF"><span class="toc-number">7.3.</span> <span class="toc-text">AcWing|å•è¯ç¯</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B7%AE%E5%88%86%E7%BA%A6%E6%9D%9F"><span class="toc-number">8.</span> <span class="toc-text">å·®åˆ†çº¦æŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E7%B3%96%E6%9E%9C"><span class="toc-number">8.1.</span> <span class="toc-text">AcWing|ç³–æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E5%8C%BA%E9%97%B4"><span class="toc-number">8.2.</span> <span class="toc-text">AcWing|åŒºé—´</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E6%8E%92%E9%98%9F%E5%B8%83%E5%B1%80"><span class="toc-number">8.3.</span> <span class="toc-text">AcWing|æ’é˜Ÿå¸ƒå±€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E9%9B%87%E4%BD%A3%E6%94%B6%E9%93%B6%E5%91%98"><span class="toc-number">8.4.</span> <span class="toc-text">AcWing|é›‡ä½£æ”¶é“¶å‘˜</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E8%BF%91%E5%85%AC%E5%85%B1%E7%A5%96%E5%85%88"><span class="toc-number">9.</span> <span class="toc-text">æœ€è¿‘å…¬å…±ç¥–å…ˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E7%A5%96%E5%AD%99%E8%AF%A2%E9%97%AE"><span class="toc-number">9.1.</span> <span class="toc-text">AcWing|ç¥–å­™è¯¢é—®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E8%B7%9D%E7%A6%BB"><span class="toc-number">9.2.</span> <span class="toc-text">AcWing|è·ç¦»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E6%AC%A1%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91%F0%9F%8C%96"><span class="toc-number">9.3.</span> <span class="toc-text">AcWing|æ¬¡å°ç”Ÿæˆæ ‘ğŸŒ–</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%89%E5%90%91%E5%9B%BE%E7%9A%84%E5%BC%BA%E8%BF%9E%E9%80%9A%E5%88%86%E9%87%8F"><span class="toc-number">10.</span> <span class="toc-text">æœ‰å‘å›¾çš„å¼ºè¿é€šåˆ†é‡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E5%8F%97%E6%AC%A2%E8%BF%8E%E7%9A%84%E7%89%9B"><span class="toc-number">10.1.</span> <span class="toc-text">AcWing|å—æ¬¢è¿çš„ç‰›</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E5%AD%A6%E6%A0%A1%E7%BD%91%E7%BB%9C"><span class="toc-number">10.2.</span> <span class="toc-text">AcWing|å­¦æ ¡ç½‘ç»œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E6%9C%80%E5%A4%A7%E5%8D%8A%E8%BF%9E%E9%80%9A%E5%AD%90%E5%9B%BE"><span class="toc-number">10.3.</span> <span class="toc-text">AcWing|æœ€å¤§åŠè¿é€šå­å›¾</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E9%93%B6%E6%B2%B3"><span class="toc-number">10.4.</span> <span class="toc-text">AcWing|é“¶æ²³</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A0%E5%90%91%E5%9B%BE%E7%9A%84%E5%8F%8C%E8%BF%9E%E9%80%9A%E5%88%86%E9%87%8F"><span class="toc-number">11.</span> <span class="toc-text">æ— å‘å›¾çš„åŒè¿é€šåˆ†é‡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E5%86%97%E4%BD%99%E8%B7%AF%E5%BE%84"><span class="toc-number">11.1.</span> <span class="toc-text">AcWing|å†—ä½™è·¯å¾„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E7%94%B5%E5%8A%9B"><span class="toc-number">11.2.</span> <span class="toc-text">AcWing|ç”µåŠ›</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E7%9F%BF%E5%9C%BA%E6%90%AD%E5%BB%BA-%F0%9F%8C%96%F0%9F%8C%96"><span class="toc-number">11.3.</span> <span class="toc-text">AcWing|çŸ¿åœºæ­å»º ğŸŒ–ğŸŒ–</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E5%88%86%E5%9B%BE"><span class="toc-number">12.</span> <span class="toc-text">äºŒåˆ†å›¾</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E5%85%B3%E6%8A%BC%E7%BD%AA%E7%8A%AF"><span class="toc-number">12.1.</span> <span class="toc-text">AcWing|å…³æŠ¼ç½ªçŠ¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E6%A3%8B%E7%9B%98%E8%A6%86%E7%9B%96"><span class="toc-number">12.2.</span> <span class="toc-text">AcWing|æ£‹ç›˜è¦†ç›–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E6%9C%BA%E5%99%A8%E4%BB%BB%E5%8A%A1"><span class="toc-number">12.3.</span> <span class="toc-text">AcWing|æœºå™¨ä»»åŠ¡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E9%AA%91%E5%A3%AB%E6%94%BE%E7%BD%AE"><span class="toc-number">12.4.</span> <span class="toc-text">AcWing|éª‘å£«æ”¾ç½®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E6%8D%89%E8%BF%B7%E8%97%8F"><span class="toc-number">12.5.</span> <span class="toc-text">AcWing|æ‰è¿·è—</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AC%A7%E6%8B%89%E5%9B%9E%E8%B7%AF%E5%92%8C%E6%AC%A7%E6%8B%89%E8%B7%AF%E5%BE%84"><span class="toc-number">13.</span> <span class="toc-text">æ¬§æ‹‰å›è·¯å’Œæ¬§æ‹‰è·¯å¾„</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E9%93%B2%E9%9B%AA%E8%BD%A6"><span class="toc-number">13.1.</span> <span class="toc-text">AcWing|é“²é›ªè½¦</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E6%AC%A7%E6%8B%89%E5%9B%9E%E8%B7%AF"><span class="toc-number">13.2.</span> <span class="toc-text">AcWing|æ¬§æ‹‰å›è·¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E9%AA%91%E9%A9%AC%E4%BF%AE%E6%A0%85%E6%A0%8F"><span class="toc-number">13.3.</span> <span class="toc-text">AcWing|éª‘é©¬ä¿®æ …æ </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E5%8D%95%E8%AF%8D%E6%B8%B8%E6%88%8F"><span class="toc-number">13.4.</span> <span class="toc-text">AcWing|å•è¯æ¸¸æˆ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F"><span class="toc-number">14.</span> <span class="toc-text">æ‹“æ‰‘æ’åº</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E5%AE%B6%E8%B0%B1%E6%A0%91"><span class="toc-number">14.1.</span> <span class="toc-text">AcWing|å®¶è°±æ ‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E5%A5%96%E9%87%91"><span class="toc-number">14.2.</span> <span class="toc-text">AcWing|å¥–é‡‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E5%8F%AF%E8%BE%BE%E6%80%A7%E7%BB%9F%E8%AE%A1"><span class="toc-number">14.3.</span> <span class="toc-text">AcWing|å¯è¾¾æ€§ç»Ÿè®¡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AcWing-%E8%BD%A6%E7%AB%99%E5%88%86%E7%BA%A7"><span class="toc-number">14.4.</span> <span class="toc-text">AcWing|è½¦ç«™åˆ†çº§</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="ç³»åˆ—æ–‡ç« "></div><div class="overview panel" data-title="ç«™ç‚¹æ¦‚è§ˆ"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Retsa" data-src="/images/iOS.jpg"><p class="name" itemprop="name">Retsa</p><div class="description" itemprop="description">å¯¹æœªæ¥çš„é€æ”¯ï¼Œå¯¹è¿‡å»çš„å¿è¿˜</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">15</span> <span class="name">æ–‡ç« </span></a></div><div class="item categories"><a href="/categories/"><span class="count">6</span> <span class="name">åˆ†ç±»</span></a></div><div class="item tags"><a href="/tags/"><span class="count">9</span> <span class="name">æ ‡ç­¾</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL0FzdGVyWkMxOQ==" title="https:&#x2F;&#x2F;github.com&#x2F;AsterZC19"><i class="ic i-github"></i></span> <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS9Bc3RlclpDMTk=" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;AsterZC19"><i class="ic i-zhihu"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>é¦–é¡µ</a></li><li class="item"><a href="/about" rel="section"><i class="ic i-user"></i>å…³äº</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/post/%E6%90%9C%E7%B4%A2%E9%A2%98%E9%9B%86.html" rel="prev" title="ä¸Šä¸€ç¯‡"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/post/%E9%AB%98%E7%BA%A7%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E9%A2%98%E9%9B%86.html" rel="next" title="ä¸‹ä¸€ç¯‡"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>éšæœºæ–‡ç« </h2><ul><li class="item"><div class="breadcrumb"></div><span><a href="/post/%E9%AB%98%E7%BA%A7%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E9%A2%98%E9%9B%86.html" title="é«˜çº§æ•°æ®ç»“æ„é¢˜é›†">é«˜çº§æ•°æ®ç»“æ„é¢˜é›†</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/post/%E6%90%9C%E7%B4%A2%E9%A2%98%E9%9B%86.html" title="æœç´¢é¢˜é›†">æœç´¢é¢˜é›†</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/post/%E5%9B%BE%E8%AE%BA%E9%A2%98%E9%9B%86.html" title="å›¾è®ºé¢˜é›†">å›¾è®ºé¢˜é›†</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/post/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E9%A2%98%E9%9B%86.html" title="åŠ¨æ€è§„åˆ’é¢˜é›†">åŠ¨æ€è§„åˆ’é¢˜é›†</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E7%AE%97%E6%B3%95/" title="åˆ†ç±»äº ç®—æ³•">ç®—æ³•</a></div><span><a href="/post/STL%E7%AE%80%E4%BB%8B.html" title="STL ç®€ä»‹">STL ç®€ä»‹</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E6%96%87%E7%AB%A0/" title="åˆ†ç±»äº æ–‡ç« ">æ–‡ç« </a></div><span><a href="/post/%E6%B3%A8%E6%84%8F%E5%8A%9B%E4%BD%BF%E7%94%A8%E4%B8%8D%E5%AE%8C%E5%85%A8%E6%8A%A5%E5%91%8A.html" title="æ³¨æ„åŠ›ä½¿ç”¨ä¸å®Œå…¨æŠ¥å‘Š">æ³¨æ„åŠ›ä½¿ç”¨ä¸å®Œå…¨æŠ¥å‘Š</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E7%AE%97%E6%B3%95/" title="åˆ†ç±»äº ç®—æ³•">ç®—æ³•</a> <i class="ic i-angle-right"></i> <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" title="åˆ†ç±»äº æ•°æ®ç»“æ„">æ•°æ®ç»“æ„</a> <i class="ic i-angle-right"></i> <a href="/categories/CodeForces/" title="åˆ†ç±»äº CodeForces">CodeForces</a> <i class="ic i-angle-right"></i> <a href="/categories/AtCoder/" title="åˆ†ç±»äº AtCoder">AtCoder</a></div><span><a href="/post/%E4%B8%AA%E4%BA%BA%E9%A2%98%E5%8D%95.html" title="é¢˜ç›®å°é›†">é¢˜ç›®å°é›†</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/post/%E6%95%B0%E5%AD%A6%E7%9F%A5%E8%AF%86.html" title="æ•°å­¦çŸ¥è¯†">æ•°å­¦çŸ¥è¯†</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E7%AE%97%E6%B3%95/" title="åˆ†ç±»äº ç®—æ³•">ç®—æ³•</a> <i class="ic i-angle-right"></i> <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" title="åˆ†ç±»äº æ•°æ®ç»“æ„">æ•°æ®ç»“æ„</a></div><span><a href="/post/%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA.html" title="æœç´¢ä¸å›¾è®ºæ¨¡æ¿">æœç´¢ä¸å›¾è®ºæ¨¡æ¿</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/post/%E7%BD%91%E7%BB%9C%E6%B5%81.html" title="ç½‘ç»œæµ">ç½‘ç»œæµ</a></span></li></ul></div><div><h2>æœ€æ–°è¯„è®º</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="ic i-Retsa"></i> </span><span class="author" itemprop="copyrightHolder">Retsa @ å›ä¸åˆ°çš„è¿‡å»</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="ç«™ç‚¹æ€»å­—æ•°">274k å­—</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">4:09</span></div><div class="powered-by">åŸºäº <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"post/å›¾è®ºé¢˜é›†.html",favicon:{show:"ï¼ˆâ—Â´3ï½€â—ï¼‰ã‚„ã‚Œã‚„ã‚Œã ãœ",hide:"(Â´Ğ”ï½€)å¤§å¤‰ã ï¼"},search:{placeholder:"æ–‡ç« æœç´¢",empty:"å…³äº ã€Œ ${query} ã€ï¼Œä»€ä¹ˆä¹Ÿæ²¡æœåˆ°",stats:"${time} ms å†…æ‰¾åˆ° ${hits} æ¡ç»“æœ"},valine:!0,copy_tex:!0,katex:!0,fancybox:!0,copyright:'å¤åˆ¶æˆåŠŸï¼Œè½¬è½½è¯·éµå®ˆ <i class="ic i-creative-commons"></i>BY-NC-SA åè®®ã€‚',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->